import{a as ut,b as ye,c as ft,d as _t,e as gn,f as Gt}from"./chunk-UDMGSDDX.js";import{a as Me,b as pn,c as un}from"./chunk-ACYY2LWB.js";import{a as D}from"./chunk-QGSGR6J2.js";import{a as _e,b as $,c as O,d as U,e as ee,f as sn,g as gt,h as K,i as te,j as be,k as se,l as cn,m as ln,n as ce,o as Ce,p as he,q as ve,r as dn,s as Ve,t as He,u as ze,w as mn,x as le,y as z,z as de}from"./chunk-HDIV7RPX.js";import{a as tn,c as xe,d as pt,e as Q,f as on,g as rn,h as an}from"./chunk-RWYJK2X4.js";import{A as G,Ab as h,Bb as C,C as st,Cb as q,Eb as I,F as ct,Fb as E,G as oe,Gb as T,Ib as $e,Jb as Jt,K as rt,Ka as Ee,Kb as ne,Lb as ae,Mb as Zt,Na as Qt,Nb as ie,O as w,Oa as dt,Pa as a,Pb as Xt,S as X,Ta as P,X as re,Ya as S,a as Re,b as je,ba as Yt,bb as _,ca as u,d as V,da as f,dc as ue,e as at,ec as N,fc as L,g as Ut,gc as fe,hb as Kt,hc as mt,ib as l,ic as en,j as B,jb as Ue,jc as k,k as ke,kb as M,la as Ie,lb as R,ma as lt,mb as i,n as ge,nb as o,o as Se,ob as d,pb as qe,pc as Te,qb as Ge,qc as pe,r as qt,rb as v,rc as j,sb as g,sc as nn,tb as p,vb as Ne,wb as De,xb as Fe,yb as Y,zb as s}from"./chunk-VGUPXT3C.js";var bt=class r{title="bus_ck_admin";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){e&1&&d(0,"router-outlet")},dependencies:[pt],encapsulation:2})};function yn(r,t){r&1&&(i(0,"div",40),d(1,"div",41),i(2,"span"),s(3,"Loading..."),o()())}function Sn(r,t){r&1&&(i(0,"div",42)(1,"span"),s(2,"No tenants found"),o()())}function wn(r,t){if(r&1){let e=v();i(0,"div",43),g("click",function(){let c=u(e).$implicit,m=p();return f(m.selectTenant(c))})("mouseenter",function(){let c=u(e).index,m=p();return f(m.highlightedIndex=c)}),i(1,"div",44)(2,"span",45),s(3),o(),i(4,"span",46),s(5),o()()()}if(r&2){let e=t.$implicit,n=t.index,c=p();M("highlighted",c.highlightedIndex===n),a(3),h(e.name),a(2),C("ID: ",e.code,"")}}function kn(r,t){r&1&&(i(0,"div",47),s(1," Tenant selection is required "),o())}function In(r,t){r&1&&(i(0,"div",47),s(1," Username is required "),o())}function En(r,t){r&1&&(i(0,"div",47),s(1," Password is required "),o())}function Tn(r,t){r&1&&(i(0,"span"),s(1,"Sign In"),o())}function Ln(r,t){r&1&&(i(0,"span",48),d(1,"div",49),s(2," Signing in... "),o())}function An(r,t){if(r&1&&(i(0,"div",50),s(1),o()),r&2){let e=p();a(),C(" ",e.errorMessage," ")}}var Ct=class r{constructor(t,e){this.router=t;this.authService=e}model={tenantCode:"",username:"",password:""};tenants=[];filteredTenants=[];selectedTenant=null;loadingTenants=!1;isLoading=!1;errorMessage="";rememberMe=!1;showPassword=!1;isDropdownOpen=!1;searchTerm="";highlightedIndex=-1;searchSubject=new B;destroy$=new B;ngOnInit(){this.authService.clearToken(),this.searchSubject.pipe(st(200),ct(),w(this.destroy$)).subscribe(t=>{this.filterTenants(t)}),this.loadTenants()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDocumentClick(t){t.target.closest(".custom-dropdown")||this.closeDropdown()}loadTenants(){this.loadingTenants=!0,this.errorMessage="",this.authService.getTenants(!0).pipe(w(this.destroy$)).subscribe({next:t=>{this.tenants=t,this.filteredTenants=[...this.tenants],this.loadingTenants=!1,this.loadRememberedCredentials()},error:t=>{console.error("Error loading tenants:",t),this.errorMessage="Failed to load tenants. Please refresh the page.",this.loadingTenants=!1}})}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen,this.isDropdownOpen&&(this.searchTerm="",this.filteredTenants=[...this.tenants],this.highlightedIndex=-1)}closeDropdown(){this.isDropdownOpen=!1,this.searchTerm=this.selectedTenant?`${this.selectedTenant.name} (${this.selectedTenant.code})`:""}onSearch(t){let n=t.target.value;this.searchSubject.next(n)}filterTenants(t){t.trim()?this.filteredTenants=this.tenants.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.code.toLowerCase().includes(t.toLowerCase())):this.filteredTenants=[...this.tenants],this.highlightedIndex=-1}selectTenant(t){this.selectedTenant=t,this.model.tenantCode=t.code,this.searchTerm=`${t.name} (${t.code})`,this.closeDropdown()}onKeydown(t){if(this.isDropdownOpen)switch(t.key){case"ArrowDown":t.preventDefault(),this.highlightedIndex=Math.min(this.highlightedIndex+1,this.filteredTenants.length-1);break;case"ArrowUp":t.preventDefault(),this.highlightedIndex=Math.max(this.highlightedIndex-1,-1);break;case"Enter":t.preventDefault(),this.highlightedIndex>=0&&this.filteredTenants[this.highlightedIndex]&&this.selectTenant(this.filteredTenants[this.highlightedIndex]);break;case"Escape":this.closeDropdown();break}}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(this.isLoading)return;if(!this.model.tenantCode){this.errorMessage="Please select a tenant.";return}if(!this.model.username||!this.model.password){this.errorMessage="Please enter both username and password.";return}this.isLoading=!0,this.errorMessage="";let t={tenantCode:this.model.tenantCode,username:this.model.username,password:this.model.password};this.authService.login(t).pipe(w(this.destroy$)).subscribe({next:e=>{console.log("Login successful:",e.message),this.authService.saveToken(e.token),this.authService.saveTenant(this.model.tenantCode),this.rememberMe&&(localStorage.setItem("rememberMe","true"),localStorage.setItem("username",this.model.username),localStorage.setItem("tenantCode",this.model.tenantCode)),this.router.navigate(["/admin/dashboard"])},error:e=>{console.error("Login failed:",e),this.isLoading=!1,e.status===401?this.errorMessage="Invalid credentials. Please check your username and password.":e.status===400?this.errorMessage=e.error?.message||"Invalid request. Please check your inputs.":this.errorMessage="Login failed. Please try again later."}})}loadRememberedCredentials(){if(localStorage.getItem("rememberMe")==="true"){this.model.username=localStorage.getItem("username")||"";let t=localStorage.getItem("tenantCode");if(t){let e=this.tenants.find(n=>n.code===t);e&&this.selectTenant(e)}this.rememberMe=!0}}static \u0275fac=function(e){return new(e||r)(P(Q),P(Me))};static \u0275cmp=S({type:r,selectors:[["app-login"]],hostBindings:function(e,n){e&1&&g("click",function(m){return n.onDocumentClick(m)},!1,dt)},decls:54,vars:27,consts:[["loginForm","ngForm"],["tenantSelect","ngModel"],["username","ngModel"],["password","ngModel"],[1,"login-container"],[1,"container-fluid","h-100"],[1,"row","h-100","align-items-center","justify-content-center"],[1,"col-11","col-sm-8","col-md-6","col-lg-4","col-xl-3"],[1,"login-card"],[1,"login-header"],[1,"logo-container"],["src","assets/logo_compact2.png","alt","RouteEat Logo",1,"logo"],[1,"login-subtitle"],["novalidate","",1,"login-form",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"custom-dropdown"],[1,"dropdown-input-container",3,"click"],["type","text","name","searchTerm","autocomplete","off",1,"form-control","dropdown-input",3,"ngModelChange","input","keydown","ngModel","placeholder","readonly"],[1,"dropdown-arrow"],[1,"dropdown-menu"],["class","dropdown-loading",4,"ngIf"],["class","dropdown-empty",4,"ngIf"],["class","dropdown-item",3,"highlighted","click","mouseenter",4,"ngFor","ngForOf"],["type","hidden","name","tenantId","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","text","name","username","required","","autocomplete","username","placeholder","Enter your username",1,"form-control",3,"ngModelChange","ngModel"],[1,"password-container"],["name","password","required","","autocomplete","current-password","placeholder","Enter your password",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"password-toggle",3,"click"],[1,"form-options"],[1,"checkbox-container"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"checkbox-text"],["href","#",1,"forgot-link"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","btn-loading",4,"ngIf"],["class","error-alert",4,"ngIf"],[1,"dropdown-loading"],[1,"loading-spinner"],[1,"dropdown-empty"],[1,"dropdown-item",3,"click","mouseenter"],[1,"tenant-info"],[1,"tenant-name"],[1,"tenant-id"],[1,"error-message"],[1,"btn-loading"],[1,"login-spinner"],[1,"error-alert"]],template:function(e,n){if(e&1){let c=v();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10),d(7,"img",11),o(),i(8,"span",12),s(9,"Sign in to your account"),o()(),i(10,"form",13,0),g("ngSubmit",function(){return u(c),f(n.onSubmit())}),i(12,"div",14)(13,"label",15),s(14,"Tenant"),o(),i(15,"div",16)(16,"div",17),g("click",function(){return u(c),f(n.toggleDropdown())}),i(17,"input",18),T("ngModelChange",function(b){return u(c),E(n.searchTerm,b)||(n.searchTerm=b),f(b)}),g("input",function(b){return u(c),f(n.onSearch(b))})("keydown",function(b){return u(c),f(n.onKeydown(b))}),o(),i(18,"span",19),s(19,"\u25BC"),o()(),i(20,"div",20),_(21,yn,4,0,"div",21)(22,Sn,3,0,"div",22)(23,wn,6,4,"div",23),o()(),i(24,"input",24,1),T("ngModelChange",function(b){return u(c),E(n.model.tenantCode,b)||(n.model.tenantCode=b),f(b)}),o(),_(26,kn,2,0,"div",25),o(),i(27,"div",14)(28,"label",15),s(29,"Username"),o(),i(30,"input",26,2),T("ngModelChange",function(b){return u(c),E(n.model.username,b)||(n.model.username=b),f(b)}),o(),_(32,In,2,0,"div",25),o(),i(33,"div",14)(34,"label",15),s(35,"Password"),o(),i(36,"div",27)(37,"input",28,3),T("ngModelChange",function(b){return u(c),E(n.model.password,b)||(n.model.password=b),f(b)}),o(),i(39,"button",29),g("click",function(){return u(c),f(n.togglePassword())}),s(40),o()(),_(41,En,2,0,"div",25),o(),i(42,"div",30)(43,"label",31)(44,"input",32),T("ngModelChange",function(b){return u(c),E(n.rememberMe,b)||(n.rememberMe=b),f(b)}),o(),d(45,"span",33),i(46,"span",34),s(47,"Remember me"),o()(),i(48,"a",35),s(49,"Forgot password?"),o()(),i(50,"button",36),_(51,Tn,2,0,"span",37)(52,Ln,3,0,"span",38),o()(),_(53,An,2,1,"div",39),o()()()()()}if(e&2){let c=Y(11),m=Y(25),b=Y(31),x=Y(38);a(15),M("is-open",n.isDropdownOpen)("is-invalid",m.invalid&&(m.dirty||m.touched)),a(2),I("ngModel",n.searchTerm),l("placeholder",n.selectedTenant?n.selectedTenant.name:"Select or search tenant")("readonly",!n.isDropdownOpen),a(),M("rotated",n.isDropdownOpen),a(2),M("show",n.isDropdownOpen),a(),l("ngIf",n.loadingTenants),a(),l("ngIf",!n.loadingTenants&&n.filteredTenants.length===0),a(),l("ngForOf",n.filteredTenants),a(),I("ngModel",n.model.tenantCode),a(2),l("ngIf",m.invalid&&(m.dirty||m.touched)),a(4),I("ngModel",n.model.username),a(2),l("ngIf",b.invalid&&(b.dirty||b.touched)),a(5),l("type",n.showPassword?"text":"password"),I("ngModel",n.model.password),a(3),C(" ",n.showPassword?"\u{1F648}":"\u{1F441}"," "),a(),l("ngIf",x.invalid&&(x.dirty||x.touched)),a(3),I("ngModel",n.rememberMe),a(6),l("disabled",!c.form.valid||n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",n.errorMessage)}},dependencies:[k,N,L,z,te,$,_e,U,ee,He,K,gt],styles:[`.login-container{min-height:100vh;background-color:#f8f9fa;display:flex;align-items:center;justify-content:center;width:100%;padding:0}.login-card{background:#fff;border:1px solid #e9ecef;border-radius:8px;padding:2rem;box-shadow:0 2px 10px #00000014;width:100%;max-width:400px;margin:1rem auto;position:relative;overflow:visible}.login-header{text-align:center;margin-bottom:1.5rem}.logo-container{margin-bottom:.75rem}.logo{width:100px;height:100px;object-fit:contain}.login-title{font-size:1.125rem;font-weight:600;color:#212529;margin:0 0 .25rem}.login-subtitle{font-size:.775rem;color:#6c757d;margin:0;font-weight:400}.login-form{width:100%}.form-group{margin-bottom:1rem;position:relative}.form-label{display:block;font-size:.775rem;font-weight:500;color:#495057;margin-bottom:.375rem}.form-control{width:100%;height:38px;padding:.5rem .75rem;font-size:.8rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus{outline:none;border-color:#495057;box-shadow:0 0 0 .2rem #4950571a}.form-control::placeholder{color:#adb5bd;font-size:.775rem}.password-container{position:relative}.password-toggle{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#6c757d;cursor:pointer;padding:0;font-size:.775rem;z-index:2}.password-toggle:hover{color:#495057}.custom-dropdown{position:relative;width:100%}.dropdown-input-container{position:relative;cursor:pointer}.dropdown-input{cursor:pointer;padding-right:2.5rem!important}.dropdown-input:focus{cursor:text}.dropdown-arrow{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);color:#6c757d;transition:transform .2s ease;pointer-events:none;z-index:2;font-size:.7rem}.dropdown-arrow.rotated{transform:translateY(-50%) rotate(180deg)}.custom-dropdown.is-open .dropdown-input{border-color:#495057;box-shadow:0 0 0 .2rem #4950571a}.dropdown-menu{position:absolute;top:calc(100% + .25rem);left:0;right:0;z-index:1000;background:#fff;border:1px solid #ced4da;border-radius:4px;box-shadow:0 4px 12px #00000026;max-height:160px;overflow-y:auto;display:none}.dropdown-menu.show{display:block}.dropdown-loading,.dropdown-empty{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem;color:#6c757d;font-size:.725rem}.loading-spinner{width:12px;height:12px;border:1px solid #e9ecef;border-top:1px solid #495057;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dropdown-item{padding:.5rem .75rem;cursor:pointer;transition:background-color .15s ease;border-bottom:1px solid #f8f9fa}.dropdown-item:last-child{border-bottom:none}.dropdown-item:hover,.dropdown-item.highlighted{background-color:#f8f9fa}.tenant-info{display:flex;flex-direction:column;gap:.125rem}.tenant-name{font-size:.775rem;font-weight:500;color:#495057}.tenant-id{font-size:.7rem;color:#6c757d}.form-options{display:flex;justify-content:space-between;align-items:center;margin:1rem 0 1.25rem;font-size:.725rem}.checkbox-container{display:flex;align-items:center;cursor:pointer;position:relative;margin:0}.checkbox-container input{position:absolute;opacity:0;cursor:pointer}.checkmark{width:14px;height:14px;background-color:#fff;border:1px solid #ced4da;border-radius:2px;margin-right:.5rem;position:relative;transition:all .15s ease}.checkbox-container:hover .checkmark{border-color:#495057}.checkbox-container input:checked~.checkmark{background-color:#495057;border-color:#495057}.checkbox-container input:checked~.checkmark:after{content:"";position:absolute;left:3px;top:0;width:3px;height:7px;border:solid white;border-width:0 1px 1px 0;transform:rotate(45deg)}.checkbox-text{color:#495057;font-weight:400}.forgot-link{color:#495057;text-decoration:none;font-weight:500}.forgot-link:hover{color:#212529;text-decoration:underline}.btn-login{width:100%;height:40px;background-color:#495057;border:1px solid #495057;border-radius:4px;color:#fff;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .15s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-login:hover:not(:disabled){background-color:#343a40;border-color:#343a40}.btn-login:disabled{background-color:#e9ecef;border-color:#e9ecef;color:#6c757d;cursor:not-allowed}.btn-loading{display:flex;align-items:center;gap:.5rem}.login-spinner{width:12px;height:12px;border:1px solid rgba(255,255,255,.3);border-top:1px solid #fff;border-radius:50%;animation:spin 1s linear infinite}.error-message{color:#dc3545;font-size:.7rem;font-weight:400;margin-top:.25rem}.error-alert{background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;padding:.75rem;margin-top:1rem;font-size:.775rem;color:#721c24}.custom-dropdown.is-invalid .dropdown-input{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc35451a}.dropdown-menu::-webkit-scrollbar{width:4px}.dropdown-menu::-webkit-scrollbar-track{background:#f8f9fa}.dropdown-menu::-webkit-scrollbar-thumb{background:#ced4da;border-radius:2px}.dropdown-menu::-webkit-scrollbar-thumb:hover{background:#adb5bd}@media (max-width: 576px){.login-container{min-height:100vh;height:100vh;width:100vw;padding:0;margin:0}.login-card{border-radius:0;min-height:100vh;width:100vw;max-width:100vw;box-shadow:none;margin:0;padding:1.5rem 1rem;display:flex;flex-direction:column;justify-content:center}.logo{width:120px;height:120px;margin-bottom:1rem}.login-title{font-size:1rem}.login-subtitle{font-size:.7rem}.form-control{height:42px;font-size:.875rem}.btn-login{height:44px;font-size:.875rem}.dropdown-menu{max-height:140px}.form-options{flex-direction:column;gap:.75rem;align-items:flex-start}}@media (max-width: 400px){.login-card{padding:1.25rem .75rem}.logo{width:100px;height:100px}.login-title{font-size:.95rem}}@media (max-width: 768px) and (orientation: landscape){.login-card{min-height:100vh;justify-content:flex-start;padding-top:2rem}.logo{width:80px;height:80px;margin-bottom:.5rem}}
`],encapsulation:2})};function Rn(r,t){if(r&1&&(i(0,"div",13),d(1,"i",14),s(2),o()),r&2){let e=p();a(2),C(" ",e.errorMessage," ")}}var ht=class r{constructor(t){this.authService=t}isSystemOnline=!1;isLoading=!1;errorMessage="";currentTenant=null;destroy$=new B;ngOnInit(){this.loadTenantAndStatus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadTenantAndStatus(){this.isLoading=!0,this.errorMessage="",this.authService.getCurrentTenant().pipe(w(this.destroy$)).subscribe({next:t=>{t?(this.currentTenant=t,this.isSystemOnline=t.takeOrders,localStorage.setItem("currentTenant",JSON.stringify(t)),localStorage.setItem("systemStatus",JSON.stringify(t.takeOrders)),console.log(`Loaded tenant: ${t.tenantName} (${t.tenantCode})`)):this.errorMessage="Failed to load tenant information",this.isLoading=!1},error:t=>{console.error("Failed to load tenant:",t),this.isLoading=!1;let e=localStorage.getItem("currentTenant"),n=localStorage.getItem("systemStatus");e&&(this.currentTenant=JSON.parse(e)),n?this.isSystemOnline=JSON.parse(n):this.errorMessage="Unable to load restaurant status"}})}toggleSystem(){if(this.isLoading||!this.currentTenant)return;this.isLoading=!0,this.errorMessage="";let t=!this.isSystemOnline;this.authService.updateTakeOrdersStatus(t).pipe(w(this.destroy$)).subscribe({next:e=>{e.success?(this.isSystemOnline=t,this.currentTenant&&(this.currentTenant.takeOrders=t),localStorage.setItem("systemStatus",JSON.stringify(t)),this.currentTenant&&localStorage.setItem("currentTenant",JSON.stringify(this.currentTenant)),console.log(`${this.currentTenant?.tenantName} is now ${t?"ACCEPTING ORDERS":"NOT ACCEPTING ORDERS"}`)):this.errorMessage=e.message||"Failed to update status",this.isLoading=!1},error:e=>{console.error("Failed to toggle system:",e),this.isLoading=!1,e.status===401?this.errorMessage="Please login again":e.status===403?this.errorMessage="Permission denied":this.errorMessage="Update failed. Try again."}})}getStatusText(){let t=this.currentTenant?.tenantName||"Restaurant";return this.isSystemOnline?`${t} is accepting orders`:`${t} is not accepting orders`}static \u0275fac=function(e){return new(e||r)(P(Me))};static \u0275cmp=S({type:r,selectors:[["app-system-toggle"]],decls:16,vars:15,consts:[[1,"system-toggle-compact"],[1,"toggle-content"],[1,"toggle-info"],[1,"toggle-title"],[1,"toggle-subtitle"],[1,"toggle-switch-container"],[1,"compact-toggle"],["type","checkbox",3,"change","checked","disabled"],[1,"toggle-slider"],[1,"toggle-button"],[1,"bi"],[1,"status-indicator"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"bi","bi-exclamation-triangle"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),s(4,"System Accessibility"),o(),i(5,"p",4),s(6),o()(),i(7,"div",5)(8,"label",6)(9,"input",7),g("change",function(){return n.toggleSystem()}),o(),i(10,"span",8)(11,"span",9),d(12,"i",10),o()()(),i(13,"div",11),s(14),o()()(),_(15,Rn,3,1,"div",12),o()),e&2&&(a(6),h(n.getStatusText()),a(2),M("disabled",n.isLoading),a(),l("checked",n.isSystemOnline)("disabled",n.isLoading),a(),M("loading",n.isLoading),a(2),R(n.isLoading?"bi-arrow-repeat spin":n.isSystemOnline?"bi-check":"bi-x"),a(),M("online",n.isSystemOnline)("loading",n.isLoading),a(),C(" ",n.isLoading?"Updating...":n.isSystemOnline?"Online":"Offline"," "),a(),l("ngIf",n.errorMessage))},dependencies:[k,L,z],styles:[".system-toggle-compact[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:1rem 1.25rem;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000000d;transition:all .2s ease}.system-toggle-compact[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000014}.toggle-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.toggle-info[_ngcontent-%COMP%]{flex:1}.toggle-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#374151;margin:0 0 .25rem}.toggle-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;margin:0;line-height:1.3}.toggle-switch-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-shrink:0}.compact-toggle[_ngcontent-%COMP%]{position:relative;display:inline-block;width:48px;height:26px;cursor:pointer}.compact-toggle.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.compact-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.compact-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]{background:#10b981}.compact-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{transform:translate(22px);color:#059669}.compact-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled + .toggle-slider[_ngcontent-%COMP%]{cursor:not-allowed}.toggle-slider[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ef4444;border-radius:13px;transition:all .3s ease}.toggle-slider.loading[_ngcontent-%COMP%]{background:#f59e0b}.toggle-slider.loading[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{color:#d97706}.toggle-button[_ngcontent-%COMP%]{position:absolute;height:20px;width:20px;left:3px;top:3px;background:#fff;border-radius:50%;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px #0003;color:#dc2626}.toggle-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600}.toggle-button[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-indicator[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;padding:.25rem .5rem;border-radius:4px;transition:all .2s ease}.status-indicator.online[_ngcontent-%COMP%]{background:#10b9811a;color:#059669}.status-indicator[_ngcontent-%COMP%]:not(.online):not(.loading){background:#ef44441a;color:#dc2626}.status-indicator.loading[_ngcontent-%COMP%]{background:#f59e0b1a;color:#d97706}@media (max-width: 576px){.system-toggle-compact[_ngcontent-%COMP%]{padding:.875rem 1rem;margin-bottom:1rem}.toggle-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.toggle-switch-container[_ngcontent-%COMP%]{align-self:stretch;justify-content:space-between}.toggle-title[_ngcontent-%COMP%]{font-size:.85rem}.toggle-subtitle[_ngcontent-%COMP%]{font-size:.7rem}.status-indicator[_ngcontent-%COMP%]{font-size:.65rem}}@media (max-width: 480px){.toggle-content[_ngcontent-%COMP%], .toggle-switch-container[_ngcontent-%COMP%]{gap:.5rem}.compact-toggle[_ngcontent-%COMP%]{width:44px;height:24px}.toggle-button[_ngcontent-%COMP%]{height:18px;width:18px;left:3px;top:3px}.toggle-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.compact-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{transform:translate(20px)}}"]})};function Dn(r,t){if(r&1){let e=v();i(0,"button",32),g("click",function(){u(e);let c=p(2);return f(c.closeNotification())}),d(1,"i",33),o()}}function Fn(r,t){if(r&1&&(i(0,"div",34),d(1,"i",35),i(2,"span"),s(3),o()()),r&2){let e=p(2);a(3),h(e.errorMessage)}}function Vn(r,t){r&1&&(i(0,"div",36)(1,"div",37)(2,"span",38),s(3,"Processing..."),o()(),i(4,"span"),s(5,"Processing your request..."),o()())}function zn(r,t){if(r&1&&(i(0,"div",39)(1,"div",40)(2,"span",41),s(3),o(),i(4,"span",42),s(5),o()(),i(6,"span",43),s(7),o()()),r&2){let e=t.$implicit,n=p(2);a(3),h(e.itemName),a(2),C("\xD7",e.quantity,""),a(2),C("\u20B9",n.formatCurrency(e.price*e.quantity),"")}}function Bn(r,t){if(r&1&&(i(0,"div",11)(1,"h3"),d(2,"i",44),s(3," Special Instructions"),o(),i(4,"p",45),s(5),o()()),r&2){let e=p(2);a(5),h(e.currentOrder.additionalRemarks)}}function jn(r,t){if(r&1&&(i(0,"div",23)(1,"span"),s(2,"Tax (CGST + SGST):"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.currentOrder.taxAmount),"")}}function $n(r,t){if(r&1&&(i(0,"div",23)(1,"span"),s(2,"Delivery Fee:"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.currentOrder.deliveryFee),"")}}function Un(r,t){r&1&&(i(0,"span"),s(1,"Reject Order"),o())}function qn(r,t){r&1&&(i(0,"span"),s(1,"Processing..."),o())}function Gn(r,t){r&1&&(i(0,"span"),s(1,"Accept Order"),o())}function Hn(r,t){r&1&&(i(0,"span"),s(1,"Processing..."),o())}function Wn(r,t){if(r&1){let e=v();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),d(4,"i",5),o(),i(5,"div",6)(6,"h2"),s(7,"\u{1F354} New Order Received!"),o(),i(8,"p"),s(9),o()(),_(10,Dn,2,0,"button",7),o(),_(11,Fn,4,1,"div",8)(12,Vn,6,0,"div",9),i(13,"div",10)(14,"div",11)(15,"h3"),d(16,"i",12),s(17," Customer Details"),o(),i(18,"div",13)(19,"div",14)(20,"span",15),s(21,"Name:"),o(),i(22,"span",16),s(23),o()(),i(24,"div",14)(25,"span",15),s(26,"Phone:"),o(),i(27,"span",16),s(28),o()()()(),i(29,"div",11)(30,"h3"),d(31,"i",17),s(32," Journey Details"),o(),i(33,"div",13)(34,"div",14)(35,"span",15),s(36,"Bus:"),o(),i(37,"span",16),s(38),o()(),i(39,"div",14)(40,"span",15),s(41,"Route:"),o(),i(42,"span",16),s(43),o()(),i(44,"div",14)(45,"span",15),s(46,"Departure:"),o(),i(47,"span",16),s(48),o()()()(),i(49,"div",11)(50,"h3"),d(51,"i",18),s(52," Order Items"),o(),i(53,"div",19),_(54,zn,8,3,"div",20),o()(),_(55,Bn,6,1,"div",21),i(56,"div",22)(57,"div",23)(58,"span"),s(59,"Subtotal:"),o(),i(60,"span"),s(61),o()(),_(62,jn,5,1,"div",24)(63,$n,5,1,"div",24),i(64,"div",25)(65,"span"),s(66,"Total Amount:"),o(),i(67,"span"),s(68),o()()()(),i(69,"div",26)(70,"button",27),g("click",function(){u(e);let c=p();return f(c.rejectOrder())}),d(71,"i",28),_(72,Un,2,0,"span",29)(73,qn,2,0,"span",29),o(),i(74,"button",30),g("click",function(){u(e);let c=p();return f(c.acceptOrder())}),d(75,"i",31),_(76,Gn,2,0,"span",29)(77,Hn,2,0,"span",29),o()()()()}if(r&2){let e=p();a(9),C("Order #",e.currentOrder.orderId,""),a(),l("ngIf",!e.isProcessing),a(),l("ngIf",e.errorMessage),a(),l("ngIf",e.isProcessing),a(11),h(e.currentOrder.passengerName),a(5),h(e.currentOrder.passengerPhone),a(10),q("",e.currentOrder.busName," (",e.currentOrder.busNumber,")"),a(5),q("",e.currentOrder.startLocation," \u2192 ",e.currentOrder.endLocation,""),a(5),q("",e.currentOrder.departureDate," at ",e.currentOrder.departureTime,""),a(6),l("ngForOf",e.currentOrder.items),a(),l("ngIf",e.currentOrder.additionalRemarks),a(6),C("\u20B9",e.formatCurrency(e.currentOrder.subtotal),""),a(),l("ngIf",e.currentOrder.taxAmount>0),a(),l("ngIf",e.currentOrder.deliveryFee>0),a(5),C("\u20B9",e.formatCurrency(e.currentOrder.totalAmount),""),a(2),l("disabled",e.isProcessing),a(2),l("ngIf",!e.isProcessing),a(),l("ngIf",e.isProcessing),a(),l("disabled",e.isProcessing),a(2),l("ngIf",!e.isProcessing),a(),l("ngIf",e.isProcessing)}}var vt=class r{constructor(t,e){this.restaurantNotificationService=t;this.http=e;console.log("\u{1F7E2} OrderNotificationComponent constructor")}destroy$=new B;API_URL=`${D.apiBaseUrl}/OrderStatus`;currentOrder=null;showNotification=!1;isProcessing=!1;errorMessage=null;ngOnInit(){console.log("\u{1F7E2} OrderNotificationComponent ngOnInit"),this.restaurantNotificationService.newOrder$.pipe(w(this.destroy$)).subscribe(t=>{t&&(this.currentOrder=t,this.showNotification=!0,this.errorMessage=null,console.log("\u{1F4E6} New order received in component:",t))}),this.restaurantNotificationService.requestNotificationPermission()}ngOnDestroy(){console.log("\u{1F6D1} OrderNotificationComponent destroyed"),this.destroy$.next(),this.destroy$.complete()}acceptOrder(){this.currentOrder&&(console.log("\u2705 Accepting order:",this.currentOrder.orderId),this.showSuccessMessage(`Order #${this.currentOrder.orderId} from ${this.currentOrder.passengerName} accepted!`),setTimeout(()=>{this.closeNotification(),this.restaurantNotificationService.clearNewOrderNotification()},1500))}rejectOrder(){return V(this,null,function*(){if(!this.currentOrder||this.isProcessing)return;console.log("\u{1F7E1} Reject order initiated");let t=this.promptForReason("Reject Order","Please provide a reason for rejecting this order (minimum 10 characters):");if(!t){console.log("\u274C Rejection cancelled");return}if(t.length<10){this.errorMessage="Rejection reason must be at least 10 characters long",alert(this.errorMessage);return}this.isProcessing=!0,this.errorMessage=null,this.restaurantNotificationService.stopRinging();let e={bookingId:this.currentOrder.bookingId,status:"Rejected",rejectReason:t,additionalRemarks:`Order rejected at ${new Date().toLocaleTimeString()}`};try{console.log("\u{1F7E1} Sending reject request:",e);let n=yield this.http.put(`${this.API_URL}/update`,e).pipe(G(c=>(console.error("\u274C Error:",c),ge(this.handleError(c))))).toPromise();n&&n.success?(console.log("\u2705 Order rejected successfully"),this.showSuccessMessage(`Order #${this.currentOrder.orderId} rejected!`),setTimeout(()=>{this.closeNotification()},2e3)):this.errorMessage=n?.message||"Failed to reject order"}catch(n){console.error("\u274C Exception:",n),this.errorMessage="An error occurred while rejecting the order"}finally{this.isProcessing=!1}})}closeNotification(){console.log("\u{1F515} Closing notification"),this.restaurantNotificationService.stopRinging(),this.showNotification=!1,this.currentOrder=null,this.errorMessage=null,this.isProcessing=!1,this.restaurantNotificationService.clearNewOrderNotification()}handleError(t){let e="An error occurred";if(t.error instanceof ErrorEvent)e=`Error: ${t.error.message}`;else if(t.status===400&&t.error?.errors){let n=t.error.errors;e=Object.values(n).flat().join(", ")}else t.error?.message?e=t.error.message:e=`Server error ${t.status}`;return{success:!1,message:e,bookingId:"",newStatus:"",updatedAt:new Date().toISOString()}}showSuccessMessage(t){console.log("\u2705 Success:",t),alert(t)}promptForReason(t,e){let n=prompt(e);return n===null?null:n.trim()}formatCurrency(t){return"\u20B9"+t.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}hasDiscount(){return this.currentOrder?(this.currentOrder.discountAmount??0)>0:!1}hasTax(){return this.currentOrder?(this.currentOrder.taxAmount??0)>0:!1}hasDeliveryFee(){return this.currentOrder?(this.currentOrder.deliveryFee??0)>0:!1}static \u0275fac=function(e){return new(e||r)(P(_t),P(j))};static \u0275cmp=S({type:r,selectors:[["app-order-notification"]],decls:1,vars:1,consts:[["class","notification-overlay",4,"ngIf"],[1,"notification-overlay"],[1,"notification-modal"],[1,"notification-header"],[1,"header-icon"],[1,"bi","bi-bell-fill"],[1,"header-text"],["class","close-btn",3,"click",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","processing-banner",4,"ngIf"],[1,"notification-body"],[1,"section"],[1,"bi","bi-person"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"bi","bi-bus-front"],[1,"bi","bi-bag"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],["class","section",4,"ngIf"],[1,"section","amount-section"],[1,"amount-row"],["class","amount-row",4,"ngIf"],[1,"amount-row","total"],[1,"notification-footer"],["title","Reject this order with a reason",1,"reject-btn",3,"click","disabled"],[1,"bi","bi-x-circle"],[4,"ngIf"],["title","Accept and confirm this order",1,"accept-btn",3,"click","disabled"],[1,"bi","bi-check-circle"],[1,"close-btn",3,"click"],[1,"bi","bi-x"],[1,"error-banner"],[1,"bi","bi-exclamation-triangle-fill"],[1,"processing-banner"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],[1,"order-item"],[1,"item-info"],[1,"item-name"],[1,"item-qty"],[1,"item-price"],[1,"bi","bi-chat-text"],[1,"remarks"]],template:function(e,n){e&1&&_(0,Wn,78,24,"div",0),e&2&&l("ngIf",n.showNotification&&n.currentOrder)},dependencies:[k,N,L],styles:['.notification-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.notification-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #00000026;max-width:500px;width:100%;max-height:85vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 768px){.notification-modal[_ngcontent-%COMP%]{max-width:95%;max-height:90vh}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:scale(.95) translateY(-20px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}.notification-header[_ngcontent-%COMP%]{background:#2c3e50;color:#fff;padding:1rem 1.25rem;display:flex;align-items:center;gap:.75rem;position:relative;border-radius:12px 12px 0 0}.notification-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ffffff26;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0}.notification-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1}.notification-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;line-height:1.3}.notification-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.125rem 0 0;font-size:.8rem;opacity:.8}.notification-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;width:28px;height:28px;border:none;background:#ffffff1a;color:#fff;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.25rem;transition:background .2s}.notification-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#fff3}.notification-body[_ngcontent-%COMP%]{padding:1.25rem;overflow-y:auto;max-height:calc(85vh - 180px)}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#bbb}.section[_ngcontent-%COMP%]{margin-bottom:1.25rem}.section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#495057;margin:0 0 .75rem;display:flex;align-items:center;gap:.4rem;text-transform:uppercase;letter-spacing:.5px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}.info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid #f0f0f0}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.875rem;color:#212529;font-weight:500;text-align:right}.order-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.65rem .75rem;background:#f8f9fa;border-radius:6px;transition:background .15s}.order-item[_ngcontent-%COMP%]:hover{background:#e9ecef}.order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500;color:#212529;font-size:.875rem}.order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:.15rem .4rem;border-radius:4px;font-size:.75rem;font-weight:600}.order-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-weight:600;color:#28a745;font-size:.875rem}.remarks[_ngcontent-%COMP%]{padding:.75rem;background:#fff9e6;border-left:3px solid #ffc107;border-radius:4px;color:#856404;font-size:.8rem;line-height:1.5;margin:0}.amount-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:8px;margin-top:.5rem}.amount-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem 0;font-size:.875rem;color:#495057}.amount-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px dashed #dee2e6}.amount-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600}.amount-row.discount[_ngcontent-%COMP%]{color:#28a745}.amount-row.discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:700}.amount-row.total[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.75rem;border-top:2px solid #adb5bd!important;font-size:1rem;font-weight:700;color:#212529}.amount-row.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#28a745;font-size:1.125rem}.notification-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:.75rem}@media (max-width: 768px){.notification-footer[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}}.notification-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.65rem 1.25rem;border:none;border-radius:6px;font-size:.875rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.4rem;transition:all .15s ease;flex:1}.notification-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.notification-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.notification-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.notification-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}.notification-footer[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:1px solid #dc3545}.notification-footer[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#dc3545;color:#fff}.notification-footer[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.notification-footer[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#218838}.notification-modal.loading[_ngcontent-%COMP%]{pointer-events:none}.notification-modal.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #2c3e50;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@media (max-width: 768px){.notification-overlay[_ngcontent-%COMP%]{padding:.5rem}.notification-modal[_ngcontent-%COMP%]{max-height:92vh}.notification-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.notification-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:36px;height:36px;font-size:1.125rem}.notification-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}.notification-body[_ngcontent-%COMP%]{padding:1rem}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.75rem}.order-item[_ngcontent-%COMP%]{padding:.5rem .65rem}.order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%], .order-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:.8rem}}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #2c3e50;outline-offset:2px}@media (prefers-reduced-motion: reduce){.notification-overlay[_ngcontent-%COMP%], .notification-modal[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .order-item[_ngcontent-%COMP%]{animation:none;transition:none}}']})};function Yn(r,t){if(r&1){let e=v();i(0,"button",21),g("click",function(){u(e);let c=p();return f(c.reconnect())}),d(1,"i",22),o()}}function Qn(r,t){r&1&&(i(0,"div",23)(1,"div",24)(2,"span",25),s(3,"Loading..."),o()(),i(4,"p",26),s(5,"Loading dashboard data..."),o()())}function Kn(r,t){r&1&&(i(0,"div",57),s(1," Needs Action "),o())}function Jn(r,t){r&1&&(i(0,"div",58),s(1," All Clear "),o())}function Zn(r,t){r&1&&(i(0,"div",59),s(1," In Kitchen "),o())}function Xn(r,t){r&1&&(i(0,"div",60),s(1," Ready "),o())}function ei(r,t){r&1&&(i(0,"div",61),s(1," Done Today "),o())}function ti(r,t){if(r&1&&(i(0,"div",27)(1,"div",28)(2,"div",29),d(3,"i",30),o(),i(4,"div",31)(5,"div",32),s(6),o(),i(7,"div",33),s(8,"Today's Orders"),o(),i(9,"div",34),d(10,"i",35),s(11),o(),i(12,"div",36),s(13),o()()(),i(14,"div",37)(15,"div",29),d(16,"i",38),o(),i(17,"div",31)(18,"div",32),s(19),o(),i(20,"div",33),s(21,"Pending Bookings"),o(),_(22,Kn,2,0,"div",39)(23,Jn,2,0,"div",40),o()(),i(24,"div",41)(25,"div",29),d(26,"i",42),o(),i(27,"div",31)(28,"div",32),s(29),o(),i(30,"div",33),s(31,"Preparing"),o(),_(32,Zn,2,0,"div",43),o()(),i(33,"div",44)(34,"div",29),d(35,"i",45),o(),i(36,"div",31)(37,"div",32),s(38),o(),i(39,"div",33),s(40,"Ready to Deliver"),o(),_(41,Xn,2,0,"div",46),o()(),i(42,"div",47)(43,"div",29),d(44,"i",48),o(),i(45,"div",31)(46,"div",32),s(47),o(),i(48,"div",33),s(49,"Completed"),o(),_(50,ei,2,0,"div",49),o()(),i(51,"div",50)(52,"div",29),d(53,"i",51),o(),i(54,"div",31)(55,"div",32),s(56),o(),i(57,"div",33),s(58,"Today's Revenue"),o(),i(59,"div",34),d(60,"i",35),s(61),o(),i(62,"div",36),s(63),o()()(),i(64,"div",52)(65,"div",29),d(66,"i",53),o(),i(67,"div",31)(68,"div",32),s(69),o(),i(70,"div",33),s(71,"Active Passengers"),o(),i(72,"div",54),s(73,"Today & Yesterday"),o()()(),i(74,"div",55)(75,"div",29),d(76,"i",56),o(),i(77,"div",31)(78,"div",32),s(79),o(),i(80,"div",33),s(81,"Canceled/Rejected"),o(),i(82,"div",54),s(83,"Last 2 Days"),o()()()()),r&2){let e=p();a(6),h(e.stats.todaysOrders),a(3),M("positive",e.stats.todaysOrders>=e.stats.yesterdaysOrders)("negative",e.stats.todaysOrders<e.stats.yesterdaysOrders),a(),M("bi-arrow-up",e.stats.todaysOrders>=e.stats.yesterdaysOrders)("bi-arrow-down",e.stats.todaysOrders<e.stats.yesterdaysOrders),a(),C(" ",e.calculatePercentageChange(e.stats.todaysOrders,e.stats.yesterdaysOrders),"% "),a(2),C("Yesterday: ",e.stats.yesterdaysOrders,""),a(6),h(e.stats.pendingBookings),a(3),l("ngIf",e.stats.pendingBookings>0),a(),l("ngIf",e.stats.pendingBookings===0),a(6),h(e.stats.preparingBookings),a(3),l("ngIf",e.stats.preparingBookings>0),a(6),h(e.stats.readyToDeliverBookings),a(3),l("ngIf",e.stats.readyToDeliverBookings>0),a(6),h(e.stats.completedBookings),a(3),l("ngIf",e.stats.completedBookings>0),a(6),h(e.formatCurrency(e.stats.todaysRevenue)),a(3),M("positive",e.stats.todaysRevenue>=e.stats.yesterdaysRevenue)("negative",e.stats.todaysRevenue<e.stats.yesterdaysRevenue),a(),M("bi-arrow-up",e.stats.todaysRevenue>=e.stats.yesterdaysRevenue)("bi-arrow-down",e.stats.todaysRevenue<e.stats.yesterdaysRevenue),a(),C(" ",e.calculatePercentageChange(e.stats.todaysRevenue,e.stats.yesterdaysRevenue),"% "),a(2),C("Yesterday: ",e.formatCurrency(e.stats.yesterdaysRevenue),""),a(6),h(e.stats.totalPassengers),a(10),h(e.stats.canceledBookings)}}function ni(r,t){if(r&1&&(i(0,"div",62)(1,"div",63)(2,"h6",64),d(3,"i",65),s(4," Performance Summary "),o(),i(5,"div",66)(6,"div",67)(7,"span",68),s(8,"Total Revenue (2 days):"),o(),i(9,"span",69),s(10),o()(),i(11,"div",67)(12,"span",68),s(13,"Average Order Value:"),o(),i(14,"span",69),s(15),o()(),i(16,"div",67)(17,"span",68),s(18,"Order Completion Rate:"),o(),i(19,"span",69),s(20),o()()()()()),r&2){let e=p();a(10),h(e.formatCurrency(e.stats.totalRevenue)),a(5),C(" ",e.stats.todaysOrders>0?e.formatCurrency(e.stats.todaysRevenue/e.stats.todaysOrders):"\u20B90"," "),a(5),C(" ",e.stats.todaysOrders>0?(e.stats.completedBookings/e.stats.todaysOrders*100).toFixed(1):"0","% ")}}var Mt=class r{constructor(t,e,n,c){this.restaurantNotificationService=t;this.authService=e;this.dashboardService=n;this.adminLocationService=c}locationModal;destroy$=new B;isConnected=!1;connectionStatus="Initializing...";isLoadingStats=!1;isLoadingOrders=!1;stats={todaysOrders:0,yesterdaysOrders:0,pendingBookings:0,preparingBookings:0,readyToDeliverBookings:0,completedBookings:0,canceledBookings:0,todaysRevenue:0,yesterdaysRevenue:0,totalRevenue:0,activeRestaurants:1,totalPassengers:0};recentOrders=[];ngOnInit(){return V(this,null,function*(){console.log("\u{1F680} Dashboard initializing..."),this.loadDashboardData(),this.initializeRealTimeUpdates();let t=this.authService.getTenantId();if(t)try{yield this.adminLocationService.joinRestaurantLocationGroup(t),console.log("\u2705 Joined location tracking group")}catch(e){console.error("\u274C Error joining location group:",e)}})}ngOnDestroy(){console.log("\u{1F6D1} Dashboard destroying...");let t=this.authService.getTenantId();t&&(this.restaurantNotificationService.leaveRestaurantGroup(t),this.adminLocationService.leaveRestaurantLocationGroup(t)),this.destroy$.next(),this.destroy$.complete()}onOrderUpdated(t){console.log("\u2705 Order updated:",t.id),this.loadDashboardData()}initializeRealTimeUpdates(){return V(this,null,function*(){let t=this.authService.getTenantId();if(!t){console.error("\u274C No tenantId");return}try{console.log("\u{1F7E1} Initializing real-time updates..."),yield this.restaurantNotificationService.startConnection(),yield new Promise(e=>setTimeout(e,1e3)),yield this.restaurantNotificationService.joinRestaurantGroup(t),this.restaurantNotificationService.getConnectionState().pipe(w(this.destroy$)).subscribe(e=>{this.isConnected=e,this.connectionStatus=e?"Connected":"Disconnected",console.log("\u{1F4E1} Connection:",e?"\u{1F7E2}":"\u{1F534}")}),this.restaurantNotificationService.getOrderStatusUpdates().pipe(w(this.destroy$)).subscribe(e=>{e&&this.handleOrderStatusUpdate(e)})}catch(e){console.error("\u274C Error:",e)}})}handleOrderStatusUpdate(t){this.updateStatsFromOrderUpdate(t),this.updateOrderInList(t),console.log("\u2705 Order updated in real-time:",t.orderId)}updateStatsFromOrderUpdate(t){switch(t.status.toLowerCase()){case"confirmed":this.stats.pendingBookings=Math.max(0,this.stats.pendingBookings-1);break;case"preparing":this.stats.preparingBookings++;break;case"ready":this.stats.preparingBookings=Math.max(0,this.stats.preparingBookings-1),this.stats.readyToDeliverBookings++;break;case"completed":this.stats.readyToDeliverBookings=Math.max(0,this.stats.readyToDeliverBookings-1),this.stats.completedBookings++;break;case"canceled":this.stats.canceledBookings++,this.stats.pendingBookings=Math.max(0,this.stats.pendingBookings-1),this.stats.preparingBookings=Math.max(0,this.stats.preparingBookings-1);break;case"rejected":this.stats.canceledBookings++,this.stats.pendingBookings=Math.max(0,this.stats.pendingBookings-1);break}}updateOrderInList(t){let e=this.recentOrders.findIndex(n=>n.id===t.orderId);e!==-1&&(this.recentOrders[e].status=this.normalizeStatus(t.status),this.recentOrders[e].time=this.formatTime(t.updatedAt),this.recentOrders[e].isUpdating=!1,this.recentOrders[e].showDropdown=!1)}loadDashboardData(){let t=this.authService.getTenantId();t&&(this.loadStats(t),this.loadRecentOrders(t))}loadStats(t){this.isLoadingStats=!0,this.dashboardService.getDashboardStats(t).pipe(w(this.destroy$)).subscribe({next:e=>{this.stats=e,this.isLoadingStats=!1},error:()=>{this.isLoadingStats=!1}})}loadRecentOrders(t){this.isLoadingOrders=!0;let e={tenantId:t,pageNumber:1,pageSize:10,sortBy:"CreatedAt",sortOrder:"desc"};this.dashboardService.getOrders(e).pipe(w(this.destroy$)).subscribe({next:n=>{this.recentOrders=n.items.map(c=>this.mapToRecentOrder(c)),this.isLoadingOrders=!1},error:()=>{this.isLoadingOrders=!1}})}mapToRecentOrder(t){return{id:t.bookNumber,passengerName:t.passengerName,busNumber:t.busNumber,restaurant:"Your Restaurant",items:t.bookingItems?.length||0,amount:t.totalAmount,status:this.normalizeStatus(t.bookingStatus),time:this.formatTime(t.createdAt),bookingId:t.bookingId,isUpdating:!1,showDropdown:!1,fullDetails:{busName:t.busName,startLocationName:t.startLocationName,endLocationName:t.endLocationName,departureDate:t.departureDate,departureTime:t.departureTime,passengerPhone:t.passengerPhone,passengerEmail:t.passengerEmail,bookingStatus:t.bookingStatus,totalAmount:t.totalAmount,originalAmount:t.originalAmount,discountAmount:t.discountAmount,subtotal:t.subtotal,cgst:t.cgst,sgst:t.sgst,taxAmount:t.taxAmount,deliveryFee:t.deliveryFee,paymentStatus:t.paymentStatus,promoCode:t.promoCode,createdAt:t.createdAt,updatedAt:t.updatedAt,orderConfirmedAt:t.orderConfirmedAt,preparingStartedAt:t.preparingStartedAt,readyAt:t.readyAt,completedAt:t.completedAt,canceledAt:t.canceledAt,rejectedAt:t.rejectedAt,cancelReason:t.cancelReason,rejectReason:t.rejectReason,additionalRemarks:t.additionalRemarks,pickupLocationAddress:t.pickupLocationAddress,pickupLocationLatitude:t.pickupLocationLatitude,pickupLocationLongitude:t.pickupLocationLongitude,bookingItems:t.bookingItems,canceledItems:t.canceledItems}}}normalizeStatus(t){let e=t.toLowerCase();return e==="delivered"||e==="completed"?"completed":e==="ready"?"ready":e==="preparing"?"preparing":e==="confirmed"?"confirmed":e==="canceled"?"canceled":e==="rejected"?"rejected":"pending"}formatCurrency(t){return"\u20B9"+t.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}calculatePercentageChange(t,e){if(e===0)return t>0?"+100":"0";let n=(t-e)/e*100;return n>0?`+${n.toFixed(1)}`:n.toFixed(1)}formatTime(t){try{return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Just now"}}reconnect(){this.connectionStatus="Reconnecting...",this.restaurantNotificationService.stopConnection(),setTimeout(()=>{this.initializeRealTimeUpdates()},1e3)}exportReport(){let t={generatedAt:new Date().toISOString(),stats:this.stats,orders:this.recentOrders},e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),c=window.URL.createObjectURL(n),m=document.createElement("a");m.href=c,m.download=`dashboard-${new Date().getTime()}.json`,m.click(),window.URL.revokeObjectURL(c)}refreshDashboard(){this.authService.getTenantId()&&this.loadDashboardData()}viewLocation(t){let e=this.authService.getTenantId();!e||!t.bookingId||(this.locationModal.bookingId=t.bookingId,this.locationModal.orderId=t.id,this.locationModal.tenantId=e,this.locationModal.show())}canViewLocation(t){return["confirmed","preparing","ready"].includes(t.status.toLowerCase())}static \u0275fac=function(e){return new(e||r)(P(_t),P(Me),P(un),P(gn))};static \u0275cmp=S({type:r,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(e&1&&Ne(Gt,5),e&2){let c;De(c=Fe())&&(n.locationModal=c.first)}},decls:29,vars:27,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-content"],[1,"dashboard-title"],[1,"bi","bi-speedometer2","me-2"],[1,"dashboard-subtitle"],[1,"header-actions"],[1,"connection-status"],[1,"status-dot"],[1,"bi","me-1"],[1,"connection-text"],["class","btn-reconnect","title","Reconnect",3,"click",4,"ngIf"],["title","Refresh Dashboard",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click","disabled"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-download","me-1"],["class","loading-overlay",4,"ngIf"],["class","stats-grid",4,"ngIf"],[1,"content-grid"],[3,"orderUpdated","viewLocation","orders","isLoading","pendingCount","showLocationButton"],["class","summary-section",4,"ngIf"],["title","Reconnect",1,"btn-reconnect",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"stats-grid"],[1,"stat-card","stat-orders"],[1,"stat-icon"],[1,"bi","bi-bag-check"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-change"],[1,"bi"],[1,"stat-comparison"],[1,"stat-card","stat-pending"],[1,"bi","bi-hourglass-split"],["class","stat-badge badge-pending",4,"ngIf"],["class","stat-badge badge-success",4,"ngIf"],[1,"stat-card","stat-preparing"],[1,"bi","bi-fire"],["class","stat-badge badge-preparing",4,"ngIf"],[1,"stat-card","stat-ready"],[1,"bi","bi-box-seam"],["class","stat-badge badge-ready",4,"ngIf"],[1,"stat-card","stat-completed"],[1,"bi","bi-check-circle"],["class","stat-badge badge-completed",4,"ngIf"],[1,"stat-card","stat-revenue"],[1,"bi","bi-currency-rupee"],[1,"stat-card","stat-passengers"],[1,"bi","bi-people"],[1,"stat-info"],[1,"stat-card","stat-canceled"],[1,"bi","bi-x-circle"],[1,"stat-badge","badge-pending"],[1,"stat-badge","badge-success"],[1,"stat-badge","badge-preparing"],[1,"stat-badge","badge-ready"],[1,"stat-badge","badge-completed"],[1,"summary-section"],[1,"summary-card"],[1,"summary-title"],[1,"bi","bi-graph-up","me-2"],[1,"summary-content"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"]],template:function(e,n){e&1&&(i(0,"div",0),d(1,"app-system-toggle")(2,"app-order-notification"),i(3,"div",1)(4,"div",2)(5,"h4",3),d(6,"i",4),s(7," Dashboard Overview "),o(),i(8,"p",5),s(9,"Monitor your bus dining platform performance"),o()(),i(10,"div",6)(11,"div",7),d(12,"span",8)(13,"i",9),i(14,"span",10),s(15),o(),_(16,Yn,2,0,"button",11),o(),i(17,"button",12),g("click",function(){return n.refreshDashboard()}),d(18,"i",13),s(19," Refresh "),o(),i(20,"button",14),g("click",function(){return n.exportReport()}),d(21,"i",15),s(22," Export Report "),o()()(),_(23,Qn,6,0,"div",16)(24,ti,84,33,"div",17),i(25,"div",18)(26,"app-recent-orders",19),g("orderUpdated",function(m){return n.onOrderUpdated(m)})("viewLocation",function(m){return n.viewLocation(m)}),o()(),d(27,"app-user-location-modal"),_(28,ni,21,3,"div",20),o()),e&2&&(a(11),M("connected",n.isConnected)("disconnected",!n.isConnected),Kt("title",n.connectionStatus),a(),M("status-dot-connected",n.isConnected)("status-dot-disconnected",!n.isConnected)("pulse",n.isConnected),a(),M("bi-wifi",n.isConnected)("bi-wifi-off",!n.isConnected),a(2),h(n.connectionStatus),a(),l("ngIf",!n.isConnected),a(),l("disabled",n.isLoadingStats),a(),M("spin",n.isLoadingStats),a(5),l("ngIf",n.isLoadingStats&&n.stats.todaysOrders===0),a(),l("ngIf",!n.isLoadingStats||n.stats.todaysOrders>0),a(2),l("orders",n.recentOrders)("isLoading",n.isLoadingOrders)("pendingCount",n.stats.pendingBookings)("showLocationButton",!0),a(2),l("ngIf",n.stats.todaysOrders>0))},dependencies:[k,L,z,ht,vt,pn,Gt],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;gap:20px}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin:0}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:5px 0 0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:20px;background-color:#fff;border:1px solid #ddd;font-size:13px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{background-color:#e8f5e9;border-color:#4caf50;color:#2e7d32}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#4caf50}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]   .status-dot.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]{background-color:#ffebee;border-color:#f44336;color:#c62828}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#f44336}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .btn-reconnect[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;margin-left:8px;opacity:.7}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .btn-reconnect[_ngcontent-%COMP%]:hover{opacity:1}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background:#fff;border-radius:8px;margin-bottom:30px}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666;font-size:14px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;margin-bottom:30px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;gap:12px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:24px;display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:8px;background-color:#f5f5f5}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#333}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:4px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-change[_ngcontent-%COMP%]{font-size:11px;margin-top:5px;display:flex;align-items:center;gap:3px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-change.positive[_ngcontent-%COMP%]{color:#4caf50}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-change.negative[_ngcontent-%COMP%]{color:#f44336}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-comparison[_ngcontent-%COMP%]{font-size:11px;color:#999;margin-top:3px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:10px;font-size:10px;font-weight:600;margin-top:5px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge.badge-pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge.badge-success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge.badge-preparing[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge.badge-ready[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-badge.badge-completed[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#6a1b9a}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{font-size:11px;color:#999;margin-top:5px}.content-grid[_ngcontent-%COMP%]{margin-bottom:30px}.summary-section[_ngcontent-%COMP%]{margin-bottom:20px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0 0 15px;color:#333}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background-color:#f9f9f9;border-radius:4px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ii(r,t){r&1&&(i(0,"span",21),s(1,"RouteEat"),o())}function oi(r,t){if(r&1){let e=v();qe(0),i(1,"a",24),g("click",function(){u(e);let c=p(2);return f(c.onCloseSidebar())}),d(2,"i",25),i(3,"span",26),s(4),o()(),Ge()}if(r&2){let e=p().$implicit,n=p();a(),l("routerLink",e.path)("title",n.isCollapsed?e.title:""),a(),R(e.icon),a(2),h(e.label)}}function ri(r,t){if(r&1){let e=v();i(0,"li",32)(1,"a",33),g("click",function(){u(e);let c=p(3);return f(c.onCloseSidebar())}),d(2,"i",34),i(3,"span",35),s(4),o()()()}if(r&2){let e=t.$implicit;a(),l("routerLink",e.path)("title",e.title),a(),R(e.icon),a(2),h(e.label)}}function ai(r,t){if(r&1){let e=v();qe(0),i(1,"div",27),g("click",function(c){u(e);let m=p().$implicit,b=p();return f(b.toggleSubmenu(m,c))}),i(2,"div",28),d(3,"i",25),i(4,"span",26),s(5),o()(),d(6,"i",29),o(),i(7,"ul",30),_(8,ri,5,5,"li",31),o(),Ge()}if(r&2){let e=p().$implicit,n=p();a(),M("expanded",e.expanded)("has-active-child",n.isParentActive(e)),l("title",n.isCollapsed?e.title:""),a(2),R(e.icon),a(2),h(e.label),a(),M("rotated",e.expanded),a(),M("show",e.expanded)("mobile-show",e.expanded),a(),l("ngForOf",e.children)}}function si(r,t){if(r&1&&(i(0,"li",22),_(1,oi,5,5,"ng-container",23)(2,ai,9,15,"ng-container",23),o()),r&2){let e=t.$implicit;a(),l("ngIf",!e.children),a(),l("ngIf",e.children)}}function ci(r,t){if(r&1&&(i(0,"div",36)(1,"div",37),s(2),o(),i(3,"div",38),s(4,"Administrator"),o()()),r&2){let e=p();a(2),h((e.userData==null?null:e.userData.username)||"Admin")}}var Ot=class r{constructor(t){this.router=t}isCollapsed=!1;userData;toggleSidebar=new Ie;logoutEvent=new Ie;onToggleSidebar(){this.toggleSidebar.emit()}onCloseSidebar(){window.innerWidth<992&&this.toggleSidebar.emit()}onLogout(){this.logoutEvent.emit()}toggleSubmenu(t,e){e.preventDefault(),e.stopPropagation(),t.children&&(this.menuItems.forEach(n=>{n!==t&&n.children&&(n.expanded=!1)}),t.expanded=!t.expanded,this.isCollapsed&&t.expanded&&window.innerWidth>=992&&this.onToggleSidebar())}isParentActive(t){return t.children?t.children.some(e=>e.path&&this.router.url.includes(e.path)):!1}ngOnInit(){this.menuItems.forEach(t=>{t.children&&this.isParentActive(t)&&(t.expanded=!0)})}menuItems=[{path:"/admin/dashboard",icon:"bi-speedometer2",label:"Dashboard",title:"Dashboard Overview"},{path:"/admin/users",icon:"bi-people",label:"Users",title:"User Management"},{icon:"bi-menu-button-wide",label:"Menu",title:"Menu Management",expanded:!1,children:[{path:"/admin/menu/categories",icon:"bi-collection",label:"Menu Category",title:"Manage Menu Categories"},{path:"/admin/menu/subcategories",icon:"bi-diagram-3",label:"Sub Category",title:"Manage Sub Categories"},{path:"/admin/menu/items",icon:"bi-card-list",label:"Menu Items",title:"Manage Menu Items"}]},{icon:"bi-bag-check",label:"Order Management",title:"Order Management",expanded:!1,children:[{path:"/admin/orders/all",icon:"bi-list-ul",label:"All Orders",title:"View All Orders"},{path:"/admin/orders/pending",icon:"bi-clock",label:"Pending",title:"Pending Orders"},{path:"/admin/orders/confirmed",icon:"bi-check-circle",label:"Confirmed",title:"Confirmed Orders"},{path:"/admin/orders/preparing",icon:"bi-fire",label:"Preparing",title:"Preparing Orders"},{path:"/admin/orders/ready",icon:"bi-box-seam",label:"Ready",title:"Ready for Delivery"},{path:"/admin/orders/completed",icon:"bi-check2-all",label:"Completed",title:"Completed Orders"},{path:"/admin/orders/canceled",icon:"bi-x-circle",label:"Canceled",title:"Canceled Orders"},{path:"/admin/orders/rejected",icon:"bi-x-octagon",label:"Rejected",title:"Rejected Orders"}]},{icon:"bi-gear",label:"Settings",title:"System Settings",expanded:!1,children:[{path:"/admin/settings/change-password",icon:"bi-key",label:"Change Password",title:"Change Password"},{path:"/admin/settings/restaurant-info",icon:"bi-shop",label:"Restaurant Info",title:"Restaurant Information"},{path:"/admin/settings/location-master",icon:"bi-geo-alt",label:"Location Master",title:"Location Master"},{path:"/admin/settings/route-master",icon:"bi-signpost",label:"Route Master",title:"Route Master"}]}];static \u0275fac=function(e){return new(e||r)(P(Q))};static \u0275cmp=S({type:r,selectors:[["app-sidebar"]],inputs:{isCollapsed:"isCollapsed",userData:"userData"},outputs:{toggleSidebar:"toggleSidebar",logoutEvent:"logoutEvent"},decls:22,vars:12,consts:[[1,"sidebar"],[1,"sidebar-content"],[1,"sidebar-header"],[1,"brand-container"],[1,"brand-icon"],[1,"bi","bi-bus-front"],["class","brand-text",4,"ngIf"],[1,"sidebar-toggle","d-none","d-lg-flex",3,"click"],[1,"bi","bi-chevron-left","toggle-icon"],[1,"mobile-close-btn","d-lg-none",3,"click"],[1,"bi","bi-x-lg"],[1,"sidebar-nav"],[1,"nav-list"],["class","nav-item",4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"user-profile",3,"title"],[1,"user-avatar"],["class","user-info",4,"ngIf"],[1,"logout-btn",3,"click","title"],[1,"bi","bi-box-arrow-right"],[1,"mobile-overlay","d-lg-none",3,"click"],[1,"brand-text"],[1,"nav-item"],[4,"ngIf"],["routerLinkActive","active",1,"nav-link",3,"click","routerLink","title"],[1,"nav-icon"],[1,"nav-text"],[1,"nav-link","nav-toggle",3,"click","title"],[1,"nav-link-content"],[1,"bi","bi-chevron-down","submenu-arrow"],[1,"submenu"],["class","submenu-item",4,"ngFor","ngForOf"],[1,"submenu-item"],["routerLinkActive","active",1,"submenu-link",3,"click","routerLink","title"],[1,"submenu-icon"],[1,"submenu-text"],[1,"user-info"],[1,"user-name"],[1,"user-role"]],template:function(e,n){if(e&1&&(i(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"i",5),o(),_(6,ii,2,0,"span",6),o(),i(7,"button",7),g("click",function(){return n.onToggleSidebar()}),d(8,"i",8),o(),i(9,"button",9),g("click",function(){return n.onCloseSidebar()}),d(10,"i",10),o()(),i(11,"div",11)(12,"ul",12),_(13,si,3,2,"li",13),o()(),i(14,"div",14)(15,"div",15)(16,"div",16),s(17),o(),_(18,ci,5,1,"div",17),i(19,"button",18),g("click",function(){return n.onLogout()}),d(20,"i",19),o()()()()(),i(21,"div",20),g("click",function(){return n.onCloseSidebar()}),o()),e&2){let c;M("collapsed",n.isCollapsed),a(6),l("ngIf",!n.isCollapsed),a(2),M("rotated",n.isCollapsed),a(5),l("ngForOf",n.menuItems),a(2),l("title",n.isCollapsed?n.userData==null?null:n.userData.username:""),a(2),h((n.userData==null||n.userData.username==null||(c=n.userData.username.charAt(0))==null?null:c.toUpperCase())||"A"),a(),l("ngIf",!n.isCollapsed),a(),l("title",n.isCollapsed?"Logout":""),a(2),M("show",n.isCollapsed)}},dependencies:[k,N,L,on,rn],styles:['.sidebar[_ngcontent-%COMP%]{width:260px;background:linear-gradient(180deg,#fff,#f8fafc);border-right:1px solid #e2e8f0;box-shadow:2px 0 10px #0000000d;transition:all .3s cubic-bezier(.4,0,.2,1);position:fixed;top:0;left:0;height:100vh;z-index:1000;overflow:hidden}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu-arrow[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.sidebar.collapsed[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{right:-14px}.sidebar-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;padding:0;position:relative}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid #e2e8f0;position:relative;min-height:70px;flex-shrink:0;z-index:10}.brand-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.brand-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:8px;color:#fff;flex-shrink:0}.brand-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.brand-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#1a202c;white-space:nowrap;transition:all .3s ease}.sidebar-toggle[_ngcontent-%COMP%]{width:28px;height:28px;background:#f7fafc;border:1px solid #e2e8f0;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;position:absolute;right:5px;top:50%;transform:translateY(-50%);z-index:9999}.sidebar-toggle[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.toggle-icon[_ngcontent-%COMP%]{font-size:.875rem;color:#4a5568;transition:transform .3s ease}.toggle-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.mobile-close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#f7fafc;border:1px solid #e2e8f0;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#4a5568;z-index:11}.mobile-close-btn[_ngcontent-%COMP%]:hover{background:#fed7d7;border-color:#feb2b2;color:#e53e3e}.mobile-close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1rem 0;overflow-y:auto;overflow-x:hidden;min-height:0}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:2px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}.nav-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.nav-item[_ngcontent-%COMP%]{margin:.125rem 0}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:.75rem 1.25rem;color:#4a5568;text-decoration:none;font-size:.8rem;font-weight:500;transition:all .2s ease;position:relative;border:none;background:none;width:100%;cursor:pointer}.nav-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgba(102,126,234,.08) 0%,transparent 100%);color:#667eea;transform:translate(2px)}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(102,126,234,.12) 0%,transparent 100%);color:#667eea;font-weight:600;border-right:3px solid #667eea}.nav-link.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:linear-gradient(180deg,#667eea,#764ba2)}.nav-link.nav-toggle[_ngcontent-%COMP%]{justify-content:space-between}.nav-link.nav-toggle[_ngcontent-%COMP%]   .nav-link-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;flex:1}.nav-link.nav-toggle.expanded[_ngcontent-%COMP%], .nav-link.nav-toggle.has-active-child[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(102,126,234,.08) 0%,transparent 100%);color:#667eea}.nav-link.nav-toggle.has-active-child[_ngcontent-%COMP%]{font-weight:600;border-right:3px solid #667eea}.nav-link.nav-toggle.has-active-child[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:linear-gradient(180deg,#667eea,#764ba2)}.nav-icon[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.875rem;flex-shrink:0}.nav-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;transition:all .3s ease}.submenu-arrow[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .3s ease;flex-shrink:0}.submenu-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.submenu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;background:#f8fafccc;border-left:2px solid #e2e8f0;margin-left:1.25rem;max-height:0;overflow:hidden;transition:all .3s ease}.submenu.show[_ngcontent-%COMP%], .submenu.mobile-show[_ngcontent-%COMP%]{max-height:300px;padding:.25rem 0}.submenu-item[_ngcontent-%COMP%]{margin:0}.submenu-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.625rem 1rem;color:#6b7280;text-decoration:none;font-size:.75rem;font-weight:500;transition:all .2s ease;position:relative}.submenu-link[_ngcontent-%COMP%]:hover{background:#667eea0f;color:#667eea;transform:translate(2px)}.submenu-link.active[_ngcontent-%COMP%]{background:#667eea1a;color:#667eea;font-weight:600}.submenu-link.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background:#667eea}.submenu-icon[_ngcontent-%COMP%]{width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:.75rem;flex-shrink:0}.submenu-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;transition:all .3s ease}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-top:1px solid #e2e8f0;background:#f7fafc;flex-shrink:0;position:relative;z-index:10;margin-top:auto}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;position:relative}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem;font-weight:600;flex-shrink:0}.user-info[_ngcontent-%COMP%]{flex:1;min-width:0;transition:all .3s ease}.user-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#2d3748;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role[_ngcontent-%COMP%]{font-size:.7rem;color:#718096}.logout-btn[_ngcontent-%COMP%]{width:28px;height:28px;background:none;border:1px solid #e2e8f0;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.875rem;color:#e53e3e;transition:all .2s ease;flex-shrink:0;position:relative;z-index:11}.logout-btn[_ngcontent-%COMP%]:hover{background:#fed7d7;border-color:#feb2b2}.mobile-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:all .3s ease}.mobile-overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 991.98px){.sidebar[_ngcontent-%COMP%]{left:-260px;width:260px!important}.sidebar.collapsed[_ngcontent-%COMP%]{left:0;width:260px!important}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu-arrow[_ngcontent-%COMP%]{opacity:1!important;visibility:visible!important}.sidebar.collapsed[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:block!important}.sidebar.collapsed[_ngcontent-%COMP%]   .submenu.show[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .submenu.mobile-show[_ngcontent-%COMP%]{max-height:300px;padding:.25rem 0}.sidebar-toggle[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 767.98px){.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:.85rem;padding:.875rem 1.25rem}.sidebar[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]{font-size:.8rem;padding:.75rem 1rem}.sidebar[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]{font-size:.95rem}.sidebar[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.85rem}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.nav-text[_ngcontent-%COMP%], .submenu-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease}@media (max-width: 991.98px){.nav-link[_ngcontent-%COMP%], .submenu-link[_ngcontent-%COMP%]{min-height:44px;touch-action:manipulation}.nav-toggle[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}}']})};function li(r,t){if(r&1&&(i(0,"span",18),s(1),o()),r&2){let e=p();a(),C(" ",e.getUnreadCount()," ")}}function di(r,t){if(r&1){let e=v();i(0,"button",19),g("click",function(){u(e);let c=p();return f(c.markAllAsRead())}),d(1,"i",20),s(2," Mark all read "),o()}}function mi(r,t){r&1&&(i(0,"div",29),d(1,"div",30),o())}function pi(r,t){if(r&1){let e=v();i(0,"div",21),g("click",function(){let c=u(e).$implicit,m=p();return f(m.markAsRead(c))}),i(1,"div",22),d(2,"i"),o(),i(3,"div",23)(4,"div",24),s(5),o(),i(6,"div",25),s(7),o(),i(8,"div",26),d(9,"i",27),s(10),o()(),_(11,mi,2,0,"div",28),o()}if(r&2){let e=t.$implicit,n=p();M("unread",!e.read),a(2),R(n.getIconClass(e.type)),a(3),h(e.title),a(2),h(e.message),a(3),C(" ",e.time," "),a(),l("ngIf",!e.read)}}function gi(r,t){r&1&&(i(0,"div",31)(1,"div",32),d(2,"i",33),i(3,"p",5),s(4,"No notifications"),o()()())}var Pt=class r{isOpen=!1;closePanel=new Ie;notifications=[{id:1,title:"New booking confirmed",message:"Bus #BUS001 - Mumbai to Pune",type:"success",time:"2 minutes ago",read:!1},{id:2,title:"Maintenance reminder",message:"Bus #BUS003 service due tomorrow",type:"warning",time:"1 hour ago",read:!1},{id:3,title:"New user registered",message:"John Doe joined the platform",type:"info",time:"3 hours ago",read:!0},{id:4,title:"Payment received",message:"\u20B92,500 received for booking #BK001",type:"success",time:"5 hours ago",read:!0},{id:5,title:"System alert",message:"High server load detected",type:"error",time:"1 day ago",read:!0}];ngOnInit(){this.isOpen&&setTimeout(()=>{document.addEventListener("click",this.onDocumentClick.bind(this))})}onDocumentClick(t){t.target.closest(".notification-panel")||this.onClose()}onClose(){this.closePanel.emit(),document.removeEventListener("click",this.onDocumentClick.bind(this))}markAsRead(t){t.read=!0}markAllAsRead(){this.notifications.forEach(t=>{t.read=!0})}getUnreadCount(){return this.notifications.filter(t=>!t.read).length}getIconClass(t){switch(t){case"success":return"bi-check-circle-fill text-success";case"warning":return"bi-exclamation-triangle-fill text-warning";case"info":return"bi-info-circle-fill text-info";case"error":return"bi-x-circle-fill text-danger";default:return"bi-bell-fill text-primary"}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-notification-panel"]],inputs:{isOpen:"isOpen"},outputs:{closePanel:"closePanel"},decls:20,vars:6,consts:[[1,"notification-panel"],[1,"notification-overlay",3,"click"],[1,"notification-content"],[1,"notification-header"],[1,"header-left"],[1,"mb-0"],[1,"bi","bi-bell","me-2"],["class","badge bg-primary ms-2",4,"ngIf"],[1,"header-actions"],["class","btn btn-sm btn-outline-secondary me-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bi","bi-x-lg"],[1,"notification-body"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf"],["class","notification-item",4,"ngIf"],[1,"notification-footer"],[1,"btn","btn-sm","btn-primary","w-100"],[1,"bi","bi-arrow-right","me-2"],[1,"badge","bg-primary","ms-2"],[1,"btn","btn-sm","btn-outline-secondary","me-2",3,"click"],[1,"bi","bi-check2-all"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"notification-content-text"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],[1,"bi","bi-clock","me-1"],["class","notification-status",4,"ngIf"],[1,"notification-status"],[1,"unread-dot"],[1,"notification-item"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-bell-slash","fs-1","mb-2"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),g("click",function(){return n.onClose()}),o(),i(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),d(6,"i",6),s(7," Notifications "),o(),_(8,li,2,1,"span",7),o(),i(9,"div",8),_(10,di,3,0,"button",9),i(11,"button",10),g("click",function(){return n.onClose()}),d(12,"i",11),o()()(),i(13,"div",12),_(14,pi,12,8,"div",13)(15,gi,5,0,"div",14),o(),i(16,"div",15)(17,"button",16),d(18,"i",17),s(19," View all notifications "),o()()()()),e&2&&(M("open",n.isOpen),a(8),l("ngIf",n.getUnreadCount()>0),a(2),l("ngIf",n.getUnreadCount()>0),a(4),l("ngForOf",n.notifications),a(),l("ngIf",n.notifications.length===0))},dependencies:[k,N,L],styles:[".notification-panel[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1050;pointer-events:none;opacity:0;visibility:hidden;transition:all .3s ease}.notification-panel.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:all}.notification-panel.open[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{transform:translate(0)}.notification-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.notification-content[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:380px;height:100vh;background:#fff;box-shadow:-4px 0 20px #00000026;transform:translate(100%);transition:transform .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column}.notification-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem;border-bottom:1px solid #e2e8f0;background:#f8fafc}.notification-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center}.notification-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2d3748;font-weight:600;font-size:1rem}.notification-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.notification-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.75rem;padding:.375rem .75rem;border-radius:6px}.notification-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.notification-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.notification-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:2px}.notification-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.875rem;padding:1rem 1.25rem;border-bottom:1px solid #f1f5f9;cursor:pointer;transition:all .2s ease;position:relative}.notification-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.notification-item.unread[_ngcontent-%COMP%]{background:#3b82f605;border-left:3px solid #3b82f6}.notification-item.unread[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#f8fafc;border-radius:50%;flex-shrink:0}.notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.notification-content-text[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-title[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#2d3748;margin-bottom:.25rem;line-height:1.4}.notification-message[_ngcontent-%COMP%]{font-size:.8rem;color:#4a5568;margin-bottom:.375rem;line-height:1.4}.notification-time[_ngcontent-%COMP%]{font-size:.7rem;color:#718096;display:flex;align-items:center}.notification-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.65rem}.notification-status[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding-top:.25rem}.unread-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#3b82f6;border-radius:50%}.notification-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-top:1px solid #e2e8f0;background:#f8fafc}.notification-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}@media (max-width: 576px){.notification-content[_ngcontent-%COMP%]{width:100vw;right:0}.notification-header[_ngcontent-%COMP%]{padding:1rem}.notification-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.notification-item[_ngcontent-%COMP%], .notification-footer[_ngcontent-%COMP%]{padding:.875rem 1rem}}"]})};var xt=class r{isOpen=!1;userData;closePopup=new Ie;logoutEvent=new Ie;onClose(){this.closePopup.emit()}onLogout(){this.logoutEvent.emit()}onViewProfile(){console.log("Navigate to profile"),this.onClose()}onSettings(){console.log("Navigate to settings"),this.onClose()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-profile-popup"]],inputs:{isOpen:"isOpen",userData:"userData"},outputs:{closePopup:"closePopup",logoutEvent:"logoutEvent"},decls:36,vars:5,consts:[[1,"profile-popup"],[1,"profile-popup-content"],[1,"user-section"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-role"],[1,"bi","bi-shield-check","me-1"],[1,"popup-divider"],[1,"menu-section"],[1,"menu-item",3,"click"],[1,"bi","bi-person"],[1,"bi","bi-chevron-right","ms-auto"],[1,"bi","bi-gear"],[1,"menu-item"],[1,"bi","bi-question-circle"],[1,"logout-section"],[1,"logout-btn",3,"click"],[1,"bi","bi-box-arrow-right"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4),o(),i(5,"div",4)(6,"div",5),s(7),o(),i(8,"div",6),s(9),o(),i(10,"div",7),d(11,"i",8),s(12," Administrator "),o()()(),d(13,"hr",9),i(14,"div",10)(15,"button",11),g("click",function(){return n.onViewProfile()}),d(16,"i",12),i(17,"span"),s(18,"View Profile"),o(),d(19,"i",13),o(),i(20,"button",11),g("click",function(){return n.onSettings()}),d(21,"i",14),i(22,"span"),s(23,"Account Settings"),o(),d(24,"i",13),o(),i(25,"button",15),d(26,"i",16),i(27,"span"),s(28,"Help & Support"),o(),d(29,"i",13),o()(),d(30,"hr",9),i(31,"div",17)(32,"button",18),g("click",function(){return n.onLogout()}),d(33,"i",19),i(34,"span"),s(35,"Sign Out"),o()()()()()),e&2){let c;M("open",n.isOpen),a(4),C(" ",(n.userData==null||n.userData.username==null||(c=n.userData.username.charAt(0))==null?null:c.toUpperCase())||"A"," "),a(3),h((n.userData==null?null:n.userData.username)||"Admin"),a(2),h((n.userData==null?null:n.userData.email)||"admin@busck.com")}},dependencies:[k],styles:[".profile-popup[_ngcontent-%COMP%]{position:absolute;top:50px;right:10px;z-index:1060;opacity:0;visibility:hidden;transform:translateY(-10px) scale(.95);transition:all .2s cubic-bezier(.4,0,.2,1)}.profile-popup.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0) scale(1)}.profile-popup-content[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 10px 30px #00000026;width:280px;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:1.25rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.user-avatar[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.125rem;font-weight:600;flex-shrink:0;border:3px solid white;box-shadow:0 2px 8px #0000001a}.user-details[_ngcontent-%COMP%]{flex:1;min-width:0}.user-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#2d3748;margin-bottom:.125rem}.user-email[_ngcontent-%COMP%]{font-size:.8rem;color:#4a5568;margin-bottom:.25rem}.user-role[_ngcontent-%COMP%]{font-size:.75rem;color:#059669;font-weight:500;display:flex;align-items:center}.user-role[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.popup-divider[_ngcontent-%COMP%]{margin:0;border-color:#f1f5f9}.menu-section[_ngcontent-%COMP%]{padding:.5rem 0}.menu-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:.75rem;padding:.75rem 1.25rem;background:none;border:none;color:#4a5568;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s ease;text-align:left}.menu-item[_ngcontent-%COMP%]:hover{background:#f8fafc;color:#2d3748;padding-left:1.5rem}.menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{font-size:.875rem;color:#6b7280;width:16px}.menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:last-child{font-size:.75rem;color:#9ca3af}.menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.logout-section[_ngcontent-%COMP%]{padding:.5rem 0}.logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:.75rem;padding:.75rem 1.25rem;background:none;border:none;color:#dc2626;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s ease}.logout-btn[_ngcontent-%COMP%]:hover{background:#fef2f2;color:#b91c1c;padding-left:1.5rem}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;width:16px}@media (max-width: 576px){.profile-popup[_ngcontent-%COMP%]{right:5px;top:45px}.profile-popup-content[_ngcontent-%COMP%]{width:260px}.user-section[_ngcontent-%COMP%]{padding:1rem}.user-avatar[_ngcontent-%COMP%]{width:42px;height:42px;font-size:1rem}.menu-item[_ngcontent-%COMP%], .logout-btn[_ngcontent-%COMP%]{padding:.625rem 1rem;font-size:.8rem}.menu-item[_ngcontent-%COMP%]:hover, .logout-btn[_ngcontent-%COMP%]:hover{padding-left:1.25rem}}"]})};var yt=class r{constructor(t){this.router=t;let e=localStorage.getItem("user");this.userData=e?JSON.parse(e):null}userData;isSidebarCollapsed=!1;currentTime=new Date;showNotificationPanel=!1;showProfilePopup=!1;ngOnInit(){setInterval(()=>{this.currentTime=new Date},6e4)}onDocumentClick(t){let e=t.target;!e.closest(".header-btn")&&!e.closest(".profile-popup")&&(this.showProfilePopup=!1)}onToggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}toggleNotifications(){this.showNotificationPanel=!this.showNotificationPanel,this.showNotificationPanel&&(this.showProfilePopup=!1)}closeNotificationPanel(){this.showNotificationPanel=!1}toggleProfilePopup(){this.showProfilePopup=!this.showProfilePopup,this.showProfilePopup&&(this.showNotificationPanel=!1)}closeProfilePopup(){this.showProfilePopup=!1}onLogout(){localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),localStorage.removeItem("rememberMe"),localStorage.removeItem("username"),localStorage.removeItem("auth_token"),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||r)(P(Q))};static \u0275cmp=S({type:r,selectors:[["app-admin"]],hostBindings:function(e,n){e&1&&g("click",function(m){return n.onDocumentClick(m)},!1,dt)},decls:22,vars:12,consts:[[1,"admin-layout"],[3,"toggleSidebar","logoutEvent","isCollapsed","userData"],[1,"main-content"],[1,"top-header"],[1,"header-left"],[1,"mobile-menu-toggle","d-lg-none",3,"click"],[1,"bi","bi-list"],[1,"page-title"],[1,"page-subtitle"],[1,"header-right"],[1,"header-actions"],[1,"position-relative"],["title","Profile",1,"header-btn",3,"click"],[1,"bi","bi-person-circle"],[3,"closePopup","logoutEvent","isOpen","userData"],[1,"page-content"],[3,"closePanel","isOpen"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"app-sidebar",1),g("toggleSidebar",function(){return n.onToggleSidebar()})("logoutEvent",function(){return n.onLogout()}),o(),i(2,"main",2)(3,"header",3)(4,"div",4)(5,"button",5),g("click",function(){return n.onToggleSidebar()}),d(6,"i",6),o(),i(7,"div",7)(8,"h1"),s(9),o(),i(10,"p",8),s(11),ne(12,"date"),o()()(),i(13,"div",9)(14,"div",10)(15,"div",11)(16,"button",12),g("click",function(){return n.toggleProfilePopup()}),d(17,"i",13),o(),i(18,"app-profile-popup",14),g("closePopup",function(){return n.closeProfilePopup()})("logoutEvent",function(){return n.onLogout()}),o()()()()(),i(19,"div",15),d(20,"router-outlet"),o()(),i(21,"app-notification-panel",16),g("closePanel",function(){return n.closeNotificationPanel()}),o()()),e&2&&(a(),l("isCollapsed",n.isSidebarCollapsed)("userData",n.userData),a(),M("sidebar-collapsed",n.isSidebarCollapsed),a(7),C("Welcome back, ",(n.userData==null?null:n.userData.username)||"Admin",""),a(2),h(ae(12,9,n.currentTime,"EEEE, MMMM d, y")),a(7),l("isOpen",n.showProfilePopup)("userData",n.userData),a(3),l("isOpen",n.showNotificationPanel))},dependencies:[k,fe,pt,Ot,Pt,xt],styles:[".admin-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f8fafc;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:.8rem;line-height:1.5}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:260px;transition:margin-left .3s cubic-bezier(.4,0,.2,1);min-width:0;min-height:100vh}.main-content.sidebar-collapsed[_ngcontent-%COMP%]{margin-left:70px}.top-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e2e8f0;padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;box-shadow:0 1px 3px #0000000d;position:sticky;top:0;z-index:100}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.mobile-menu-toggle[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#4a5568;cursor:pointer;padding:.5rem;border-radius:6px;transition:background .2s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#f7fafc}.mobile-menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1a202c;margin:0}.page-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#718096;margin:.125rem 0 0}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.header-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:none;border:1px solid #e2e8f0;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.875rem;color:#4a5568;transition:all .2s ease;position:relative}.header-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0;transform:translateY(-1px)}.header-btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #667eea1a}.header-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.header-btn[_ngcontent-%COMP%]:after{display:none}.badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#e53e3e;color:#fff;border-radius:10px;font-size:.6rem;font-weight:600;padding:2px 6px;min-width:16px;text-align:center;border:2px solid white}.page-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem;overflow-y:auto}@media (max-width: 991.98px){.main-content[_ngcontent-%COMP%], .main-content.sidebar-collapsed[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 767.98px){.top-header[_ngcontent-%COMP%], .page-content[_ngcontent-%COMP%]{padding:1rem}.page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.page-subtitle[_ngcontent-%COMP%]{font-size:.7rem}.header-actions[_ngcontent-%COMP%]{gap:.25rem}.header-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.8rem}}"]})};var St=class r{constructor(t,e){this.authService=t;this.router=e}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||r)(re(Me),re(Q))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function ui(r,t){r&1&&(i(0,"div",12),s(1,"Full name is required"),o())}function fi(r,t){r&1&&(i(0,"div",12),s(1,"Valid email is required"),o())}function _i(r,t){r&1&&(i(0,"div",12),s(1,"Valid phone number is required"),o())}var wt=class r{constructor(t){this.fb=t}profileForm;ngOnInit(){this.profileForm=this.fb.group({fullName:["",[O.required,O.minLength(2)]],email:["",[O.required,O.email]],phone:["",[O.required,O.pattern(/^\+?[1-9]\d{1,14}$/)]],address:[""]})}onSubmit(){this.profileForm.valid&&console.log("Profile form submitted:",this.profileForm.value)}static \u0275fac=function(e){return new(e||r)(P(le))};static \u0275cmp=S({type:r,selectors:[["app-profile-settings"]],decls:25,vars:5,consts:[[1,"tab-pane"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["type","text","formControlName","fullName",1,"form-control","form-control-sm"],["class","error-text",4,"ngIf"],["type","email","formControlName","email",1,"form-control","form-control-sm"],["type","tel","formControlName","phone",1,"form-control","form-control-sm"],[1,"form-group","full-width"],["formControlName","address","rows","2",1,"form-control","form-control-sm"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],[1,"error-text"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"form",1),g("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"div",3)(4,"label"),s(5,"Full Name"),o(),d(6,"input",4),_(7,ui,2,0,"div",5),o(),i(8,"div",3)(9,"label"),s(10,"Email"),o(),d(11,"input",6),_(12,fi,2,0,"div",5),o(),i(13,"div",3)(14,"label"),s(15,"Phone"),o(),d(16,"input",7),_(17,_i,2,0,"div",5),o(),i(18,"div",8)(19,"label"),s(20,"Address"),o(),d(21,"textarea",9),o()(),i(22,"div",10)(23,"button",11),s(24,"Update Profile"),o()()()()),e&2){let c,m,b;a(),l("formGroup",n.profileForm),a(6),l("ngIf",((c=n.profileForm.get("fullName"))==null?null:c.invalid)&&((c=n.profileForm.get("fullName"))==null?null:c.touched)),a(5),l("ngIf",((m=n.profileForm.get("email"))==null?null:m.invalid)&&((m=n.profileForm.get("email"))==null?null:m.touched)),a(5),l("ngIf",((b=n.profileForm.get("phone"))==null?null:b.invalid)&&((b=n.profileForm.get("phone"))==null?null:b.touched)),a(6),l("disabled",n.profileForm.invalid)}},dependencies:[k,L,z,te,$,U,ee,de,se,ce],styles:[`.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:600;color:#495057;margin-bottom:4px;text-transform:uppercase;letter-spacing:.3px}.form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;font-weight:500;text-transform:none;letter-spacing:normal;cursor:pointer}.form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:6px;transform:scale(.9)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:12px;border:1px solid #d1d3e2;border-radius:4px;padding:6px 8px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 2px #007bff26}.form-group[_ngcontent-%COMP%]   .form-control.form-control-sm[_ngcontent-%COMP%]{font-size:11px;padding:5px 7px}.form-group[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m1 6 7 7 7-7'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 6px center;background-size:12px;padding-right:25px}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.error-text[_ngcontent-%COMP%]{font-size:10px;color:#dc3545;margin-top:2px;font-weight:500}.form-actions[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding-top:16px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:11px;font-weight:600;padding:6px 16px;text-transform:uppercase;letter-spacing:.3px;border-radius:4px}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#007bff;border-color:#007bff}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3;border-color:#0056b3}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;border-color:#6c757d}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}`]})};function bi(r,t){if(r&1){let e=v();i(0,"div",34),d(1,"i",35),s(2),i(3,"button",36),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.successMessage," ")}}function Ci(r,t){if(r&1){let e=v();i(0,"div",37),d(1,"i",38),s(2),i(3,"button",36),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.errorMessage," ")}}function hi(r,t){r&1&&(i(0,"div",39),s(1,"Current password is required"),o())}function vi(r,t){r&1&&d(0,"div",40)}function Mi(r,t){if(r&1&&(i(0,"div",41)(1,"div",42),d(2,"div",43),o(),i(3,"span",44),s(4),o()()),r&2){let e=p();a(2),Ue("width",e.getPasswordStrengthPercent(),"%"),l("ngClass",e.getPasswordStrengthClass()),a(),l("ngClass",e.getPasswordStrengthClass()),a(),C(" ",e.getPasswordStrengthText()," ")}}function Oi(r,t){r&1&&(i(0,"span"),s(1,"New password is required"),o())}function Pi(r,t){r&1&&(i(0,"span"),s(1,"Password must be at least 6 characters"),o())}function xi(r,t){r&1&&(i(0,"span"),s(1,"Password must contain letters and numbers"),o())}function yi(r,t){if(r&1&&(i(0,"div",39),_(1,Oi,2,0,"span",28)(2,Pi,2,0,"span",28)(3,xi,2,0,"span",28),o()),r&2){let e,n,c,m=p();a(),l("ngIf",(e=m.passwordForm.get("newPassword"))==null||e.errors==null?null:e.errors.required),a(),l("ngIf",(n=m.passwordForm.get("newPassword"))==null||n.errors==null?null:n.errors.minlength),a(),l("ngIf",(c=m.passwordForm.get("newPassword"))==null||c.errors==null?null:c.errors.pattern)}}function Si(r,t){r&1&&d(0,"div",40)}function wi(r,t){r&1&&(i(0,"span"),s(1,"Please confirm your password"),o())}function ki(r,t){r&1&&(i(0,"span"),s(1,"Passwords don't match"),o())}function Ii(r,t){if(r&1&&(i(0,"div",39),_(1,wi,2,0,"span",28)(2,ki,2,0,"span",28),o()),r&2){let e,n,c=p();a(),l("ngIf",(e=c.passwordForm.get("confirmPassword"))==null||e.errors==null?null:e.errors.required),a(),l("ngIf",(n=c.passwordForm.get("confirmPassword"))==null||n.errors==null?null:n.errors.passwordMismatch)}}function Ei(r,t){r&1&&d(0,"div",40)}function Ti(r,t){if(r&1&&(i(0,"div",45)(1,"label",15),s(2,"Password Requirements"),o(),i(3,"div",46)(4,"div",47),d(5,"i",48),i(6,"span"),s(7,"At least 6 characters"),o()(),i(8,"div",47),d(9,"i",48),i(10,"span"),s(11,"Contains letters"),o()(),i(12,"div",47),d(13,"i",48),i(14,"span"),s(15,"Contains numbers"),o()(),i(16,"div",47),d(17,"i",48),i(18,"span"),s(19,"Special chars (recommended)"),o()()()()),r&2){let e=p();a(4),l("ngClass",e.getRequirementClass("length")),a(4),l("ngClass",e.getRequirementClass("letters")),a(4),l("ngClass",e.getRequirementClass("numbers")),a(4),l("ngClass",e.getRequirementClass("special"))}}function Li(r,t){r&1&&d(0,"span",49)}function Ai(r,t){r&1&&(i(0,"span"),d(1,"i",50),o())}var Ye=class r{constructor(t,e){this.fb=t;this.authService=e}passwordForm;isLoading=!1;successMessage="";errorMessage="";showCurrentPassword=!1;showNewPassword=!1;showConfirmPassword=!1;ngOnInit(){this.initializeForm()}initializeForm(){this.passwordForm=this.fb.group({currentPassword:["",[O.required]],newPassword:["",[O.required,O.minLength(6),O.pattern(/^(?=.*[a-zA-Z])(?=.*\d).*$/)]],confirmPassword:["",[O.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(t){let e=t.get("newPassword"),n=t.get("confirmPassword");return e&&n&&e.value!==n.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(n?.hasError("passwordMismatch")&&(delete n.errors.passwordMismatch,Object.keys(n.errors).length===0&&n.setErrors(null)),null)}toggleCurrentPassword(){this.showCurrentPassword=!this.showCurrentPassword}toggleNewPassword(){this.showNewPassword=!this.showNewPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}onPasswordStrengthCheck(){this.passwordForm.updateValueAndValidity()}getPasswordStrengthPercent(){let t=this.passwordForm.get("newPassword")?.value||"",e=0;return t.length>=6&&(e+=25),t.match(/[a-zA-Z]/)&&(e+=25),t.match(/[0-9]/)&&(e+=25),t.match(/[^a-zA-Z0-9]/)&&(e+=25),e}getPasswordStrengthClass(){let t=this.getPasswordStrengthPercent();return t<=25?"strength-weak":t<=50?"strength-fair":t<=75?"strength-good":"strength-strong"}getPasswordStrengthText(){let t=this.getPasswordStrengthPercent();return t<=25?"Weak":t<=50?"Fair":t<=75?"Good":"Strong"}getRequirementClass(t){let e=this.passwordForm.get("newPassword")?.value||"",n=!1;switch(t){case"length":n=e.length>=6;break;case"letters":n=/[a-zA-Z]/.test(e);break;case"numbers":n=/[0-9]/.test(e);break;case"special":n=/[^a-zA-Z0-9]/.test(e);break}return n?"requirement-met":"requirement-unmet"}onSubmit(){if(this.passwordForm.valid){let t=this.authService.getCurrentUserId();if(!t){this.errorMessage="User not logged in. Please log in again.";return}let e=this.passwordForm.get("newPassword")?.value,n=this.passwordForm.get("confirmPassword")?.value;if(e!==n){this.errorMessage="New password and confirm password do not match.";return}this.clearMessages(),this.isLoading=!0;let c={oldPassword:this.passwordForm.get("currentPassword")?.value,newPassword:e};this.authService.changePassword(t,c).subscribe({next:m=>{this.isLoading=!1,this.successMessage=m.message||"Password changed successfully! You will be logged out from all devices.",this.resetForm()},error:m=>{this.isLoading=!1,m.status===400?this.errorMessage=m.error?.message||m.error||"Old password is incorrect.":m.status===401?this.errorMessage="Unauthorized. Please log in again.":m.status===404?this.errorMessage="User not found.":m.status===500?this.errorMessage="Server error. Please try again later.":m.status===0?this.errorMessage="Network error. Please check your connection.":this.errorMessage="Failed to change password. Please try again."}})}else Object.keys(this.passwordForm.controls).forEach(t=>{this.passwordForm.get(t)?.markAsTouched()})}resetForm(){this.passwordForm.reset(),this.showCurrentPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1,this.clearMessages(),Object.keys(this.passwordForm.controls).forEach(t=>{this.passwordForm.get(t)?.markAsUntouched(),this.passwordForm.get(t)?.markAsPristine()})}clearMessages(){this.successMessage="",this.errorMessage=""}static \u0275fac=function(e){return new(e||r)(P(le),P(Me))};static \u0275cmp=S({type:r,selectors:[["app-password-settings"]],decls:65,vars:37,consts:[["spacer1",""],["spacer2",""],["spacer3",""],[1,"password-management"],["class","alert alert-success alert-compact mb-3",4,"ngIf"],["class","alert alert-danger alert-compact mb-3",4,"ngIf"],[1,"password-form","card"],[1,"card-header"],[1,"card-title"],[1,"bi","bi-shield-lock","me-2"],[1,"text-muted"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-col"],[1,"form-label-compact"],[1,"input-group"],["formControlName","currentPassword","placeholder","Enter current password",1,"form-control","form-control-compact",3,"type","disabled"],["type","button",1,"btn","btn-outline-secondary","btn-compact",3,"click","disabled"],[1,"error-space"],["class","error-text-compact",4,"ngIf","ngIfElse"],["formControlName","newPassword","placeholder","Create a strong password",1,"form-control","form-control-compact",3,"input","type","disabled"],["class","password-strength-compact",4,"ngIf"],["formControlName","confirmPassword","placeholder","Confirm new password",1,"form-control","form-control-compact",3,"type","disabled"],["class","password-requirements-compact",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-compact",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-compact","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"security-notice-compact"],[1,"notice-content"],[1,"bi","bi-info-circle","me-2","text-info"],[1,"alert","alert-success","alert-compact","mb-3"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-3"],[1,"bi","bi-exclamation-circle","me-2"],[1,"error-text-compact"],[1,"error-spacer"],[1,"password-strength-compact"],[1,"strength-bar"],[1,"strength-fill",3,"ngClass"],[1,"strength-text",3,"ngClass"],[1,"password-requirements-compact"],[1,"requirements-grid"],[1,"requirement-item-compact",3,"ngClass"],[1,"bi","bi-check-circle-fill","me-1"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-shield-check","me-1"]],template:function(e,n){if(e&1){let c=v();i(0,"div",3),_(1,bi,4,1,"div",4)(2,Ci,4,1,"div",5),i(3,"div",6)(4,"div",7)(5,"h5",8),d(6,"i",9),s(7," Change Password "),o(),i(8,"small",10),s(9,"Keep your account secure with a strong password"),o()(),i(10,"div",11)(11,"form",12),g("ngSubmit",function(){return u(c),f(n.onSubmit())}),i(12,"div",13)(13,"div",14)(14,"label",15),s(15,"Current Password *"),o(),i(16,"div",16),d(17,"input",17),i(18,"button",18),g("click",function(){return u(c),f(n.toggleCurrentPassword())}),d(19,"i"),o()(),i(20,"div",19),_(21,hi,2,0,"div",20)(22,vi,1,0,"ng-template",null,0,ie),o()()(),i(24,"div",13)(25,"div",14)(26,"label",15),s(27,"New Password *"),o(),i(28,"div",16)(29,"input",21),g("input",function(){return u(c),f(n.onPasswordStrengthCheck())}),o(),i(30,"button",18),g("click",function(){return u(c),f(n.toggleNewPassword())}),d(31,"i"),o()(),_(32,Mi,5,5,"div",22),i(33,"div",19),_(34,yi,4,3,"div",20)(35,Si,1,0,"ng-template",null,1,ie),o()()(),i(37,"div",13)(38,"div",14)(39,"label",15),s(40,"Confirm New Password *"),o(),i(41,"div",16),d(42,"input",23),i(43,"button",18),g("click",function(){return u(c),f(n.toggleConfirmPassword())}),d(44,"i"),o()(),i(45,"div",19),_(46,Ii,3,2,"div",20)(47,Ei,1,0,"ng-template",null,2,ie),o()()(),_(49,Ti,20,4,"div",24),i(50,"div",25)(51,"button",26),_(52,Li,1,0,"span",27)(53,Ai,2,0,"span",28),s(54),o(),i(55,"button",29),g("click",function(){return u(c),f(n.resetForm())}),d(56,"i",30),s(57,"Reset Form "),o()()(),i(58,"div",31)(59,"div",32),d(60,"i",33),i(61,"small",10)(62,"strong"),s(63,"Security Note:"),o(),s(64," After changing your password, you'll be logged out from all devices. "),o()()()()()()}if(e&2){let c,m,b,x,y,A,Z,me,Le=Y(23),Ae=Y(36),W=Y(48);a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(9),l("formGroup",n.passwordForm),a(6),M("is-invalid",((c=n.passwordForm.get("currentPassword"))==null?null:c.invalid)&&((c=n.passwordForm.get("currentPassword"))==null?null:c.touched)),l("type",n.showCurrentPassword?"text":"password")("disabled",n.isLoading),a(),l("disabled",n.isLoading),a(),R(n.showCurrentPassword?"bi bi-eye-slash":"bi bi-eye"),a(2),l("ngIf",((m=n.passwordForm.get("currentPassword"))==null?null:m.invalid)&&((m=n.passwordForm.get("currentPassword"))==null?null:m.touched))("ngIfElse",Le),a(8),M("is-invalid",((b=n.passwordForm.get("newPassword"))==null?null:b.invalid)&&((b=n.passwordForm.get("newPassword"))==null?null:b.touched)),l("type",n.showNewPassword?"text":"password")("disabled",n.isLoading),a(),l("disabled",n.isLoading),a(),R(n.showNewPassword?"bi bi-eye-slash":"bi bi-eye"),a(),l("ngIf",(x=n.passwordForm.get("newPassword"))==null?null:x.value),a(2),l("ngIf",((y=n.passwordForm.get("newPassword"))==null?null:y.invalid)&&((y=n.passwordForm.get("newPassword"))==null?null:y.touched))("ngIfElse",Ae),a(8),M("is-invalid",((A=n.passwordForm.get("confirmPassword"))==null?null:A.invalid)&&((A=n.passwordForm.get("confirmPassword"))==null?null:A.touched)),l("type",n.showConfirmPassword?"text":"password")("disabled",n.isLoading),a(),l("disabled",n.isLoading),a(),R(n.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye"),a(2),l("ngIf",((Z=n.passwordForm.get("confirmPassword"))==null?null:Z.invalid)&&((Z=n.passwordForm.get("confirmPassword"))==null?null:Z.touched))("ngIfElse",W),a(3),l("ngIf",(me=n.passwordForm.get("newPassword"))==null?null:me.value),a(2),l("disabled",n.passwordForm.invalid||n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),C(" ",n.isLoading?"Updating Password...":"Change Password"," "),a(),l("disabled",n.isLoading)}},dependencies:[k,ue,L,z,te,$,U,ee,de,se,ce],styles:[".password-management[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:.75rem}.form-col[_ngcontent-%COMP%]{flex:1;min-width:0}.form-label-compact[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.25rem;font-weight:500;display:block;color:#495057}.form-control-compact[_ngcontent-%COMP%]{padding:.35rem .5rem;font-size:.8rem;height:32px;line-height:1.2;border:1px solid #ced4da;border-radius:.25rem}.form-control-compact[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.form-control-compact[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-control-compact.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.input-group[_ngcontent-%COMP%]   .btn-compact[_ngcontent-%COMP%]{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.error-space[_ngcontent-%COMP%]{height:16px;margin-top:.2rem}.error-text-compact[_ngcontent-%COMP%]{font-size:.7rem;color:#dc3545;line-height:1.2;height:16px;display:flex;align-items:center}.error-spacer[_ngcontent-%COMP%]{height:16px}.btn-compact[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.8rem;height:32px;line-height:1.2}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #dee2e6}.card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:.75rem 1rem}.card-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem}.card-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1rem}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.85rem;border-radius:.25rem;position:relative}.btn-close-sm[_ngcontent-%COMP%]{padding:.2rem;font-size:.7rem}.password-strength-compact[_ngcontent-%COMP%]{margin-top:.3rem;display:flex;align-items:center;gap:.5rem}.strength-bar[_ngcontent-%COMP%]{flex:1;height:4px;background-color:#e9ecef;border-radius:2px;overflow:hidden}.strength-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease,background-color .3s ease;border-radius:2px}.strength-fill.strength-weak[_ngcontent-%COMP%]{background-color:#dc3545}.strength-fill.strength-fair[_ngcontent-%COMP%]{background-color:#fd7e14}.strength-fill.strength-good[_ngcontent-%COMP%]{background-color:#ffc107}.strength-fill.strength-strong[_ngcontent-%COMP%]{background-color:#198754}.strength-text[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;min-width:60px;text-align:right}.strength-text.strength-weak[_ngcontent-%COMP%]{color:#dc3545}.strength-text.strength-fair[_ngcontent-%COMP%]{color:#fd7e14}.strength-text.strength-good[_ngcontent-%COMP%]{color:#ffc107}.strength-text.strength-strong[_ngcontent-%COMP%]{color:#198754}.password-requirements-compact[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background-color:#f8f9fa;border-radius:.25rem;border:1px solid #dee2e6}.requirements-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.3rem;margin-top:.5rem}.requirement-item-compact[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.7rem;color:#6c757d}.requirement-item-compact.requirement-met[_ngcontent-%COMP%], .requirement-item-compact.requirement-met[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#198754}.requirement-item-compact.requirement-unmet[_ngcontent-%COMP%], .requirement-item-compact.requirement-unmet[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc3545}.requirement-item-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;opacity:.7}.requirement-item-compact[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.2}.security-notice-compact[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #dee2e6}.notice-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.notice-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.1rem;flex-shrink:0}.spinner-border-sm[_ngcontent-%COMP%]{width:.8rem;height:.8rem}@media (max-width: 768px){.requirements-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.password-strength-compact[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.3rem}.strength-text[_ngcontent-%COMP%]{text-align:left;min-width:auto}}"]})};function Ri(r,t){r&1&&(i(0,"div",83)(1,"div",84)(2,"span",85),s(3,"Loading..."),o()(),i(4,"div",86),s(5,"Loading restaurant information..."),o()())}function Ni(r,t){if(r&1){let e=v();i(0,"div",87),d(1,"i",88),s(2),i(3,"button",89),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.successMessage," ")}}function Di(r,t){if(r&1){let e=v();i(0,"div",90),d(1,"i",91),s(2),i(3,"button",89),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.errorMessage," ")}}function Fi(r,t){if(r&1){let e=v();i(0,"div",92),d(1,"img",93),i(2,"button",94),g("click",function(){u(e);let c=p();return f(c.removeLogo())}),d(3,"i",95),o()()}if(r&2){let e=p();a(),l("src",e.logoPreview,Ee),a(),l("disabled",e.isLoading)}}function Vi(r,t){r&1&&(i(0,"div",96),d(1,"i",97),i(2,"span"),s(3,"No logo"),o()())}function zi(r,t){r&1&&(i(0,"div",98),s(1,"Restaurant name is required"),o())}function Bi(r,t){r&1&&d(0,"div",22)}function ji(r,t){r&1&&(i(0,"div",98),s(1,"Valid email required"),o())}function $i(r,t){r&1&&d(0,"div",22)}function Ui(r,t){r&1&&d(0,"span",99)}function qi(r,t){r&1&&(i(0,"span"),s(1,"Updating..."),o())}function Gi(r,t){r&1&&(i(0,"span"),d(1,"i",100),s(2,"Update Restaurant Info "),o())}var Qe=class r{constructor(t,e){this.fb=t;this.authService=e}restaurantForm;isLoading=!1;isLoadingData=!1;successMessage="";errorMessage="";logoPreview=null;logoFile=null;maxLogoSize=5*1024*1024;ngOnInit(){this.initializeForm(),this.loadTenantData(),this.loadLogo()}loadLogo(){this.authService.getTenantLogo().subscribe({next:t=>{this.logoPreview=t}})}initializeForm(){this.restaurantForm=this.fb.group({tenantName:["",[O.required,O.maxLength(100)]],businessType:["",O.maxLength(50)],subscriptionPlan:["",O.maxLength(50)],contactName:["",O.maxLength(100)],contactEmail:["",[O.email,O.maxLength(100)]],contactPhone:["",O.maxLength(20)],contactMobile:["",O.maxLength(20)],alternatePhone:["",O.maxLength(20)],website:["",O.maxLength(200)],address:["",O.maxLength(500)],city:["",O.maxLength(100)],state:["",O.maxLength(100)],postalCode:["",O.maxLength(20)],country:["",O.maxLength(100)],latitude:[null],longitude:[null],registrationNumber:["",O.maxLength(100)],taxId:["",O.maxLength(100)],licenseNumber:["",O.maxLength(100)],maxUsers:[null,O.min(1)],maxStorageGb:[null,O.min(1)],billingCycle:[""],subscriptionStartDate:[""],subscriptionEndDate:[""],licenseKey:["",O.maxLength(200)],timezone:["",O.maxLength(50)],currency:["",O.maxLength(10)],language:["",O.maxLength(10)],dateFormat:[""],timeFormat:[""],apiAccessEnabled:[!1],apiKey:[""],isActive:[!0],isVerified:[!1],takeOrders:[!1],verificationDate:[""],lastLoginAt:[""],featuresEnabled:[""],customSettings:[""],notes:["",O.maxLength(1e3)]})}loadTenantData(){this.isLoadingData=!0,this.clearMessages(),this.authService.getCurrentTenantForUpdate().subscribe({next:t=>{this.isLoadingData=!1,t&&(this.populateForm(t),t.logoBase64&&(this.logoPreview=t.logoBase64))},error:t=>{this.isLoadingData=!1,this.errorMessage="Failed to load restaurant information."}})}populateForm(t){this.restaurantForm.patchValue({tenantName:t.tenantName,businessType:t.businessType,contactName:t.contactName,contactEmail:t.contactEmail,contactPhone:t.contactPhone,contactMobile:t.contactMobile,alternatePhone:t.alternatePhone,website:t.website,address:t.address,city:t.city,state:t.state,postalCode:t.postalCode,country:t.country,registrationNumber:t.registrationNumber,taxId:t.taxId,licenseNumber:t.licenseNumber,brandColor:t.brandColor,timezone:t.timezone,currency:t.currency,language:t.language,notes:t.notes})}onLogoSelected(t){let e=t.target.files[0];if(e){if(!e.type.startsWith("image/")){this.errorMessage="Please select a valid image file.";return}if(e.size>this.maxLogoSize){this.errorMessage="Logo file size cannot exceed 5MB.";return}this.logoFile=e,this.clearMessages();let n=new FileReader;n.onload=c=>{this.logoPreview=c.target.result},n.readAsDataURL(e)}}removeLogo(){this.logoFile=null,this.logoPreview=null;let t=document.getElementById("logoInput");t&&(t.value="")}onSubmit(){if(this.restaurantForm.valid){this.clearMessages(),this.isLoading=!0;let t=this.restaurantForm.value;if(this.logoFile){let e=new FileReader;e.onload=()=>{t.logoBase64=e.result,this.submitForm(t)},e.readAsDataURL(this.logoFile)}else this.submitForm(t)}}submitForm(t){this.authService.updateTenantInfo(t).subscribe({next:e=>{this.isLoading=!1,this.successMessage=e.message||"Restaurant information updated successfully!",this.logoFile=null},error:e=>{this.isLoading=!1,e.status===400?this.errorMessage=e.error?.message||"Invalid data provided.":e.status===401?this.errorMessage="Unauthorized. Please log in again.":this.errorMessage="Failed to update restaurant information. Please try again."}})}clearMessages(){this.successMessage="",this.errorMessage=""}static \u0275fac=function(e){return new(e||r)(P(le),P(Me))};static \u0275cmp=S({type:r,selectors:[["app-restaurant-settings"]],decls:270,vars:39,consts:[["spacer1",""],["spacer3",""],[1,"restaurant-management"],["class","loading-overlay",4,"ngIf"],["class","alert alert-success alert-compact mb-3",4,"ngIf"],["class","alert alert-danger alert-compact mb-3",4,"ngIf"],[1,"restaurant-form","card"],[1,"card-header"],[1,"card-title"],[1,"bi","bi-building","me-2"],[1,"text-muted"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"section-divider"],[1,"section-title"],[1,"bi","bi-image","me-2"],[1,"form-row"],[1,"form-col-2"],[1,"form-label-compact"],["type","file","id","logoInput","accept","image/*",1,"form-control","form-control-compact",3,"change","disabled"],[1,"form-help-text"],[1,"error-space"],[1,"error-spacer"],[1,"form-col-1"],[1,"logo-preview-container"],["class","logo-preview",4,"ngIf"],["class","logo-placeholder",4,"ngIf"],[1,"bi","bi-info-circle","me-2"],[1,"form-col"],["type","text","formControlName","tenantName",1,"form-control","form-control-compact",3,"disabled"],["class","error-text-compact",4,"ngIf","ngIfElse"],["type","text","formControlName","businessType",1,"form-control","form-control-compact",3,"disabled"],[1,"bi","bi-telephone","me-2"],["type","text","formControlName","contactName",1,"form-control","form-control-compact",3,"disabled"],["type","email","formControlName","contactEmail",1,"form-control","form-control-compact",3,"disabled"],["type","url","formControlName","website","placeholder","https://...",1,"form-control","form-control-compact",3,"disabled"],["type","tel","formControlName","contactPhone",1,"form-control","form-control-compact",3,"disabled"],["type","tel","formControlName","contactMobile",1,"form-control","form-control-compact",3,"disabled"],["type","tel","formControlName","alternatePhone",1,"form-control","form-control-compact",3,"disabled"],[1,"bi","bi-geo-alt","me-2"],[1,"form-col-full"],["formControlName","address","rows","2",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","city",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","state",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","postalCode",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","country",1,"form-control","form-control-compact",3,"disabled"],["type","number","step","0.000001","formControlName","latitude",1,"form-control","form-control-compact",3,"disabled"],["type","number","step","0.000001","formControlName","longitude",1,"form-control","form-control-compact",3,"disabled"],[1,"bi","bi-building-check","me-2"],["type","text","formControlName","registrationNumber",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","taxId",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","licenseNumber",1,"form-control","form-control-compact",3,"disabled"],[1,"bi","bi-gear","me-2"],["formControlName","timezone",1,"form-control","form-control-compact",3,"disabled"],["value",""],["value","UTC"],["value","Asia/Kolkata"],["value","America/New_York"],["value","America/Los_Angeles"],["value","Europe/London"],["formControlName","currency",1,"form-control","form-control-compact",3,"disabled"],["value","USD"],["value","INR"],["value","EUR"],["value","GBP"],["formControlName","language",1,"form-control","form-control-compact",3,"disabled"],["value","en"],["value","hi"],["value","es"],["value","fr"],["formControlName","dateFormat",1,"form-control","form-control-compact",3,"disabled"],["value","DD/MM/YYYY"],["value","MM/DD/YYYY"],["value","YYYY-MM-DD"],["formControlName","timeFormat",1,"form-control","form-control-compact",3,"disabled"],["value","12"],["value","24"],[1,"bi","bi-journal-text","me-2"],["formControlName","notes","rows","4","placeholder","Any additional information...",1,"form-control","form-control-compact",3,"disabled"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-compact",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"loading-text"],[1,"alert","alert-success","alert-compact","mb-3"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-3"],[1,"bi","bi-exclamation-circle","me-2"],[1,"logo-preview"],["alt","Logo Preview",1,"logo-image",3,"src"],["type","button",1,"btn-remove-logo",3,"click","disabled"],[1,"bi","bi-x"],[1,"logo-placeholder"],[1,"bi","bi-image"],[1,"error-text-compact"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-circle","me-1"]],template:function(e,n){if(e&1){let c=v();i(0,"div",2),_(1,Ri,6,0,"div",3)(2,Ni,4,1,"div",4)(3,Di,4,1,"div",5),i(4,"div",6)(5,"div",7)(6,"h5",8),d(7,"i",9),s(8," Restaurant Information "),o(),i(9,"small",10),s(10,"Update your restaurant details and preferences"),o()(),i(11,"div",11)(12,"form",12),g("ngSubmit",function(){return u(c),f(n.onSubmit())}),i(13,"div",13)(14,"div",14),d(15,"i",15),s(16,"Restaurant Banner "),o()(),i(17,"div",16)(18,"div",17)(19,"label",18),s(20,"Upload Resturent Banner"),o(),i(21,"input",19),g("change",function(b){return u(c),f(n.onLogoSelected(b))}),o(),i(22,"small",20),s(23,"Max size: 5MB. Formats: JPG, PNG, GIF"),o(),i(24,"div",21),d(25,"div",22),o()(),i(26,"div",23)(27,"label",18),s(28,"Preview"),o(),i(29,"div",24),_(30,Fi,4,2,"div",25)(31,Vi,4,0,"div",26),o(),i(32,"div",21),d(33,"div",22),o()()(),i(34,"div",13)(35,"div",14),d(36,"i",27),s(37,"Basic Information "),o()(),i(38,"div",16)(39,"div",28)(40,"label",18),s(41,"Restaurant Name *"),o(),d(42,"input",29),i(43,"div",21),_(44,zi,2,0,"div",30)(45,Bi,1,0,"ng-template",null,0,ie),o()(),i(47,"div",28)(48,"label",18),s(49,"Business Type"),o(),d(50,"input",31),i(51,"div",21),d(52,"div",22),o()()(),i(53,"div",13)(54,"div",14),d(55,"i",32),s(56,"Contact Information "),o()(),i(57,"div",16)(58,"div",28)(59,"label",18),s(60,"Contact Name"),o(),d(61,"input",33),i(62,"div",21),d(63,"div",22),o()(),i(64,"div",28)(65,"label",18),s(66,"Email"),o(),d(67,"input",34),i(68,"div",21),_(69,ji,2,0,"div",30)(70,$i,1,0,"ng-template",null,1,ie),o()(),i(72,"div",28)(73,"label",18),s(74,"Website"),o(),d(75,"input",35),i(76,"div",21),d(77,"div",22),o()()(),i(78,"div",16)(79,"div",28)(80,"label",18),s(81,"Primary Phone"),o(),d(82,"input",36),i(83,"div",21),d(84,"div",22),o()(),i(85,"div",28)(86,"label",18),s(87,"Mobile"),o(),d(88,"input",37),i(89,"div",21),d(90,"div",22),o()(),i(91,"div",28)(92,"label",18),s(93,"Alternate Phone"),o(),d(94,"input",38),i(95,"div",21),d(96,"div",22),o()()(),i(97,"div",13)(98,"div",14),d(99,"i",39),s(100,"Address Information "),o()(),i(101,"div",16)(102,"div",40)(103,"label",18),s(104,"Address"),o(),d(105,"textarea",41),i(106,"div",21),d(107,"div",22),o()()(),i(108,"div",16)(109,"div",28)(110,"label",18),s(111,"City"),o(),d(112,"input",42),i(113,"div",21),d(114,"div",22),o()(),i(115,"div",28)(116,"label",18),s(117,"State"),o(),d(118,"input",43),i(119,"div",21),d(120,"div",22),o()(),i(121,"div",28)(122,"label",18),s(123,"Postal Code"),o(),d(124,"input",44),i(125,"div",21),d(126,"div",22),o()(),i(127,"div",28)(128,"label",18),s(129,"Country"),o(),d(130,"input",45),i(131,"div",21),d(132,"div",22),o()()(),i(133,"div",16)(134,"div",28)(135,"label",18),s(136,"Latitude"),o(),d(137,"input",46),i(138,"div",21),d(139,"div",22),o()(),i(140,"div",28)(141,"label",18),s(142,"Longitude"),o(),d(143,"input",47),i(144,"div",21),d(145,"div",22),o()(),d(146,"div",28)(147,"div",28),o(),i(148,"div",13)(149,"div",14),d(150,"i",48),s(151,"Business Registration "),o()(),i(152,"div",16)(153,"div",28)(154,"label",18),s(155,"Registration Number"),o(),d(156,"input",49),i(157,"div",21),d(158,"div",22),o()(),i(159,"div",28)(160,"label",18),s(161,"Tax ID"),o(),d(162,"input",50),i(163,"div",21),d(164,"div",22),o()(),i(165,"div",28)(166,"label",18),s(167,"License Number"),o(),d(168,"input",51),i(169,"div",21),d(170,"div",22),o()()(),i(171,"div",13)(172,"div",14),d(173,"i",52),s(174,"Preferences & Localization "),o()(),i(175,"div",16)(176,"div",28)(177,"label",18),s(178,"Timezone"),o(),i(179,"select",53)(180,"option",54),s(181,"Select Timezone"),o(),i(182,"option",55),s(183,"UTC"),o(),i(184,"option",56),s(185,"India Standard Time"),o(),i(186,"option",57),s(187,"Eastern Time"),o(),i(188,"option",58),s(189,"Pacific Time"),o(),i(190,"option",59),s(191,"London Time"),o()(),i(192,"div",21),d(193,"div",22),o()(),i(194,"div",28)(195,"label",18),s(196,"Currency"),o(),i(197,"select",60)(198,"option",54),s(199,"Select Currency"),o(),i(200,"option",61),s(201,"USD ($)"),o(),i(202,"option",62),s(203,"INR (\u20B9)"),o(),i(204,"option",63),s(205,"EUR (\u20AC)"),o(),i(206,"option",64),s(207,"GBP (\xA3)"),o()(),i(208,"div",21),d(209,"div",22),o()(),i(210,"div",28)(211,"label",18),s(212,"Language"),o(),i(213,"select",65)(214,"option",54),s(215,"Select Language"),o(),i(216,"option",66),s(217,"English"),o(),i(218,"option",67),s(219,"Hindi"),o(),i(220,"option",68),s(221,"Spanish"),o(),i(222,"option",69),s(223,"French"),o()(),i(224,"div",21),d(225,"div",22),o()()(),i(226,"div",16)(227,"div",28)(228,"label",18),s(229,"Date Format"),o(),i(230,"select",70)(231,"option",54),s(232,"Select Format"),o(),i(233,"option",71),s(234,"DD/MM/YYYY"),o(),i(235,"option",72),s(236,"MM/DD/YYYY"),o(),i(237,"option",73),s(238,"YYYY-MM-DD"),o()(),i(239,"div",21),d(240,"div",22),o()(),i(241,"div",28)(242,"label",18),s(243,"Time Format"),o(),i(244,"select",74)(245,"option",54),s(246,"Select Format"),o(),i(247,"option",75),s(248,"12 Hour"),o(),i(249,"option",76),s(250,"24 Hour"),o()(),i(251,"div",21),d(252,"div",22),o()(),d(253,"div",28),o(),i(254,"div",13)(255,"div",14),d(256,"i",77),s(257,"Additional Notes "),o()(),i(258,"div",16)(259,"div",40)(260,"label",18),s(261,"Notes"),o(),d(262,"textarea",78),i(263,"div",21),d(264,"div",22),o()()(),i(265,"div",79)(266,"button",80),_(267,Ui,1,0,"span",81)(268,qi,2,0,"span",82)(269,Gi,3,0,"span",82),o()()()()()()}if(e&2){let c,m,b=Y(46),x=Y(71);a(),l("ngIf",n.isLoadingData),a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(9),l("formGroup",n.restaurantForm),a(9),l("disabled",n.isLoading),a(9),l("ngIf",n.logoPreview),a(),l("ngIf",!n.logoPreview),a(11),l("disabled",n.isLoading),a(2),l("ngIf",((c=n.restaurantForm.get("tenantName"))==null?null:c.invalid)&&((c=n.restaurantForm.get("tenantName"))==null?null:c.touched))("ngIfElse",b),a(6),l("disabled",n.isLoading),a(11),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(2),l("ngIf",((m=n.restaurantForm.get("contactEmail"))==null?null:m.invalid)&&((m=n.restaurantForm.get("contactEmail"))==null?null:m.touched))("ngIfElse",x),a(6),l("disabled",n.isLoading),a(7),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(11),l("disabled",n.isLoading),a(7),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(7),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(13),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(11),l("disabled",n.isLoading),a(18),l("disabled",n.isLoading),a(16),l("disabled",n.isLoading),a(17),l("disabled",n.isLoading),a(14),l("disabled",n.isLoading),a(18),l("disabled",n.isLoading),a(4),l("disabled",n.restaurantForm.invalid||n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading)}},dependencies:[k,L,z,te,he,ve,$,be,Ce,U,ee,de,se,ce],styles:[".restaurant-management[_ngcontent-%COMP%]{padding:1rem}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#ffffffe6;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999}.loading-text[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9rem;color:#6c757d}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:.75rem}.form-col[_ngcontent-%COMP%], .form-col-1[_ngcontent-%COMP%]{flex:1;min-width:0}.form-col-2[_ngcontent-%COMP%]{flex:2;min-width:0}.form-col-full[_ngcontent-%COMP%]{flex:1 1 100%}.form-label-compact[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.25rem;font-weight:500;display:block;color:#495057}.form-control-compact[_ngcontent-%COMP%]{padding:.35rem .5rem;font-size:.8rem;height:32px;line-height:1.2;border:1px solid #ced4da;border-radius:.25rem}.form-control-compact[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.form-control-compact[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-control-compact[type=file][_ngcontent-%COMP%]{padding:.25rem .5rem}.form-control-compact[rows][_ngcontent-%COMP%]{height:auto;resize:vertical}.form-help-text[_ngcontent-%COMP%]{font-size:.7rem;color:#6c757d;margin-top:.2rem;display:block}.error-space[_ngcontent-%COMP%]{height:16px;margin-top:.2rem}.error-text-compact[_ngcontent-%COMP%]{font-size:.7rem;color:#dc3545;line-height:1.2;height:16px;display:flex;align-items:center}.error-spacer[_ngcontent-%COMP%]{height:16px}.btn-compact[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.8rem;height:32px;line-height:1.2}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #dee2e6}.card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:.75rem 1rem}.card-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem}.card-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1rem}.section-divider[_ngcontent-%COMP%]{margin:1.5rem 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #e9ecef}.section-divider[_ngcontent-%COMP%]:first-child{margin-top:0}.section-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#495057;display:flex;align-items:center}.section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.85rem;border-radius:.25rem;position:relative}.btn-close-sm[_ngcontent-%COMP%]{padding:.2rem;font-size:.7rem}.logo-preview-container[_ngcontent-%COMP%]{width:80px;height:80px;border:2px dashed #dee2e6;border-radius:.25rem;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.logo-preview[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.logo-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:.25rem}.btn-remove-logo[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;width:20px;height:20px;border:none;background-color:#dc3545cc;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.7rem;cursor:pointer}.btn-remove-logo[_ngcontent-%COMP%]:hover{background-color:#dc3545}.btn-remove-logo[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.logo-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#6c757d;font-size:.7rem}.logo-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem}.logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.spinner-border-sm[_ngcontent-%COMP%]{width:.8rem;height:.8rem}@media (max-width: 992px){.form-row[_ngcontent-%COMP%]{flex-wrap:wrap}.form-row[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{flex-basis:calc(50% - .5rem)}}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .form-col-1[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .form-col-2[_ngcontent-%COMP%]{flex-basis:100%}.logo-preview-container[_ngcontent-%COMP%]{width:60px;height:60px}}.d-none[_ngcontent-%COMP%]{display:none!important}"]})};var Ke=class r{constructor(t,e){this.http=t;this.authService=e}baseUrl=D.apiBaseUrl;getLocations(t="",e,n=1,c=10,m="LocationName",b="ASC"){let x=this.authService.getAuthHeaders(),y=new pe().set("searchTerm",t).set("pageNumber",n.toString()).set("pageSize",c.toString()).set("sortColumn",m).set("sortDirection",b);return e!==void 0&&(y=y.set("isActive",e.toString())),this.http.get(`${this.baseUrl}/Master/locations`,{headers:x,params:y})}getLocation(t){let e=this.authService.getAuthHeaders();return this.http.get(`${this.baseUrl}/Master/locations/${t}`,{headers:e})}createLocation(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/Master/locations`,t,{headers:e})}updateLocation(t,e){let n=this.authService.getAuthHeaders();return this.http.put(`${this.baseUrl}/Master/locations/${t}`,e,{headers:n})}deleteLocation(t){let e=this.authService.getAuthHeaders();return this.http.delete(`${this.baseUrl}/Master/locations/${t}`,{headers:e})}static \u0275fac=function(e){return new(e||r)(re(j),re(Me))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var Hi=["addressInput"];function Wi(r,t){if(r&1){let e=v();i(0,"div",62),d(1,"i",63),s(2),i(3,"button",64),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.successMessage," ")}}function Yi(r,t){if(r&1){let e=v();i(0,"div",65),d(1,"i",66),s(2),i(3,"button",64),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.errorMessage," ")}}function Qi(r,t){r&1&&(i(0,"div",67),s(1,"Location name is required"),o())}function Ki(r,t){r&1&&d(0,"div",24)}function Ji(r,t){r&1&&(i(0,"div",67),s(1,"Location prefix is required"),o())}function Zi(r,t){r&1&&d(0,"div",24)}function Xi(r,t){r&1&&d(0,"span",68)}function eo(r,t){r&1&&d(0,"i",69)}function to(r,t){r&1&&(i(0,"div",67),s(1,"Invalid latitude (-90 to 90)"),o())}function no(r,t){r&1&&d(0,"div",24)}function io(r,t){r&1&&(i(0,"div",67),s(1,"Invalid longitude (-180 to 180)"),o())}function oo(r,t){r&1&&d(0,"div",24)}function ro(r,t){r&1&&d(0,"span",70)}function ao(r,t){if(r&1&&(i(0,"span"),s(1),o()),r&2){let e=p();a(),h(e.editingLocationId?"Updating...":"Saving...")}}function so(r,t){if(r&1&&(i(0,"span"),d(1,"i",71),s(2),o()),r&2){let e=p();a(2),C("",e.editingLocationId?"Update Location":"Save Location"," ")}}function co(r,t){r&1&&(i(0,"div",72)(1,"div",73)(2,"span",74),s(3,"Loading..."),o()(),i(4,"div",75),s(5,"Loading locations..."),o()())}function lo(r,t){if(r&1&&(i(0,"small",26),s(1),ne(2,"number"),ne(3,"number"),o()),r&2){let e=p().$implicit;a(),q(" ",ae(2,2,e.latitude,"1.6-6"),", ",ae(3,5,e.longitude,"1.6-6")," ")}}function mo(r,t){r&1&&(i(0,"span"),s(1,"-"),o())}function po(r,t){if(r&1){let e=v();i(0,"tr")(1,"td")(2,"strong"),s(3),o()(),i(4,"td")(5,"span",82),s(6),o()(),i(7,"td")(8,"div",83),s(9),o()(),i(10,"td"),s(11),o(),i(12,"td"),_(13,lo,4,8,"small",84)(14,mo,2,0,"span",46),o(),i(15,"td")(16,"span",85),d(17,"i"),s(18),o()(),i(19,"td")(20,"small"),s(21),ne(22,"date"),o()(),i(23,"td")(24,"div",86)(25,"button",87),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editLocation(c))}),d(26,"i",88),o(),i(27,"button",89),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.viewLocationOnMap(c))}),d(28,"i",90),o(),i(29,"button",91),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteLocation(c))}),d(30,"i",92),o()()()()}if(r&2){let e=t.$implicit;M("table-warning",!e.isActive),a(3),h(e.locationName),a(3),h(e.locationPrefix),a(2),l("title",e.address),a(),C(" ",e.address||"-"," "),a(2),h(e.city||"-"),a(2),l("ngIf",e.latitude&&e.longitude),a(),l("ngIf",!e.latitude||!e.longitude),a(2),l("ngClass",e.isActive?"bg-success":"bg-danger"),a(),R(e.isActive?"bi bi-check-circle":"bi bi-x-circle"),a(),C(" ",e.isActive?"Active":"Inactive"," "),a(3),h(ae(22,15,e.createdAt,"short")),a(6),l("disabled",!e.latitude||!e.longitude)}}function go(r,t){r&1&&(i(0,"tr")(1,"td",93),d(2,"i",94),s(3," No locations found "),o()())}function uo(r,t){if(r&1){let e=v();i(0,"div",76)(1,"table",77)(2,"thead",78)(3,"tr")(4,"th",79),g("click",function(){u(e);let c=p();return f(c.onSort("LocationName"))}),s(5," Name "),d(6,"i"),o(),i(7,"th",79),g("click",function(){u(e);let c=p();return f(c.onSort("LocationPrefix"))}),s(8," Prefix "),d(9,"i"),o(),i(10,"th"),s(11,"Address"),o(),i(12,"th",79),g("click",function(){u(e);let c=p();return f(c.onSort("City"))}),s(13," City "),d(14,"i"),o(),i(15,"th"),s(16,"Coordinates"),o(),i(17,"th",79),g("click",function(){u(e);let c=p();return f(c.onSort("IsActive"))}),s(18," Status "),d(19,"i"),o(),i(20,"th",79),g("click",function(){u(e);let c=p();return f(c.onSort("CreatedAt"))}),s(21," Created "),d(22,"i"),o(),i(23,"th",80),s(24,"Actions"),o()()(),i(25,"tbody"),_(26,po,31,18,"tr",81)(27,go,4,0,"tr",46),o()()()}if(r&2){let e=p();a(6),R(e.getSortIcon("LocationName")),a(3),R(e.getSortIcon("LocationPrefix")),a(5),R(e.getSortIcon("City")),a(5),R(e.getSortIcon("IsActive")),a(3),R(e.getSortIcon("CreatedAt")),a(4),l("ngForOf",e.locations)("ngForTrackBy",e.trackByLocationId),a(),l("ngIf",e.locations.length===0)}}function fo(r,t){if(r&1){let e=v();i(0,"li",97)(1,"button",104),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onPageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.currentPage),a(2),h(e)}}function _o(r,t){if(r&1){let e=v();i(0,"nav",95)(1,"ul",96)(2,"li",97)(3,"button",98),g("click",function(){u(e);let c=p();return f(c.onPageChange(1))}),d(4,"i",99),o()(),i(5,"li",97)(6,"button",98),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage-1))}),d(7,"i",100),o()(),_(8,fo,3,3,"li",101),i(9,"li",97)(10,"button",98),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage+1))}),d(11,"i",102),o()(),i(12,"li",97)(13,"button",98),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.totalPages))}),d(14,"i",103),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),l("ngForOf",e.getPaginationNumbers()),a(),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages),a(2),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages)}}var Je=class r{constructor(t,e,n){this.fb=t;this.locationService=e;this.ngZone=n}addressInputRef;locationForm;locations=[];currentPage=1;pageSize=10;totalCount=0;totalPages=0;searchTerm="";filterActive;sortColumn="LocationName";sortDirection="ASC";isLoading=!1;isLoadingLocations=!1;isGettingLocation=!1;successMessage="";errorMessage="";editingLocationId=null;autocomplete;isGoogleMapsLoaded=!1;placesService;geocoder;GOOGLE_MAPS_API_KEY="AIzaSyAbqpnPHWDqvA3TIQPq0xowtJ3ij3Xiqxg";ngOnInit(){this.initializeForm(),this.loadGoogleMaps(),this.loadLocations()}ngAfterViewInit(){setTimeout(()=>{this.isGoogleMapsLoaded&&this.addressInputRef&&this.initializeAutocomplete()},500)}initializeForm(){this.locationForm=this.fb.group({locationName:["",[O.required,O.maxLength(100)]],locationPrefix:["",[O.required,O.maxLength(10)]],address:["",O.maxLength(500)],city:["",O.maxLength(100)],state:["",O.maxLength(100)],country:["",O.maxLength(100)],postalCode:["",O.maxLength(20)],latitude:[null,[O.min(-90),O.max(90)]],longitude:[null,[O.min(-180),O.max(180)]],isActive:[!0]})}loadGoogleMaps(){if(typeof google<"u"&&google.maps){this.isGoogleMapsLoaded=!0,this.initializeGoogleServices();return}let t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${this.GOOGLE_MAPS_API_KEY}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{this.ngZone.run(()=>{this.isGoogleMapsLoaded=!0,this.initializeGoogleServices(),this.addressInputRef&&this.initializeAutocomplete()})},t.onerror=()=>{console.error("Failed to load Google Maps API"),this.errorMessage="Failed to load Google Maps. Please check your API key and internet connection."},document.head.appendChild(t)}initializeGoogleServices(){if(typeof google<"u"&&google.maps){this.geocoder=new google.maps.Geocoder;let t=new google.maps.Map(document.createElement("div"));this.placesService=new google.maps.places.PlacesService(t)}}initializeAutocomplete(){!this.addressInputRef||!this.isGoogleMapsLoaded||!google.maps||(this.autocomplete=new google.maps.places.Autocomplete(this.addressInputRef.nativeElement,{types:["establishment","geocode"],fields:["formatted_address","geometry","address_components","name","place_id","types"]}),this.autocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{let t=this.autocomplete.getPlace();if(t.geometry&&t.geometry.location){let e=t.geometry.location.lat(),n=t.geometry.location.lng(),c=t.name&&t.types.some(m=>["establishment","point_of_interest","store"].includes(m))?`${t.name}, ${t.formatted_address}`:t.formatted_address;this.locationForm.patchValue({address:c,latitude:e,longitude:n}),!this.locationForm.get("locationName")?.value&&t.name&&this.locationForm.patchValue({locationName:t.name}),t.address_components&&this.extractAddressComponents(t.address_components)}})}))}extractAddressComponents(t){let e=this.getAddressComponent(t,["locality","administrative_area_level_2"]),n=this.getAddressComponent(t,["administrative_area_level_1"]),c=this.getAddressComponent(t,["country"]),m=this.getAddressComponent(t,["postal_code"]);this.locationForm.patchValue({city:e,state:n,country:c,postalCode:m})}getAddressComponent(t,e){for(let n of t)for(let c of e)if(n.types.includes(c))return n.long_name;return""}onAddressFocus(){this.autocomplete&&this.autocomplete.set("place",null)}onAddressInput(t){let n=t.target.value.match(/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/);if(n){let c=parseFloat(n[1]),m=parseFloat(n[2]);c>=-90&&c<=90&&m>=-180&&m<=180&&(this.locationForm.patchValue({latitude:c,longitude:m}),this.reverseGeocode(c,m))}}getCurrentLocation(){if(!navigator.geolocation){this.errorMessage="Geolocation is not supported by this browser.";return}this.isGettingLocation=!0,this.clearMessages(),navigator.geolocation.getCurrentPosition(t=>{this.ngZone.run(()=>{let e=t.coords.latitude,n=t.coords.longitude;this.locationForm.patchValue({latitude:e,longitude:n}),this.reverseGeocode(e,n),this.isGettingLocation=!1})},t=>{this.ngZone.run(()=>{this.isGettingLocation=!1;let e="Failed to get current location.";switch(t.code){case t.PERMISSION_DENIED:e="Location access denied by user.";break;case t.POSITION_UNAVAILABLE:e="Location information unavailable.";break;case t.TIMEOUT:e="Location request timed out.";break}this.errorMessage=e})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}reverseGeocode(t,e){if(!this.geocoder)return;let n=new google.maps.LatLng(t,e);this.geocoder.geocode({location:n},(c,m)=>{this.ngZone.run(()=>{if(m==="OK"&&c&&c[0]){let b=c[0];this.locationForm.patchValue({address:b.formatted_address}),b.address_components&&this.extractAddressComponents(b.address_components)}})})}clearAddress(){this.locationForm.patchValue({address:"",city:"",state:"",country:"",postalCode:"",latitude:null,longitude:null}),this.addressInputRef&&(this.addressInputRef.nativeElement.value="")}onCoordinateChange(){let t=this.locationForm.get("latitude")?.value,e=this.locationForm.get("longitude")?.value;t&&e&&this.isValidCoordinate(t,e)&&(clearTimeout(this.reverseGeocodeTimeout),this.reverseGeocodeTimeout=setTimeout(()=>{this.reverseGeocode(t,e)},1e3))}reverseGeocodeTimeout;isValidCoordinate(t,e){return t>=-90&&t<=90&&e>=-180&&e<=180}hasValidCoordinates(){let t=this.locationForm.get("latitude")?.value,e=this.locationForm.get("longitude")?.value;return t&&e&&this.isValidCoordinate(t,e)}previewLocation(){let t=this.locationForm.get("latitude")?.value,e=this.locationForm.get("longitude")?.value;if(t&&e){let n=`https://www.google.com/maps/@${t},${e},15z`;window.open(n,"_blank")}}viewLocationOnMap(t){if(t.latitude&&t.longitude){let e=`https://www.google.com/maps/@${t.latitude},${t.longitude},15z`;window.open(e,"_blank")}}loadLocations(){this.isLoadingLocations=!0,this.clearMessages(),this.locationService.getLocations(this.searchTerm,this.filterActive,this.currentPage,this.pageSize,this.sortColumn,this.sortDirection).subscribe({next:t=>{this.isLoadingLocations=!1,t.success&&(this.locations=t.data,this.totalCount=t.pagination.totalCount,this.totalPages=t.pagination.totalPages)},error:t=>{this.isLoadingLocations=!1,this.errorMessage="Failed to load locations",console.error("Load locations error:",t)}})}onSearch(){this.currentPage=1,this.loadLocations()}onSort(t){this.sortColumn===t?this.sortDirection=this.sortDirection==="ASC"?"DESC":"ASC":(this.sortColumn=t,this.sortDirection="ASC"),this.loadLocations()}onPageChange(t){this.currentPage=t,this.loadLocations()}onSubmit(){if(this.locationForm.valid){this.isLoading=!0,this.clearMessages();let t=this.locationForm.value,e={locationName:t.locationName,locationPrefix:t.locationPrefix.toUpperCase(),address:t.address,city:t.city,state:t.state,country:t.country,postalCode:t.postalCode,latitude:t.latitude,longitude:t.longitude,isActive:t.isActive};this.editingLocationId?(e.locationId=this.editingLocationId,this.locationService.updateLocation(this.editingLocationId,e).subscribe({next:n=>{this.isLoading=!1,n.success&&(this.successMessage="Location updated successfully!",this.resetForm(),this.loadLocations())},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.message||"Failed to update location",console.error("Update location error:",n)}})):this.locationService.createLocation(e).subscribe({next:n=>{this.isLoading=!1,n.success&&(this.successMessage="Location created successfully!",this.resetForm(),this.loadLocations())},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.message||"Failed to create location",console.error("Create location error:",n)}})}else Object.keys(this.locationForm.controls).forEach(t=>{this.locationForm.get(t)?.markAsTouched()})}editLocation(t){this.editingLocationId=t.locationId,this.locationForm.patchValue({locationName:t.locationName,locationPrefix:t.locationPrefix,address:t.address,city:t.city,state:t.state,country:t.country,postalCode:t.postalCode,latitude:t.latitude,longitude:t.longitude,isActive:t.isActive}),this.addressInputRef&&t.address&&(this.addressInputRef.nativeElement.value=t.address),document.querySelector(".location-form")?.scrollIntoView({behavior:"smooth"})}deleteLocation(t){let e=`Are you sure you want to delete "${t.locationName}"?

This action cannot be undone.`;confirm(e)&&this.locationService.deleteLocation(t.locationId).subscribe({next:n=>{n.success&&(this.successMessage="Location deleted successfully!",this.loadLocations())},error:n=>{this.errorMessage="Failed to delete location",console.error("Delete location error:",n)}})}resetForm(){this.locationForm.reset(),this.locationForm.patchValue({isActive:!0}),this.editingLocationId=null,this.addressInputRef&&(this.addressInputRef.nativeElement.value="")}clearMessages(){this.successMessage="",this.errorMessage=""}getPaginationNumbers(){let t=[],e=Math.max(1,this.currentPage-2),n=Math.min(this.totalPages,this.currentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}getSortIcon(t){return this.sortColumn!==t?"fas fa-sort":this.sortDirection==="ASC"?"fas fa-sort-up":"fas fa-sort-down"}trackByLocationId(t,e){return e.locationId}static \u0275fac=function(e){return new(e||r)(P(le),P(Ke),P(lt))};static \u0275cmp=S({type:r,selectors:[["app-location-master"]],viewQuery:function(e,n){if(e&1&&Ne(Hi,5),e&2){let c;De(c=Fe())&&(n.addressInputRef=c.first)}},decls:131,vars:41,consts:[["spacer1",""],["spacer2",""],["addressInput",""],["spacer3",""],["spacer4",""],[1,"location-management"],["class","alert alert-success alert-compact mb-3",4,"ngIf"],["class","alert alert-danger alert-compact mb-3",4,"ngIf"],[1,"location-form","card"],[1,"card-header"],[1,"card-title"],[1,"bi","bi-geo-alt","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-col"],[1,"form-label-compact"],["type","text","formControlName","locationName",1,"form-control","form-control-compact",3,"disabled"],[1,"error-space"],["class","error-text-compact",4,"ngIf","ngIfElse"],["type","text","formControlName","locationPrefix",1,"form-control","form-control-compact",2,"text-transform","uppercase",3,"disabled"],[1,"form-check-compact"],["type","checkbox","formControlName","isActive",1,"form-check-input",3,"disabled"],[1,"form-check-label-compact"],[1,"error-spacer"],[1,"form-col-full"],[1,"text-muted"],[1,"input-group"],["type","text","formControlName","address","placeholder","Search for places, addresses, landmarks...",1,"form-control","form-control-compact",3,"focus","input","disabled"],["type","button","title","Use current location",1,"btn","btn-outline-secondary","btn-compact",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],["class","bi bi-crosshair",4,"ngIf"],["type","button","title","Clear address",1,"btn","btn-outline-primary","btn-compact",3,"click","disabled"],[1,"bi","bi-x-lg"],["type","text","formControlName","city",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","state",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","country",1,"form-control","form-control-compact",3,"disabled"],["type","text","formControlName","postalCode",1,"form-control","form-control-compact",3,"disabled"],["type","number","step","0.000001","formControlName","latitude",1,"form-control","form-control-compact",3,"input","disabled"],["type","number","step","0.000001","formControlName","longitude",1,"form-control","form-control-compact",3,"input","disabled"],[1,"coordinate-preview"],["type","button","title","Preview location on map",1,"btn","btn-sm","btn-outline-info",3,"click","disabled"],[1,"bi","bi-map"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-compact",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-compact","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"locations-list","card","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"bi","bi-list","me-2"],[1,"d-flex","gap-2"],[1,"search-container"],["type","text","placeholder","Search locations...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-3"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-3"],[1,"bi","bi-exclamation-circle","me-2"],[1,"error-text-compact"],[1,"spinner-border","spinner-border-sm"],[1,"bi","bi-crosshair"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-gear","me-1"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-hover","table-compact"],[1,"table-light"],[1,"sortable",3,"click"],["width","140"],[3,"table-warning",4,"ngFor","ngForOf","ngForTrackBy"],[1,"badge","bg-secondary"],[1,"text-truncate",2,"max-width","200px",3,"title"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"btn-group","btn-group-sm"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs",3,"click"],[1,"bi","bi-pencil"],["type","button","title","View on Map",1,"btn","btn-outline-success","btn-xs",3,"click","disabled"],[1,"bi","bi-geo-alt"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs",3,"click"],[1,"bi","bi-trash"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-geo-alt","display-4","mb-2","d-block"],[1,"mt-3"],[1,"pagination","pagination-sm","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link",3,"click"]],template:function(e,n){if(e&1){let c=v();i(0,"div",5),_(1,Wi,4,1,"div",6)(2,Yi,4,1,"div",7),i(3,"div",8)(4,"div",9)(5,"h5",10),d(6,"i",11),s(7),o()(),i(8,"div",12)(9,"form",13),g("ngSubmit",function(){return u(c),f(n.onSubmit())}),i(10,"div",14)(11,"div",15)(12,"label",16),s(13,"Location Name *"),o(),d(14,"input",17),i(15,"div",18),_(16,Qi,2,0,"div",19)(17,Ki,1,0,"ng-template",null,0,ie),o()(),i(19,"div",15)(20,"label",16),s(21,"Location Prefix *"),o(),d(22,"input",20),i(23,"div",18),_(24,Ji,2,0,"div",19)(25,Zi,1,0,"ng-template",null,1,ie),o()(),i(27,"div",15)(28,"div",21),d(29,"input",22),i(30,"label",23),s(31,"Active Status"),o()(),i(32,"div",18),d(33,"div",24),o()()(),i(34,"div",14)(35,"div",25)(36,"label",16),s(37," Address "),i(38,"small",26),s(39,"(Start typing to search with Google Places)"),o()(),i(40,"div",27)(41,"input",28,2),g("focus",function(){return u(c),f(n.onAddressFocus())})("input",function(b){return u(c),f(n.onAddressInput(b))}),o(),i(43,"button",29),g("click",function(){return u(c),f(n.getCurrentLocation())}),_(44,Xi,1,0,"span",30)(45,eo,1,0,"i",31),o(),i(46,"button",32),g("click",function(){return u(c),f(n.clearAddress())}),d(47,"i",33),o()(),i(48,"div",18)(49,"small",26),s(50," Try searching for: restaurants, hotels, landmarks, or enter a complete address "),o()()()(),i(51,"div",14)(52,"div",15)(53,"label",16),s(54,"City"),o(),d(55,"input",34),i(56,"div",18),d(57,"div",24),o()(),i(58,"div",15)(59,"label",16),s(60,"State"),o(),d(61,"input",35),i(62,"div",18),d(63,"div",24),o()(),i(64,"div",15)(65,"label",16),s(66,"Country"),o(),d(67,"input",36),i(68,"div",18),d(69,"div",24),o()(),i(70,"div",15)(71,"label",16),s(72,"Postal Code"),o(),d(73,"input",37),i(74,"div",18),d(75,"div",24),o()()(),i(76,"div",14)(77,"div",15)(78,"label",16),s(79,"Latitude"),o(),i(80,"input",38),g("input",function(){return u(c),f(n.onCoordinateChange())}),o(),i(81,"div",18),_(82,to,2,0,"div",19)(83,no,1,0,"ng-template",null,3,ie),o()(),i(85,"div",15)(86,"label",16),s(87,"Longitude"),o(),i(88,"input",39),g("input",function(){return u(c),f(n.onCoordinateChange())}),o(),i(89,"div",18),_(90,io,2,0,"div",19)(91,oo,1,0,"ng-template",null,4,ie),o()(),i(93,"div",15)(94,"label",16),s(95,"Location Preview"),o(),i(96,"div",40)(97,"button",41),g("click",function(){return u(c),f(n.previewLocation())}),d(98,"i",42),s(99," Preview Map "),o()()(),d(100,"div",15),o(),i(101,"div",43)(102,"button",44),_(103,ro,1,0,"span",45)(104,ao,2,1,"span",46)(105,so,3,1,"span",46),o(),i(106,"button",47),g("click",function(){return u(c),f(n.resetForm())}),d(107,"i",48),s(108,"Cancel "),o()()()()(),i(109,"div",49)(110,"div",9)(111,"div",50)(112,"h5",10),d(113,"i",51),s(114),o(),i(115,"div",52)(116,"div",53)(117,"input",54),T("ngModelChange",function(b){return u(c),E(n.searchTerm,b)||(n.searchTerm=b),f(b)}),g("keyup.enter",function(){return u(c),f(n.onSearch())}),o(),i(118,"button",55),g("click",function(){return u(c),f(n.onSearch())}),d(119,"i",56),o()(),i(120,"select",57),T("ngModelChange",function(b){return u(c),E(n.filterActive,b)||(n.filterActive=b),f(b)}),g("change",function(){return u(c),f(n.onSearch())}),i(121,"option",58),s(122,"All Status"),o(),i(123,"option",58),s(124,"Active Only"),o(),i(125,"option",58),s(126,"Inactive Only"),o()()()()(),i(127,"div",12),_(128,co,6,0,"div",59)(129,uo,28,13,"div",60)(130,_o,15,13,"nav",61),o()()()}if(e&2){let c,m,b,x,y=Y(18),A=Y(26),Z=Y(84),me=Y(92);a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(5),C(" ",n.editingLocationId?"Edit Location":"Add New Location"," "),a(2),l("formGroup",n.locationForm),a(5),l("disabled",n.isLoading),a(2),l("ngIf",((c=n.locationForm.get("locationName"))==null?null:c.invalid)&&((c=n.locationForm.get("locationName"))==null?null:c.touched))("ngIfElse",y),a(6),l("disabled",n.isLoading),a(2),l("ngIf",((m=n.locationForm.get("locationPrefix"))==null?null:m.invalid)&&((m=n.locationForm.get("locationPrefix"))==null?null:m.touched))("ngIfElse",A),a(5),l("disabled",n.isLoading),a(12),l("disabled",n.isLoading),a(2),l("disabled",n.isLoading||n.isGettingLocation),a(),l("ngIf",n.isGettingLocation),a(),l("ngIf",!n.isGettingLocation),a(),l("disabled",n.isLoading),a(9),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(6),l("disabled",n.isLoading),a(7),l("disabled",n.isLoading),a(2),l("ngIf",((b=n.locationForm.get("latitude"))==null?null:b.invalid)&&((b=n.locationForm.get("latitude"))==null?null:b.touched))("ngIfElse",Z),a(6),l("disabled",n.isLoading),a(2),l("ngIf",((x=n.locationForm.get("longitude"))==null?null:x.invalid)&&((x=n.locationForm.get("longitude"))==null?null:x.touched))("ngIfElse",me),a(7),l("disabled",!n.hasValidCoordinates()),a(5),l("disabled",n.locationForm.invalid||n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("disabled",n.isLoading),a(8),C(" Locations (",n.totalCount,") "),a(3),I("ngModel",n.searchTerm),a(3),I("ngModel",n.filterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoadingLocations),a(),l("ngIf",!n.isLoadingLocations),a(),l("ngIf",n.totalPages>1)}},dependencies:[k,ue,N,L,mt,fe,z,te,he,ve,$,be,_e,Ce,U,ee,K,de,se,ce],styles:[".location-management[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:.75rem}.form-col[_ngcontent-%COMP%]{flex:1;min-width:0}.form-col-full[_ngcontent-%COMP%]{flex:1 1 100%}.form-label-compact[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.25rem;font-weight:500;display:block;color:#495057}.form-control-compact[_ngcontent-%COMP%]{padding:.35rem .5rem;font-size:.8rem;height:32px;line-height:1.2;border:1px solid #ced4da;border-radius:.25rem}.form-control-compact[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.form-control-compact[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-check-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.25rem}.form-check-input[_ngcontent-%COMP%]{width:1rem;height:1rem}.form-check-label-compact[_ngcontent-%COMP%]{font-size:.8rem;margin:0;color:#495057}.error-space[_ngcontent-%COMP%]{height:16px;margin-top:.2rem}.error-text-compact[_ngcontent-%COMP%]{font-size:.7rem;color:#dc3545;line-height:1.2;height:16px;display:flex;align-items:center}.error-spacer[_ngcontent-%COMP%]{height:16px}.btn-compact[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.8rem;height:32px;line-height:1.2}.btn-xs[_ngcontent-%COMP%]{padding:.2rem .4rem;font-size:.7rem;line-height:1}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #dee2e6}.card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:.75rem 1rem}.card-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1rem}.search-container[_ngcontent-%COMP%]{position:relative;display:flex}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0;width:200px}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.table-compact[_ngcontent-%COMP%]{font-size:.85rem}.table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;vertical-align:middle}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.25rem;opacity:.5}.table-warning[_ngcontent-%COMP%]{background-color:#ffc1071a!important}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.85rem;border-radius:.25rem;position:relative}.btn-close-sm[_ngcontent-%COMP%]{padding:.2rem;font-size:.7rem}.badge[_ngcontent-%COMP%]{font-size:.7rem}.pagination-sm[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}@media (max-width: 992px){.form-row[_ngcontent-%COMP%]{flex-wrap:wrap}.form-row[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{flex-basis:calc(50% - .5rem)}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px}}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{flex-basis:100%}.card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem;align-items:stretch!important}.search-container[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.table-responsive[_ngcontent-%COMP%]{font-size:.75rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:.8rem;height:.8rem}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})};var Ze=class r{constructor(t){this.http=t}baseUrl=`${D.apiBaseUrl}/stopover`;getStepOvers(t,e=1,n=10){let c=new pe().set("page",e.toString()).set("pageSize",n.toString());return t!==void 0&&(c=c.set("isActive",t.toString())),this.http.get(this.baseUrl,{params:c})}getStepOver(t){return this.http.get(`${this.baseUrl}/${t}`)}createStepOver(t){return this.http.post(this.baseUrl,t)}updateStepOver(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deleteStepOver(t){return this.http.delete(`${this.baseUrl}/${t}`)}searchNearby(t,e,n=5){let c=new pe().set("latitude",t.toString()).set("longitude",e.toString()).set("radiusKm",n.toString());return this.http.get(`${this.baseUrl}/search/nearby`,{params:c})}addTenantsToStepOver(t,e){return this.http.post(`${this.baseUrl}/${t}/tenants`,e)}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var kt=class r{constructor(t){this.http=t}baseUrl=D.apiUrl;apiUrl=`${D.apiBaseUrl}/routes`;getRoutes(t,e=1,n=10,c,m){let b=new pe().set("page",e.toString()).set("pageSize",n.toString());return t!==void 0&&(b=b.set("isActive",t.toString())),c&&(b=b.set("searchTerm",c)),m&&(b=b.set("stepOverId",m.toString())),this.http.get(this.apiUrl,{params:b})}getRoute(t){return this.http.get(`${this.apiUrl}/${t}`)}createRoute(t){return this.http.post(this.apiUrl,t)}updateRoute(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteRoute(t){return this.http.delete(`${this.apiUrl}/${t}`)}getRoutesByStepOver(t){return this.http.get(`${this.apiUrl}/search/stepover/${t}`)}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var It=class r{constructor(){}calculateStraightLineDistance(t,e){let c=this.degToRad(t.latitude),m=this.degToRad(e.latitude),b=this.degToRad(e.latitude-t.latitude),x=this.degToRad(e.longitude-t.longitude),y=Math.sin(b/2)*Math.sin(b/2)+Math.cos(c)*Math.cos(m)*Math.sin(x/2)*Math.sin(x/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}calculateDrivingDistanceAndTime(t,e,n="DRIVING"){return!google||!google.maps?Se("Google Maps API not loaded"):new Ut(c=>{let m=new google.maps.DistanceMatrixService,b=t.map(y=>new google.maps.LatLng(y.latitude,y.longitude)),x=e.map(y=>new google.maps.LatLng(y.latitude,y.longitude));m.getDistanceMatrix({origins:b,destinations:x,travelMode:google.maps.TravelMode[n],unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(y,A)=>{if(A==="OK"){let Z=[];y.rows.forEach((me,Le)=>{let Ae=[];me.elements.forEach((W,Ul)=>{if(W.status==="OK"){let On=W.distance.value/1e3,Pn=W.duration.value/3600,xn=this.formatDuration(W.duration.value);Ae.push({distance:{text:W.distance.text,value:W.distance.value,km:Math.round(On*100)/100},duration:{text:W.duration.text,value:W.duration.value,hours:Math.round(Pn*100)/100,formatted:xn},status:W.status})}else Ae.push({distance:{text:"N/A",value:0,km:0},duration:{text:"N/A",value:0,hours:0,formatted:"N/A"},status:W.status})}),Z.push(Ae)}),c.next(Z),c.complete()}else c.error(`Distance Matrix API error: ${A}`)})})}calculateRouteWithWaypoints(t,e,n=[],c="DRIVING"){return!google||!google.maps?Se("Google Maps API not loaded"):new Ut(m=>{let b=new google.maps.DirectionsService,x=n.map(y=>({location:new google.maps.LatLng(y.latitude,y.longitude),stopover:!0}));b.route({origin:new google.maps.LatLng(t.latitude,t.longitude),destination:new google.maps.LatLng(e.latitude,e.longitude),waypoints:x,travelMode:google.maps.TravelMode[c],unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(y,A)=>{if(A==="OK"){let Z=y.routes[0],me=0,Le=0,Ae=Z.legs.map(W=>(me+=W.distance.value,Le+=W.duration.value,{startAddress:W.start_address,endAddress:W.end_address,distance:{text:W.distance.text,value:W.distance.value,km:Math.round(W.distance.value/1e3*100)/100},duration:{text:W.duration.text,value:W.duration.value,hours:Math.round(W.duration.value/3600*100)/100,formatted:this.formatDuration(W.duration.value)}}));m.next({totalDistance:Math.round(me/1e3*100)/100,totalDuration:Math.round(Le/3600*100)/100,legs:Ae}),m.complete()}else m.error(`Directions API error: ${A}`)})})}estimateTravelTime(t,e=50){let n=t/e;return{hours:Math.round(n*100)/100,formatted:this.formatDuration(n*3600)}}calculateSequentialWaypointDistances(t){if(t.length<2)return{totalDistance:0,segments:[]};let e=0,n=[];for(let c=0;c<t.length-1;c++){let m=this.calculateStraightLineDistance(t[c],t[c+1]);n.push({from:c,to:c+1,distance:Math.round(m*100)/100}),e+=m}return{totalDistance:Math.round(e*100)/100,segments:n}}degToRad(t){return t*(Math.PI/180)}formatDuration(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60);return e===0?`${n}m`:n===0?`${e}h`:`${e}h ${n}m`}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function ho(r,t){if(r&1){let e=v();i(0,"div",56),d(1,"i",57),i(2,"span",58),s(3),o(),i(4,"button",59),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.successMessage)}}function vo(r,t){if(r&1){let e=v();i(0,"div",60),d(1,"i",61),i(2,"span",58),s(3),o(),i(4,"button",59),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.errorMessage)}}function Mo(r,t){r&1&&(i(0,"div",62),s(1," Route name is required "),o())}function Oo(r,t){if(r&1&&(i(0,"option",63),s(1),o()),r&2){let e=t.$implicit;l("value",e.locationId),a(),C(" ",e.locationName," ")}}function Po(r,t){r&1&&(i(0,"div",64),d(1,"i",65),s(2,"Loading locations... "),o())}function xo(r,t){r&1&&(i(0,"div",62),s(1," Start location is required "),o())}function yo(r,t){if(r&1&&(i(0,"option",63),s(1),o()),r&2){let e=t.$implicit;l("value",e.locationId),a(),C(" ",e.locationName," ")}}function So(r,t){r&1&&(i(0,"div",62),s(1," End location is required "),o())}function wo(r,t){r&1&&(i(0,"div",62),s(1," Distance must be positive "),o())}function ko(r,t){if(r&1&&(i(0,"option",63),s(1),o()),r&2){let e=t.$implicit;l("value",e.stepOverId),a(),C(" ",e.stepOverName," ")}}function Io(r,t){r&1&&(i(0,"div",64),d(1,"i",65),s(2,"Loading step overs... "),o())}function Eo(r,t){if(r&1){let e=v();i(0,"div",66)(1,"div",67)(2,"div",68)(3,"label",11),s(4),o(),i(5,"select",69),g("change",function(){u(e);let c=p();return f(c.onStepOverLocationChange())}),i(6,"option",15),s(7,"Select Step Over"),o(),_(8,ko,2,2,"option",16),o()(),i(9,"div",70)(10,"label",11),s(11,"Distance (km)"),o(),d(12,"input",71),i(13,"small",72),s(14,"From previous point"),o()(),i(15,"div",70)(16,"label",11),s(17,"Time (minutes)"),o(),d(18,"input",73),i(19,"small",72),s(20,"Est. travel time"),o()(),i(21,"div",74)(22,"button",75),g("click",function(){let c=u(e).index,m=p();return f(m.removeStepOver(c))}),d(23,"i",76),o()()(),_(24,Io,3,0,"div",17),o()}if(r&2){let e=t.index,n=p();l("formGroupName",e),a(4),C("Step Over ",e+1,""),a(),l("disabled",n.isSubmitting||n.isLoadingStepOvers),a(3),l("ngForOf",n.stepOvers)("ngForTrackBy",n.trackByStepOverId),a(14),l("disabled",n.isSubmitting),a(2),l("ngIf",n.isLoadingStepOvers)}}function To(r,t){r&1&&(i(0,"div",77),d(1,"i",78),i(2,"p",79),s(3,"No step overs added"),o(),i(4,"small",40),s(5,'Click "Add Step Over" to add stops with distance calculation'),o()())}function Lo(r,t){r&1&&d(0,"span",65)}function Ao(r,t){if(r&1&&(i(0,"span",40),s(1),o()),r&2){let e=p();a(),C(" ",e.editingRouteId?"Updating...":"Saving..."," ")}}function Ro(r,t){if(r&1&&(i(0,"span",40),d(1,"i",80),s(2),o()),r&2){let e=p();a(2),C("",e.editingRouteId?"Update":"Save"," Route ")}}function No(r,t){r&1&&(i(0,"div",81),d(1,"div",82),i(2,"div",83),s(3,"Loading routes..."),o()())}function Do(r,t){if(r&1&&(i(0,"div",99),s(1),o()),r&2){let e=p().$implicit,n=p(2);a(),C(" ",n.getStepOverNames(e)," ")}}function Fo(r,t){if(r&1){let e=v();i(0,"tr")(1,"td",91)(2,"strong",40),s(3),o()(),i(4,"td",91)(5,"div",40),s(6),o()(),i(7,"td",91)(8,"span",40),s(9),o()(),i(10,"td",91)(11,"span",40),s(12),o()(),i(13,"td",91)(14,"span",92),s(15),o(),_(16,Do,2,1,"div",93),o(),i(17,"td",91)(18,"span",94),d(19,"i"),s(20),o()(),i(21,"td",91)(22,"small",40),s(23),ne(24,"date"),o()(),i(25,"td",91)(26,"div",95)(27,"button",96),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editRoute(c))}),d(28,"i",97),o(),i(29,"button",98),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteRoute(c))}),d(30,"i",76),o()()()()}if(r&2){let e=t.$implicit,n=p(2);M("table-warning",!e.isActive),a(3),h(e.routeName),a(3),q(" ",e.startLocation.name," \u2192 ",e.endLocation.name," "),a(3),C("",e.distanceKm," km"),a(3),h(e.estimatedTime||"N/A"),a(3),h((e.stepOvers==null?null:e.stepOvers.length)||0),a(),l("ngIf",n.hasStepOvers(e)),a(2),l("ngClass",e.isActive?"bg-success":"bg-danger"),a(),R(e.isActive?"bi bi-check":"bi bi-x"),a(),C(" ",e.isActive?"Active":"Inactive"," "),a(3),h(ae(24,14,e.createdDate,"short"))}}function Vo(r,t){r&1&&(i(0,"tr")(1,"td",100),d(2,"i",101),i(3,"div",58),s(4,"No routes found"),o()()())}function zo(r,t){if(r&1&&(i(0,"div",84)(1,"table",85)(2,"thead",86)(3,"tr")(4,"th",87),s(5,"Route Name"),o(),i(6,"th",87),s(7,"Start \u2192 End"),o(),i(8,"th",87),s(9,"Distance"),o(),i(10,"th",87),s(11,"Est. Time"),o(),i(12,"th",87),s(13,"Step Overs"),o(),i(14,"th",87),s(15,"Status"),o(),i(16,"th",87),s(17,"Created"),o(),i(18,"th",88),s(19,"Actions"),o()()(),i(20,"tbody"),_(21,Fo,31,17,"tr",89)(22,Vo,5,0,"tr",90),o()()()),r&2){let e=p();a(21),l("ngForOf",e.routes)("ngForTrackBy",e.trackByRouteId),a(),l("ngIf",e.routes.length===0)}}function Bo(r,t){if(r&1){let e=v();i(0,"li",104)(1,"button",111),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onRoutePageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.routeCurrentPage),a(2),h(e)}}function jo(r,t){if(r&1){let e=v();i(0,"nav",102)(1,"ul",103)(2,"li",104)(3,"button",105),g("click",function(){u(e);let c=p();return f(c.onRoutePageChange(1))}),d(4,"i",106),o()(),i(5,"li",104)(6,"button",105),g("click",function(){u(e);let c=p();return f(c.onRoutePageChange(c.routeCurrentPage-1))}),d(7,"i",107),o()(),_(8,Bo,3,3,"li",108),i(9,"li",104)(10,"button",105),g("click",function(){u(e);let c=p();return f(c.onRoutePageChange(c.routeCurrentPage+1))}),d(11,"i",109),o()(),i(12,"li",104)(13,"button",105),g("click",function(){u(e);let c=p();return f(c.onRoutePageChange(c.routeTotalPages))}),d(14,"i",110),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.routeCurrentPage<=1),a(),l("disabled",e.routeCurrentPage<=1),a(2),M("disabled",e.routeCurrentPage<=1),a(),l("disabled",e.routeCurrentPage<=1),a(2),l("ngForOf",e.getRoutePaginationNumbers()),a(),M("disabled",e.routeCurrentPage>=e.routeTotalPages),a(),l("disabled",e.routeCurrentPage>=e.routeTotalPages),a(2),M("disabled",e.routeCurrentPage>=e.routeTotalPages),a(),l("disabled",e.routeCurrentPage>=e.routeTotalPages)}}var Xe=class r{constructor(t,e,n,c,m){this.fb=t;this.locationService=e;this.stepOverService=n;this.routeService=c;this.distanceCalculationService=m}routeForm;isCalculatingDistance=!1;locations=[];stepOvers=[];routes=[];isLoadingLocations=!1;isLoadingStepOvers=!1;isLoadingRoutes=!1;isSubmitting=!1;successMessage="";errorMessage="";editingRouteId=null;searchTerm="";filterActive;currentPage=1;pageSize=100;sortColumn="locationName";sortDirection="ASC";totalCount=0;totalPages=0;routeCurrentPage=1;routePageSize=10;routeTotalCount=0;routeTotalPages=0;routeSearchTerm="";routeFilterActive;destroy$=new B;ngOnInit(){this.initializeForm(),this.loadLocations(),this.loadStepOvers(),this.loadRoutes()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.routeForm=this.fb.group({routeName:["",[O.required,O.maxLength(255)]],startLocationId:["",O.required],endLocationId:["",O.required],distance:["",[O.min(0)]],estimatedTime:["",O.maxLength(50)],isActive:[!0],stepOvers:this.fb.array([])}),console.log("Form initialized")}get stepOversArray(){return this.routeForm.get("stepOvers")}loadRoutes(){this.isLoadingRoutes=!0,this.clearMessages(),this.routeService.getRoutes(this.routeFilterActive,this.routeCurrentPage,this.routePageSize,this.routeSearchTerm).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingRoutes=!1,t.success&&t.data&&(this.routes=t.data,this.routeTotalCount=t.totalCount||0,this.routeTotalPages=t.totalPages||0,console.log("Routes loaded:",this.routes))},error:t=>{this.isLoadingRoutes=!1,this.errorMessage="Failed to load routes",console.error("Load routes error:",t)}})}loadLocations(){this.isLoadingLocations=!0,this.locationService.getLocations(this.searchTerm,this.filterActive,this.currentPage,this.pageSize,this.sortColumn,this.sortDirection).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingLocations=!1,console.log("Location API Response:",t),t?.success&&t?.data?(this.locations=t.data.filter(e=>e.isActive),console.log("Processed Locations for dropdown:",this.locations)):(console.error("Invalid location response format:",t),this.locations=[])},error:t=>{this.isLoadingLocations=!1,this.errorMessage="Failed to load locations",console.error("Load locations error:",t)}})}loadStepOvers(){this.isLoadingStepOvers=!0,console.log("Loading step overs..."),this.stepOverService.getStepOvers(!0,1,100).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingStepOvers=!1,console.log("StepOver API Response:",t),t?.data&&Array.isArray(t.data)?(this.stepOvers=t.data.filter(e=>e.isActive===!0).map(e=>({stepOverId:e.stepOverId,stepOverName:e.stepOverName,address:e.address,latitude:e.latitude,longitude:e.longitude,isActive:e.isActive,createdDate:e.createdDate,updatedDate:e.updatedDate,tenants:e.tenants||[]})),console.log("Processed StepOvers for dropdown:",this.stepOvers),this.stepOvers.length===0&&console.warn("No active step overs found")):(console.error("Invalid stepover response format:",t),this.stepOvers=[])},error:t=>{this.isLoadingStepOvers=!1,console.error("StepOver loading error:",t),this.stepOvers=[]}})}onStepOverLocationChange(){let t=this.routeForm.get("startLocationId")?.value,e=this.routeForm.get("endLocationId")?.value;t&&e&&t!==e&&this.calculateAndAddStepOverLocation(t)}calculateAndAddStepOverLocation(t){let e=this.locations.find(n=>n.locationId===parseInt(t))}onLocationSelectionChange(){let t=this.routeForm.get("startLocationId")?.value,e=this.routeForm.get("endLocationId")?.value;t&&e&&t!==e&&this.calculateRouteDistanceAndTime()}calculateRouteDistanceAndTime(){let t=parseInt(this.routeForm.get("startLocationId")?.value),e=parseInt(this.routeForm.get("endLocationId")?.value),n=this.locations.find(y=>y.locationId===t),c=this.locations.find(y=>y.locationId===e);if(!n||!c)return;this.isCalculatingDistance=!0,this.clearMessages();let m={latitude:n.latitude,longitude:n.longitude},b={latitude:c.latitude,longitude:c.longitude},x=[];this.stepOversArray.controls.forEach(y=>{let A=parseInt(y.get("stepOverId")?.value);if(A){let Z=this.stepOvers.find(me=>me.stepOverId===A);Z&&x.push({latitude:Z.latitude,longitude:Z.longitude})}}),this.calculateStraightLineDistance(m,b,x)}calculateStraightLineDistance(t,e,n){let c=0,m=[t,...n,e];for(let x=0;x<m.length-1;x++){let y=this.distanceCalculationService.calculateStraightLineDistance(m[x],m[x+1]);c+=y}let b=this.distanceCalculationService.estimateTravelTime(c,50);this.routeForm.patchValue({distance:Math.round(c*100)/100,estimatedTime:b.formatted}),this.isCalculatingDistance=!1,this.successMessage=`Distance: ${Math.round(c*100)/100} km, Estimated time: ${b.formatted}`}addStepOver(){let t=this.fb.group({stepOverId:[""]});this.stepOversArray.push(t),console.log("Added stepOver, total count:",this.stepOversArray.length)}removeStepOver(t){console.log(`Removing stepOver at index ${t}`),this.stepOversArray.removeAt(t),this.stepOversArray.length===0&&this.addStepOver(),console.log("After removal, total count:",this.stepOversArray.length)}getLocationName(t){let e=this.locations.find(n=>n.locationId===t);return e?e.locationName:""}getStepOverName(t){console.log(`Looking for stepOver with ID: ${t}`),console.log("Available stepOvers:",this.stepOvers.map(c=>({id:c.stepOverId,name:c.stepOverName})));let e=this.stepOvers.find(c=>c.stepOverId===t),n=e?e.stepOverName:"";return console.log(`StepOver name result: "${n}"`),n}getLatLng(t){console.log(`Looking for stepOver with ID: ${t}`),console.log("Available stepOvers:",this.stepOvers.map(c=>({id:c.stepOverId,name:c.stepOverName,lat:c.latitude,lng:c.longitude})));let e=this.stepOvers.find(c=>c.stepOverId===t),n=e?{lat:e.latitude,lng:e.longitude}:null;return console.log("StepOver lat/lng result:",n),n}validateForm(){if(this.routeForm.invalid)return this.markFormGroupTouched(this.routeForm),!1;let t=this.routeForm.get("startLocationId")?.value,e=this.routeForm.get("endLocationId")?.value;return t===e?(this.errorMessage="Start and End locations cannot be the same",!1):!0}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let n=t.get(e);n instanceof sn||n instanceof mn?this.markFormGroupTouched(n):n?.markAsTouched({onlySelf:!0})})}onSubmit(){if(!this.validateForm())return;this.isSubmitting=!0,this.clearMessages();let t=this.routeForm.value;console.log("Raw form value:",t),console.log("StepOvers form array value:",t.stepOvers),this.stepOversArray.controls.forEach((m,b)=>{console.log(`StepOver ${b}:`,m.value),console.log(`StepOver ${b} valid:`,m.valid),console.log(`StepOver ${b} stepOverId:`,m.get("stepOverId")?.value)});let e=t.stepOvers.map((m,b)=>{if(console.log(`Processing stepOver ${b}:`,m),console.log(`stepOverId: "${m.stepOverId}", type: ${typeof m.stepOverId}`),m.stepOverId&&m.stepOverId!==""){let x=parseInt(m.stepOverId),y=this.getStepOverName(x);return console.log(`Found stepOver: ID=${x}, Name="${y}"`),{id:x,name:y,latitude:this.getLatLng(x)?.lat||0,longitude:this.getLatLng(x)?.lng||0,distance:0,time:0}}else return console.log(`Skipping empty stepOver ${b}`),null}).filter(m=>m!==null);console.log("Processed stepOvers:",e);let n={routeName:t.routeName,startLocation:{id:parseInt(t.startLocationId),name:this.getLocationName(parseInt(t.startLocationId))},endLocation:{id:parseInt(t.endLocationId),name:this.getLocationName(parseInt(t.endLocationId))},distance:t.distance?parseFloat(t.distance):0,estimatedTime:t.estimatedTime||"",isActive:t.isActive,stepOvers:e};console.log("Final Route Data to Save:",n),(this.editingRouteId?this.routeService.updateRoute(this.editingRouteId,n):this.routeService.createRoute(n)).pipe(w(this.destroy$)).subscribe({next:m=>{this.isSubmitting=!1,console.log("API Response:",m),m.success?(this.successMessage=this.editingRouteId?`Route "${n.routeName}" updated successfully!`:`Route "${n.routeName}" created successfully!`,this.resetForm(),this.loadRoutes()):this.errorMessage=m.message||"Failed to save route"},error:m=>{this.isSubmitting=!1,this.errorMessage=m.error?.message||"Failed to save route",console.error("Save route error:",m)}})}editRoute(t){for(this.editingRouteId=t.routeId,this.routeForm.patchValue({routeName:t.routeName,startLocationId:t.startLocation.id,endLocationId:t.endLocation.id,distance:t.distanceKm,estimatedTime:t.estimatedTime,isActive:t.isActive});this.stepOversArray.length!==0;)this.stepOversArray.removeAt(0);t.stepOvers&&t.stepOvers.length>0?t.stepOvers.forEach(e=>{let n=this.fb.group({stepOverId:[e.id]});this.stepOversArray.push(n)}):this.addStepOver(),document.querySelector(".route-form")?.scrollIntoView({behavior:"smooth"})}deleteRoute(t){let e=`Are you sure you want to delete route "${t.routeName}"?

This action cannot be undone.`;confirm(e)&&this.routeService.deleteRoute(t.routeId).pipe(w(this.destroy$)).subscribe({next:n=>{n.success?(this.successMessage=`Route "${t.routeName}" deleted successfully!`,this.loadRoutes()):this.errorMessage=n.message||"Failed to delete route"},error:n=>{this.errorMessage=n.error?.message||"Failed to delete route",console.error("Delete route error:",n)}})}resetForm(){for(this.routeForm.reset(),this.routeForm.patchValue({isActive:!0}),this.editingRouteId=null;this.stepOversArray.length!==0;)this.stepOversArray.removeAt(0);this.addStepOver(),this.clearMessages()}onRoutePageChange(t){this.routeCurrentPage=t,this.loadRoutes()}onRouteSearch(){this.routeCurrentPage=1,this.loadRoutes()}getRoutePaginationNumbers(){let t=[],e=Math.max(1,this.routeCurrentPage-2),n=Math.min(this.routeTotalPages,this.routeCurrentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}clearMessages(){this.successMessage="",this.errorMessage=""}trackByLocationId(t,e){return e.locationId}trackByStepOverId(t,e){return e.stepOverId}trackByRouteId(t,e){return e.routeId}trackByIndex(t){return t}getStepOverCount(t){return t.stepOvers?.length||0}hasStepOvers(t){return t.stepOvers&&t.stepOvers.length>0}getStepOverNames(t){return!t.stepOvers||t.stepOvers.length===0?"":t.stepOvers.filter(e=>e&&e.name).map(e=>e.name).join(", ")}static \u0275fac=function(e){return new(e||r)(P(le),P(Ke),P(Ze),P(kt),P(It))};static \u0275cmp=S({type:r,selectors:[["app-route-master"]],decls:93,vars:38,consts:[[1,"route-master-container"],["class","alert alert-success alert-compact mb-2",4,"ngIf"],["class","alert alert-danger alert-compact mb-2",4,"ngIf"],[1,"route-form","card"],[1,"card-header","py-2"],[1,"card-title","mb-0","small"],[1,"bi","bi-map","me-1"],[1,"card-body","py-2"],[3,"ngSubmit","formGroup"],[1,"form-grid","mb-3"],[1,"form-group"],[1,"form-label","text-xs"],["type","text","formControlName","routeName","placeholder","Enter route name",1,"form-control","form-control-sm","text-xs",3,"disabled"],["class","text-danger text-xs mt-1",4,"ngIf"],["formControlName","startLocationId",1,"form-select","form-select-sm","text-xs",3,"change","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-muted text-xs mt-1",4,"ngIf"],["formControlName","endLocationId",1,"form-select","form-select-sm","text-xs",3,"change","disabled"],["type","number","step","0.1","min","0","formControlName","distance","placeholder","0.0",1,"form-control","form-control-sm","text-xs",3,"disabled"],["type","text","formControlName","estimatedTime","placeholder","e.g., 2h 30m",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"form-check","mt-3"],["type","checkbox","formControlName","isActive",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"form-check-label","text-xs"],[1,"stepover-section"],[1,"section-header","mb-2"],[1,"section-title","text-xs"],[1,"bi","bi-geo-alt","me-1"],[1,"badge","badge-sm","bg-secondary","ms-2"],["type","button","title","Add Step Over",1,"btn","btn-success","btn-xs",3,"click","disabled"],[1,"bi","bi-plus"],["formArrayName","stepOvers",1,"stepover-list"],["class","stepover-item mb-2 p-2 border rounded bg-light",3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-stepover text-center py-3 text-muted",4,"ngIf"],[1,"form-actions","mt-3","pt-2","border-top"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-xs",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"text-xs"],[1,"routes-list","card","mt-3"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap"],[1,"bi","bi-list","me-1"],[1,"badge","badge-sm","bg-primary"],[1,"d-flex","gap-2","flex-wrap"],[1,"input-group","input-group-sm",2,"width","200px"],["type","text","placeholder","Search routes...",1,"form-control","text-xs",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-primary","btn-sm","px-2",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm","text-xs",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[1,"card-body","p-0"],["class","text-center py-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-2 px-3 pb-2",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-2"],[1,"bi","bi-check-circle","me-1"],[1,"small"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-2"],[1,"bi","bi-exclamation-circle","me-1"],[1,"text-danger","text-xs","mt-1"],[3,"value"],[1,"text-muted","text-xs","mt-1"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"stepover-item","mb-2","p-2","border","rounded","bg-light",3,"formGroupName"],[1,"row","g-2","align-items-end"],[1,"col-md-4"],["formControlName","stepOverId",1,"form-select","form-select-sm","text-xs",3,"change","disabled"],[1,"col-md-3"],["type","number","formControlName","distance","readonly","","placeholder","Auto-calculated",1,"form-control","form-control-sm","text-xs","bg-light"],[1,"text-muted","text-xs"],["type","number","formControlName","time","readonly","","placeholder","Auto-calculated",1,"form-control","form-control-sm","text-xs","bg-light"],[1,"col-md-2"],["type","button","title","Remove Step Over",1,"btn","btn-outline-danger","btn-xs","w-100",3,"click","disabled"],[1,"bi","bi-trash"],[1,"empty-stepover","text-center","py-3","text-muted"],[1,"bi","bi-geo-alt","display-6","mb-1","d-block"],[1,"mb-0","small"],[1,"bi","bi-save","me-1"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-1","small"],[1,"table-responsive"],[1,"table","table-hover","table-sm","table-compact","mb-0"],[1,"table-light"],[1,"py-2","text-xs"],["width","120",1,"py-2","text-xs"],[3,"table-warning",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"py-2"],[1,"badge","badge-sm","bg-info"],["class","text-xs text-muted mt-1",4,"ngIf"],[1,"badge","badge-sm",3,"ngClass"],[1,"btn-group","btn-group-sm"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs","px-1",3,"click"],[1,"bi","bi-pencil"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs","px-1",3,"click"],[1,"text-xs","text-muted","mt-1"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-map","display-4","mb-2","d-block"],[1,"mt-2","px-3","pb-2"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link","px-2","py-1","text-xs",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link","px-2","py-1","text-xs",3,"click"]],template:function(e,n){if(e&1&&(i(0,"div",0),_(1,ho,5,1,"div",1)(2,vo,5,1,"div",2),i(3,"div",3)(4,"div",4)(5,"h6",5),d(6,"i",6),s(7),o()(),i(8,"div",7)(9,"form",8),g("ngSubmit",function(){return n.onSubmit()}),i(10,"div",9)(11,"div",10)(12,"label",11),s(13,"Route Name *"),o(),d(14,"input",12),_(15,Mo,2,0,"div",13),o(),i(16,"div",10)(17,"label",11),s(18,"Start Location *"),o(),i(19,"select",14),g("change",function(){return n.onLocationSelectionChange()}),i(20,"option",15),s(21,"Select Start Location"),o(),_(22,Oo,2,2,"option",16),o(),_(23,Po,3,0,"div",17)(24,xo,2,0,"div",13),o(),i(25,"div",10)(26,"label",11),s(27,"End Location *"),o(),i(28,"select",18),g("change",function(){return n.onLocationSelectionChange()}),i(29,"option",15),s(30,"Select End Location"),o(),_(31,yo,2,2,"option",16),o(),_(32,So,2,0,"div",13),o(),i(33,"div",10)(34,"label",11),s(35,"Distance (km)"),o(),d(36,"input",19),_(37,wo,2,0,"div",13),o(),i(38,"div",10)(39,"label",11),s(40,"Estimated Time"),o(),d(41,"input",20),o(),i(42,"div",10)(43,"div",21),d(44,"input",22),i(45,"label",23),s(46,"Active Route"),o()()()(),i(47,"div",24)(48,"div",25)(49,"h6",26),d(50,"i",27),s(51,"Step Overs with Distance & Time "),i(52,"span",28),s(53),o()(),i(54,"button",29),g("click",function(){return n.addStepOver()}),d(55,"i",30),s(56," Add Step Over "),o()(),i(57,"div",31),_(58,Eo,25,7,"div",32)(59,To,6,0,"div",33),o()(),i(60,"div",34)(61,"button",35),_(62,Lo,1,0,"span",36)(63,Ao,2,1,"span",37)(64,Ro,3,1,"span",37),o(),i(65,"button",38),g("click",function(){return n.resetForm()}),d(66,"i",39),i(67,"span",40),s(68,"Reset"),o()()()()()(),i(69,"div",41)(70,"div",4)(71,"div",42)(72,"h6",5),d(73,"i",43),s(74," Routes "),i(75,"span",44),s(76),o()(),i(77,"div",45)(78,"div",46)(79,"input",47),T("ngModelChange",function(m){return E(n.routeSearchTerm,m)||(n.routeSearchTerm=m),m}),g("keyup.enter",function(){return n.onRouteSearch()}),o(),i(80,"button",48),g("click",function(){return n.onRouteSearch()}),d(81,"i",49),o()(),i(82,"select",50),T("ngModelChange",function(m){return E(n.routeFilterActive,m)||(n.routeFilterActive=m),m}),g("change",function(){return n.onRouteSearch()}),i(83,"option",51),s(84,"All Status"),o(),i(85,"option",51),s(86,"Active"),o(),i(87,"option",51),s(88,"Inactive"),o()()()()(),i(89,"div",52),_(90,No,4,0,"div",53)(91,zo,23,3,"div",54)(92,jo,15,13,"nav",55),o()()()),e&2){let c,m,b,x;a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(5),C(" ",n.editingRouteId?"Edit Route":"Add New Route"," "),a(2),l("formGroup",n.routeForm),a(5),l("disabled",n.isSubmitting),a(),l("ngIf",((c=n.routeForm.get("routeName"))==null?null:c.invalid)&&((c=n.routeForm.get("routeName"))==null?null:c.touched)),a(4),l("disabled",n.isSubmitting||n.isLoadingLocations),a(3),l("ngForOf",n.locations)("ngForTrackBy",n.trackByLocationId),a(),l("ngIf",n.isLoadingLocations),a(),l("ngIf",((m=n.routeForm.get("startLocationId"))==null?null:m.invalid)&&((m=n.routeForm.get("startLocationId"))==null?null:m.touched)),a(4),l("disabled",n.isSubmitting||n.isLoadingLocations),a(3),l("ngForOf",n.locations)("ngForTrackBy",n.trackByLocationId),a(),l("ngIf",((b=n.routeForm.get("endLocationId"))==null?null:b.invalid)&&((b=n.routeForm.get("endLocationId"))==null?null:b.touched)),a(4),l("disabled",n.isSubmitting||n.isCalculatingDistance),a(),l("ngIf",((x=n.routeForm.get("distance"))==null?null:x.invalid)&&((x=n.routeForm.get("distance"))==null?null:x.touched)),a(4),l("disabled",n.isSubmitting||n.isCalculatingDistance),a(3),l("disabled",n.isSubmitting),a(9),h(n.stepOversArray.length),a(),l("disabled",n.isSubmitting),a(4),l("ngForOf",n.stepOversArray.controls)("ngForTrackBy",n.trackByIndex),a(),l("ngIf",n.stepOversArray.length===0),a(2),l("disabled",n.routeForm.invalid||n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",!n.isSubmitting),a(),l("disabled",n.isSubmitting),a(11),h(n.routeTotalCount),a(3),I("ngModel",n.routeSearchTerm),a(3),I("ngModel",n.routeFilterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoadingRoutes),a(),l("ngIf",!n.isLoadingRoutes),a(),l("ngIf",n.routeTotalPages>1)}},dependencies:[k,ue,N,L,fe,z,te,he,ve,$,be,_e,Ce,U,ee,Ve,K,de,se,ce,cn,ln],styles:[".route-master-container[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:.875rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem;width:100%}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;margin-bottom:.25rem;color:#374151}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb}.section-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#1f2937;margin:0;flex-grow:1}.stepover-item[_ngcontent-%COMP%]{background:#f9fafb;border:1px solid #e5e7eb;transition:all .2s ease}.stepover-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e5e7eb}.table-compact[_ngcontent-%COMP%]{font-size:.75rem}.table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.375rem .5rem;vertical-align:middle}.badge-sm[_ngcontent-%COMP%]{font-size:.6rem;padding:.2rem .4rem}.btn-xs[_ngcontent-%COMP%]{padding:.125rem .25rem;font-size:.65rem;line-height:1.2;border-radius:.2rem}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}.stepover-item[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{align-items:end}.stepover-item[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{background-color:#f8f9fa!important;font-weight:500;color:#495057}.stepover-item[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}.stepover-item[_ngcontent-%COMP%]   small.text-muted[_ngcontent-%COMP%]{font-size:.65rem;margin-top:.125rem}.routes-list[_ngcontent-%COMP%]   .step-overs-cell[_ngcontent-%COMP%]{max-width:250px}.routes-list[_ngcontent-%COMP%]   .step-overs-cell[_ngcontent-%COMP%]   .step-over-details[_ngcontent-%COMP%]{font-size:.65rem;line-height:1.2;color:#6c757d;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.routes-list[_ngcontent-%COMP%]   .step-overs-cell[_ngcontent-%COMP%]   .step-over-details[_ngcontent-%COMP%]:hover{white-space:normal;overflow:visible}"]})};var $o=["addressInput"],Ht=()=>({standalone:!0});function Uo(r,t){if(r&1){let e=v();i(0,"div",71),d(1,"i",72),s(2),i(3,"button",73),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.successMessage," ")}}function qo(r,t){if(r&1){let e=v();i(0,"div",74),d(1,"i",75),s(2),i(3,"button",73),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(2),C("",e.errorMessage," ")}}function Go(r,t){r&1&&(i(0,"div",76),s(1,"StepOver name is required"),o())}function Ho(r,t){r&1&&d(0,"div",26)}function Wo(r,t){r&1&&d(0,"span",77)}function Yo(r,t){r&1&&d(0,"i",78)}function Qo(r,t){r&1&&(i(0,"div",76),s(1,"Address is required"),o())}function Ko(r,t){r&1&&(i(0,"small",28),s(1," Try searching for: restaurants, hotels, landmarks, or enter a complete address "),o())}function Jo(r,t){r&1&&(i(0,"div",76),s(1,"Valid latitude required (-90 to 90)"),o())}function Zo(r,t){r&1&&d(0,"div",26)}function Xo(r,t){r&1&&(i(0,"div",76),s(1,"Valid longitude required (-180 to 180)"),o())}function er(r,t){r&1&&d(0,"div",26)}function tr(r,t){if(r&1){let e=v();i(0,"div",89)(1,"div",90)(2,"span",91),s(3),o(),i(4,"div",92)(5,"input",93),T("ngModelChange",function(c){let m=u(e).$implicit;return E(m.isActive,c)||(m.isActive=c),f(c)}),o(),i(6,"label",94),s(7,"Active"),o()()(),i(8,"button",95),g("click",function(){let c=u(e).index,m=p(2);return f(m.removeTenantCode(c))}),d(9,"i",88),o()()}if(r&2){let e=t.$implicit,n=p(2);a(3),h(e.tenantCode),a(2),I("ngModel",e.isActive),l("ngModelOptions",$e(5,Ht))("disabled",n.isLoading),a(3),l("disabled",n.isLoading)}}function nr(r,t){if(r&1){let e=v();i(0,"div",79)(1,"div",80),_(2,tr,10,6,"div",81),o(),i(3,"div",82)(4,"button",83),g("click",function(){u(e);let c=p();return f(c.toggleAllTenantCodes(!0))}),d(5,"i",84),s(6," Activate All "),o(),i(7,"button",85),g("click",function(){u(e);let c=p();return f(c.toggleAllTenantCodes(!1))}),d(8,"i",86),s(9," Deactivate All "),o(),i(10,"button",87),g("click",function(){u(e);let c=p();return f(c.clearAllTenantCodes())}),d(11,"i",88),s(12," Clear All "),o()()()}if(r&2){let e=p();a(2),l("ngForOf",e.tenantCodes)("ngForTrackBy",e.trackByTenantCode),a(2),l("disabled",e.isLoading),a(3),l("disabled",e.isLoading),a(3),l("disabled",e.isLoading)}}function ir(r,t){r&1&&(i(0,"div",96)(1,"div",97),d(2,"i",98),i(3,"p",99),s(4,"No tenant codes added yet"),o(),i(5,"small"),s(6,"Add tenant codes using the input fields above"),o()()())}function or(r,t){r&1&&d(0,"span",100)}function rr(r,t){if(r&1&&(i(0,"span"),s(1),o()),r&2){let e=p();a(),h(e.editingStepOverId?"Updating...":"Saving...")}}function ar(r,t){if(r&1&&(i(0,"span"),d(1,"i",101),s(2),o()),r&2){let e=p();a(2),C("",e.editingStepOverId?"Update StepOver":"Save StepOver"," ")}}function sr(r,t){r&1&&(i(0,"div",102)(1,"div",103)(2,"span",104),s(3,"Loading..."),o()(),i(4,"div",105),s(5,"Loading stepovers..."),o()())}function cr(r,t){if(r&1&&(i(0,"small",28),s(1),ne(2,"number"),ne(3,"number"),o()),r&2){let e=p().$implicit;a(),q(" ",ae(2,2,e.latitude,"1.6-6"),", ",ae(3,5,e.longitude,"1.6-6")," ")}}function lr(r,t){r&1&&(i(0,"span"),s(1,"-"),o())}function dr(r,t){if(r&1){let e=v();i(0,"tr")(1,"td")(2,"strong"),s(3),o()(),i(4,"td")(5,"div",112),s(6),o()(),i(7,"td"),_(8,cr,4,8,"small",113)(9,lr,2,0,"span",55),o(),i(10,"td")(11,"span",114),d(12,"i"),s(13),o()(),i(14,"td")(15,"span",115),s(16),o()(),i(17,"td")(18,"small"),s(19),ne(20,"date"),o()(),i(21,"td")(22,"div",116)(23,"button",117),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editStepOver(c))}),d(24,"i",118),o(),i(25,"button",119),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.viewStepOverOnMap(c))}),d(26,"i",120),o(),i(27,"button",121),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteStepOver(c))}),d(28,"i",88),o()()()()}if(r&2){let e=t.$implicit;M("table-warning",!e.isActive),a(3),h(e.stepOverName),a(2),l("title",e.address),a(),C(" ",e.address||"-"," "),a(2),l("ngIf",e.latitude&&e.longitude),a(),l("ngIf",!e.latitude||!e.longitude),a(2),l("ngClass",e.isActive?"bg-success":"bg-danger"),a(),R(e.isActive?"bi bi-check-circle":"bi bi-x-circle"),a(),C(" ",e.isActive?"Active":"Inactive"," "),a(3),h(e.tenantCount||0),a(3),h(ae(20,14,e.createdDate,"short")),a(6),l("disabled",!e.latitude||!e.longitude)}}function mr(r,t){r&1&&(i(0,"tr")(1,"td",122),d(2,"i",123),s(3," No stepovers found "),o()())}function pr(r,t){if(r&1){let e=v();i(0,"div",106)(1,"table",107)(2,"thead",108)(3,"tr")(4,"th",109),g("click",function(){u(e);let c=p();return f(c.onSort("stepover_name"))}),s(5," Name "),d(6,"i"),o(),i(7,"th"),s(8,"Address"),o(),i(9,"th"),s(10,"Coordinates"),o(),i(11,"th",109),g("click",function(){u(e);let c=p();return f(c.onSort("is_active"))}),s(12," Status "),d(13,"i"),o(),i(14,"th"),s(15,"Tenants"),o(),i(16,"th",109),g("click",function(){u(e);let c=p();return f(c.onSort("created_date"))}),s(17," Created "),d(18,"i"),o(),i(19,"th",110),s(20,"Actions"),o()()(),i(21,"tbody"),_(22,dr,29,17,"tr",111)(23,mr,4,0,"tr",55),o()()()}if(r&2){let e=p();a(6),R(e.getSortIcon("stepover_name")),a(7),R(e.getSortIcon("is_active")),a(5),R(e.getSortIcon("created_date")),a(4),l("ngForOf",e.stepOvers)("ngForTrackBy",e.trackByStepOverId),a(),l("ngIf",e.stepOvers.length===0)}}function gr(r,t){if(r&1){let e=v();i(0,"li",126)(1,"button",133),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onPageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.currentPage),a(2),h(e)}}function ur(r,t){if(r&1){let e=v();i(0,"nav",124)(1,"ul",125)(2,"li",126)(3,"button",127),g("click",function(){u(e);let c=p();return f(c.onPageChange(1))}),d(4,"i",128),o()(),i(5,"li",126)(6,"button",127),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage-1))}),d(7,"i",129),o()(),_(8,gr,3,3,"li",130),i(9,"li",126)(10,"button",127),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage+1))}),d(11,"i",131),o()(),i(12,"li",126)(13,"button",127),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.totalPages))}),d(14,"i",132),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),l("ngForOf",e.getPaginationNumbers()),a(),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages),a(2),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages)}}var Et=class r{constructor(t,e,n,c){this.fb=t;this.stepOverService=e;this.ngZone=n;this.router=c}addressInputRef;stepOverForm;stepOvers=[];stepOverTenants=[];selectedStepOver=null;tenantCodes=[];newTenantCode="";bulkTenantCodes="";currentPage=1;pageSize=10;totalCount=0;totalPages=0;searchTerm="";filterActive;sortColumn="stepover_name";sortDirection="ASC";isLoading=!1;isLoadingStepOvers=!1;isGettingLocation=!1;loadingTenants=!1;successMessage="";errorMessage="";editingStepOverId=null;autocomplete;isGoogleMapsLoaded=!1;placesService;geocoder;tenantModal;destroy$=new B;reverseGeocodeTimeout;GOOGLE_MAPS_API_KEY="AIzaSyAbqpnPHWDqvA3TIQPq0xowtJ3ij3Xiqxg";ngOnInit(){this.initializeForm(),this.loadGoogleMaps(),this.loadStepOvers()}ngAfterViewInit(){let t=document.getElementById("tenantModal");t&&(this.tenantModal=new bootstrap.Modal(t)),setTimeout(()=>{this.isGoogleMapsLoaded&&this.addressInputRef&&this.initializeAutocomplete()},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.reverseGeocodeTimeout&&clearTimeout(this.reverseGeocodeTimeout)}initializeForm(){this.stepOverForm=this.fb.group({stepOverName:["",[O.required,O.maxLength(255)]],address:["",[O.required,O.maxLength(500)]],latitude:[null,[O.required,O.min(-90),O.max(90)]],longitude:[null,[O.required,O.min(-180),O.max(180)]],isActive:[!0]})}loadGoogleMaps(){if(typeof google<"u"&&google.maps){this.isGoogleMapsLoaded=!0,this.initializeGoogleServices();return}let t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${this.GOOGLE_MAPS_API_KEY}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{this.ngZone.run(()=>{this.isGoogleMapsLoaded=!0,this.initializeGoogleServices(),this.addressInputRef&&this.initializeAutocomplete()})},t.onerror=()=>{console.error("Failed to load Google Maps API"),this.errorMessage="Failed to load Google Maps. Please check your API key and internet connection."},document.head.appendChild(t)}initializeGoogleServices(){if(typeof google<"u"&&google.maps){this.geocoder=new google.maps.Geocoder;let t=new google.maps.Map(document.createElement("div"));this.placesService=new google.maps.places.PlacesService(t)}}initializeAutocomplete(){!this.addressInputRef||!this.isGoogleMapsLoaded||!google.maps||(this.autocomplete=new google.maps.places.Autocomplete(this.addressInputRef.nativeElement,{types:["establishment","geocode"],fields:["formatted_address","geometry","address_components","name","place_id","types"]}),this.autocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{let t=this.autocomplete.getPlace();if(t.geometry&&t.geometry.location){let e=t.geometry.location.lat(),n=t.geometry.location.lng(),c=t.name&&t.types.some(m=>["establishment","point_of_interest","store"].includes(m))?`${t.name}, ${t.formatted_address}`:t.formatted_address;this.stepOverForm.patchValue({address:c,latitude:e,longitude:n}),!this.stepOverForm.get("stepOverName")?.value&&t.name&&this.stepOverForm.patchValue({stepOverName:t.name})}})}))}onAddressFocus(){this.autocomplete&&this.autocomplete.set("place",null)}onAddressInput(t){let n=t.target.value.match(/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/);if(n){let c=parseFloat(n[1]),m=parseFloat(n[2]);c>=-90&&c<=90&&m>=-180&&m<=180&&(this.stepOverForm.patchValue({latitude:c,longitude:m}),this.reverseGeocode(c,m))}}getCurrentLocation(){if(!navigator.geolocation){this.errorMessage="Geolocation is not supported by this browser.";return}this.isGettingLocation=!0,this.clearMessages(),navigator.geolocation.getCurrentPosition(t=>{this.ngZone.run(()=>{let e=t.coords.latitude,n=t.coords.longitude;this.stepOverForm.patchValue({latitude:e,longitude:n}),this.reverseGeocode(e,n),this.isGettingLocation=!1})},t=>{this.ngZone.run(()=>{this.isGettingLocation=!1;let e="Failed to get current location.";switch(t.code){case t.PERMISSION_DENIED:e="Location access denied by user.";break;case t.POSITION_UNAVAILABLE:e="Location information unavailable.";break;case t.TIMEOUT:e="Location request timed out.";break}this.errorMessage=e})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}reverseGeocode(t,e){if(!this.geocoder)return;let n=new google.maps.LatLng(t,e);this.geocoder.geocode({location:n},(c,m)=>{this.ngZone.run(()=>{if(m==="OK"&&c&&c[0]){let b=c[0];this.stepOverForm.patchValue({address:b.formatted_address})}})})}clearAddress(){this.stepOverForm.patchValue({address:"",latitude:null,longitude:null}),this.addressInputRef&&(this.addressInputRef.nativeElement.value="")}onCoordinateChange(){let t=this.stepOverForm.get("latitude")?.value,e=this.stepOverForm.get("longitude")?.value;t&&e&&this.isValidCoordinate(t,e)&&(clearTimeout(this.reverseGeocodeTimeout),this.reverseGeocodeTimeout=setTimeout(()=>{this.reverseGeocode(t,e)},1e3))}isValidCoordinate(t,e){return t>=-90&&t<=90&&e>=-180&&e<=180}hasValidCoordinates(){let t=this.stepOverForm.get("latitude")?.value,e=this.stepOverForm.get("longitude")?.value;return t&&e&&this.isValidCoordinate(t,e)}previewLocation(){let t=this.stepOverForm.get("latitude")?.value,e=this.stepOverForm.get("longitude")?.value;if(t&&e){let n=`https://www.google.com/maps/@${t},${e},15z`;window.open(n,"_blank")}}viewStepOverOnMap(t){if(t.latitude&&t.longitude){let e=`https://www.google.com/maps/@${t.latitude},${t.longitude},15z`;window.open(e,"_blank")}}addTenantCode(){let t=this.newTenantCode?.trim().toUpperCase();if(t){if(this.tenantCodes.some(e=>e.tenantCode===t)){this.errorMessage=`Tenant code "${t}" already exists.`;return}this.tenantCodes.push({tenantCode:t,isActive:!0,tenantName:t}),this.newTenantCode="",this.clearMessages()}}addBulkTenantCodes(){let t=this.bulkTenantCodes?.trim();if(!t)return;let e=t.split(/[,\n\r]+/).map(m=>m.trim().toUpperCase()).filter(m=>m.length>0),n=0,c=0;e.forEach(m=>{this.tenantCodes.some(b=>b.tenantCode===m)?c++:(this.tenantCodes.push({tenantCode:m,isActive:!0,tenantName:m}),n++)}),this.bulkTenantCodes="",n>0&&(this.successMessage=`Added ${n} tenant code(s).`),c>0&&(this.errorMessage=`${c} duplicate code(s) were skipped.`)}removeTenantCode(t){confirm("Are you sure you want to remove this tenant code?")&&this.tenantCodes.splice(t,1)}toggleAllTenantCodes(t){this.tenantCodes.forEach(e=>e.isActive=t)}clearAllTenantCodes(){confirm("Are you sure you want to remove all tenant codes?")&&(this.tenantCodes=[])}trackByTenantCode(t,e){return e.tenantCode}loadStepOvers(){this.isLoadingStepOvers=!0,this.clearMessages(),this.stepOverService.getStepOvers(this.filterActive,this.currentPage,this.pageSize).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingStepOvers=!1,t.success?(this.stepOvers=t.data.map(e=>je(Re({},e),{tenantCount:e.stepOverTenants?.filter(n=>n.isActive).length||0})),this.totalCount=t.totalCount,this.totalPages=Math.ceil(this.totalCount/this.pageSize)):(this.stepOvers=t.Data||t.data||[],this.totalCount=t.TotalCount||t.totalCount||0,this.totalPages=Math.ceil(this.totalCount/this.pageSize))},error:t=>{this.isLoadingStepOvers=!1,this.errorMessage="Failed to load stepovers",console.error("Load stepovers error:",t)}})}loadStepOverTenants(t){this.loadingTenants=!0,this.stepOverTenants=[]}onSearch(){this.currentPage=1,this.loadStepOvers()}onSort(t){this.sortColumn===t?this.sortDirection=this.sortDirection==="ASC"?"DESC":"ASC":(this.sortColumn=t,this.sortDirection="ASC"),this.loadStepOvers()}onPageChange(t){this.currentPage=t,this.loadStepOvers()}onSubmit(){if(this.stepOverForm.valid){this.isLoading=!0,this.clearMessages();let t=this.stepOverForm.value,e={stopOverName:t.stepOverName,address:t.address,latitude:t.latitude,longitude:t.longitude,isActive:t.isActive,tenants:this.tenantCodes.map(n=>({tenantCode:n.tenantCode,tenantName:n.tenantCode,isActive:n.isActive}))};this.editingStepOverId?(e.stepOverId=this.editingStepOverId,this.stepOverService.updateStepOver(this.editingStepOverId,e).pipe(w(this.destroy$)).subscribe({next:n=>{this.isLoading=!1,n.success&&(this.successMessage="StepOver updated successfully!",this.resetForm(),this.loadStepOvers())},error:n=>{this.isLoading=!1,this.errorMessage=this.getErrorMessage(n),console.error("Update stepover error:",n)}})):this.stepOverService.createStepOver(e).pipe(w(this.destroy$)).subscribe({next:n=>{this.isLoading=!1,n.success&&(this.successMessage="StepOver created successfully!",this.resetForm(),this.loadStepOvers())},error:n=>{this.isLoading=!1,this.errorMessage=this.getErrorMessage(n),console.error("Create stepover error:",n)}})}else Object.keys(this.stepOverForm.controls).forEach(t=>{this.stepOverForm.get(t)?.markAsTouched()})}getErrorMessage(t){return t.error?.message?t.error.message:t.message?t.message:"An unexpected error occurred"}editStepOver(t){this.editingStepOverId=t.stepOverId,this.stepOverForm.patchValue({stepOverName:t.stepOverName,address:t.address,latitude:t.latitude,longitude:t.longitude,isActive:t.isActive}),this.tenantCodes=t.stepOverTenants?.map(e=>({tenantCode:e.tenantCode,isActive:e.isActive,tenantName:e.tenantCode}))||[],this.addressInputRef&&t.address&&(this.addressInputRef.nativeElement.value=t.address),document.querySelector(".stepover-form")?.scrollIntoView({behavior:"smooth"})}deleteStepOver(t){let e=`Are you sure you want to delete "${t.stepOverName}"?

This will also remove all associated tenant codes.
This action cannot be undone.`;confirm(e)&&this.stepOverService.deleteStepOver(t.stepOverId).pipe(w(this.destroy$)).subscribe({next:n=>{n.success&&(this.successMessage="StepOver deleted successfully!",this.loadStepOvers())},error:n=>{this.errorMessage="Failed to delete stepover",console.error("Delete stepover error:",n)}})}viewTenants(t){this.selectedStepOver=t,this.loadStepOverTenants(t.stepOverId),this.tenantModal?.show()}manageTenants(t){this.router.navigate(["/admin/tenant-master"],{queryParams:{stepOverId:t.stepOverId,stepOverName:t.stepOverName}})}resetForm(){this.stepOverForm.reset(),this.stepOverForm.patchValue({isActive:!0}),this.editingStepOverId=null,this.tenantCodes=[],this.newTenantCode="",this.bulkTenantCodes="",this.addressInputRef&&(this.addressInputRef.nativeElement.value="")}clearMessages(){this.successMessage="",this.errorMessage=""}getPaginationNumbers(){let t=[],e=Math.max(1,this.currentPage-2),n=Math.min(this.totalPages,this.currentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}getSortIcon(t){return this.sortColumn!==t?"fas fa-sort":this.sortDirection==="ASC"?"fas fa-sort-up":"fas fa-sort-down"}trackByStepOverId(t,e){return e.stepOverId}static \u0275fac=function(e){return new(e||r)(P(le),P(Ze),P(lt),P(Q))};static \u0275cmp=S({type:r,selectors:[["app-stopover-master"]],viewQuery:function(e,n){if(e&1&&Ne($o,5),e&2){let c;De(c=Fe())&&(n.addressInputRef=c.first)}},decls:133,vars:49,consts:[["spacer1",""],["addressInput",""],["spacer2",""],["spacer3",""],["spacer4",""],[1,"stepover-management"],["class","alert alert-success alert-compact mb-3",4,"ngIf"],["class","alert alert-danger alert-compact mb-3",4,"ngIf"],[1,"stepover-form","card"],[1,"card-header"],[1,"card-title"],[1,"bi","bi-geo-alt","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"section-title"],[1,"bi","bi-building","me-2"],[1,"form-row"],[1,"form-col"],[1,"form-label-compact"],["type","text","formControlName","stepOverName",1,"form-control","form-control-compact",3,"disabled"],[1,"error-space"],["class","error-text-compact",4,"ngIf","ngIfElse"],[1,"form-check-compact"],["type","checkbox","formControlName","isActive",1,"form-check-input",3,"disabled"],[1,"form-check-label-compact"],[1,"error-spacer"],[1,"form-col-full"],[1,"text-muted"],[1,"input-group"],["type","text","formControlName","address","placeholder","Search for places, addresses, landmarks...",1,"form-control","form-control-compact",3,"focus","input","disabled"],["type","button","title","Use current location",1,"btn","btn-outline-secondary","btn-compact",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],["class","bi bi-crosshair",4,"ngIf"],["type","button","title","Clear address",1,"btn","btn-outline-primary","btn-compact",3,"click","disabled"],[1,"bi","bi-x-lg"],["type","number","step","0.000001","formControlName","latitude",1,"form-control","form-control-compact",3,"input","disabled"],["type","number","step","0.000001","formControlName","longitude",1,"form-control","form-control-compact",3,"input","disabled"],[1,"coordinate-preview"],["type","button","title","Preview location on map",1,"btn","btn-sm","btn-outline-info",3,"click","disabled"],[1,"bi","bi-map"],[1,"section-header","mt-4"],[1,"bi","bi-people","me-2"],[1,"text-muted","ms-2"],["type","text","placeholder","Enter tenant code","maxlength","50",1,"form-control","form-control-compact",2,"text-transform","uppercase",3,"ngModelChange","keyup.enter","ngModel","ngModelOptions","disabled"],["type","button","title","Add tenant code",1,"btn","btn-primary","btn-compact",3,"click","disabled"],[1,"bi","bi-plus"],["placeholder","Enter multiple codes separated by commas or new lines","rows","1",1,"form-control","form-control-compact",2,"resize","vertical","text-transform","uppercase",3,"ngModelChange","ngModel","ngModelOptions","disabled"],["type","button","title","Add bulk tenant codes",1,"btn","btn-secondary","btn-compact",3,"click","disabled"],[1,"bi","bi-plus-square"],["class","tenant-codes-list mt-3",4,"ngIf"],["class","empty-tenant-codes mt-3",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-compact",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-compact","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"stepovers-list","card","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"bi","bi-list","me-2"],[1,"d-flex","gap-2"],[1,"search-container"],["type","text","placeholder","Search stepovers...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-3"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-3"],[1,"bi","bi-exclamation-circle","me-2"],[1,"error-text-compact"],[1,"spinner-border","spinner-border-sm"],[1,"bi","bi-crosshair"],[1,"tenant-codes-list","mt-3"],[1,"codes-container"],["class","tenant-code-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bulk-actions","mt-2"],["type","button","title","Activate all codes",1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],[1,"bi","bi-check-all"],["type","button","title","Deactivate all codes",1,"btn","btn-sm","btn-outline-warning","ms-2",3,"click","disabled"],[1,"bi","bi-x-octagon"],["type","button","title","Remove all codes",1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click","disabled"],[1,"bi","bi-trash"],[1,"tenant-code-item"],[1,"code-content"],[1,"code-text"],[1,"code-status"],["type","checkbox",1,"form-check-input","form-check-input-sm",3,"ngModelChange","ngModel","ngModelOptions","disabled"],[1,"status-label"],["type","button","title","Remove tenant code",1,"btn","btn-outline-danger","btn-xs",3,"click","disabled"],[1,"empty-tenant-codes","mt-3"],[1,"text-center","py-3","text-muted"],[1,"bi","bi-people","display-6","mb-2","d-block"],[1,"mb-0"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-gear","me-1"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-hover","table-compact"],[1,"table-light"],[1,"sortable",3,"click"],["width","150"],[3,"table-warning",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-truncate",2,"max-width","250px",3,"title"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","bg-info"],[1,"btn-group","btn-group-sm"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs",3,"click"],[1,"bi","bi-pencil"],["type","button","title","View on Map",1,"btn","btn-outline-success","btn-xs",3,"click","disabled"],[1,"bi","bi-geo-alt"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs",3,"click"],["colspan","7",1,"text-center","py-4","text-muted"],[1,"bi","bi-geo-alt","display-4","mb-2","d-block"],[1,"mt-3"],[1,"pagination","pagination-sm","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link",3,"click"]],template:function(e,n){if(e&1){let c=v();i(0,"div",5),_(1,Uo,4,1,"div",6)(2,qo,4,1,"div",7),i(3,"div",8)(4,"div",9)(5,"h5",10),d(6,"i",11),s(7),o()(),i(8,"div",12)(9,"form",13),g("ngSubmit",function(){return u(c),f(n.onSubmit())}),i(10,"div",14)(11,"h6",15),d(12,"i",16),s(13,"StepOver Details "),o()(),i(14,"div",17)(15,"div",18)(16,"label",19),s(17,"StepOver Name *"),o(),d(18,"input",20),i(19,"div",21),_(20,Go,2,0,"div",22)(21,Ho,1,0,"ng-template",null,0,ie),o()(),i(23,"div",18)(24,"div",23),d(25,"input",24),i(26,"label",25),s(27,"Active Status"),o()(),i(28,"div",21),d(29,"div",26),o()()(),i(30,"div",17)(31,"div",27)(32,"label",19),s(33," Address * "),i(34,"small",28),s(35,"(Start typing to search with Google Places)"),o()(),i(36,"div",29)(37,"input",30,1),g("focus",function(){return u(c),f(n.onAddressFocus())})("input",function(b){return u(c),f(n.onAddressInput(b))}),o(),i(39,"button",31),g("click",function(){return u(c),f(n.getCurrentLocation())}),_(40,Wo,1,0,"span",32)(41,Yo,1,0,"i",33),o(),i(42,"button",34),g("click",function(){return u(c),f(n.clearAddress())}),d(43,"i",35),o()(),i(44,"div",21),_(45,Qo,2,0,"div",22)(46,Ko,2,0,"ng-template",null,2,ie),o()()(),i(48,"div",17)(49,"div",18)(50,"label",19),s(51,"Latitude *"),o(),i(52,"input",36),g("input",function(){return u(c),f(n.onCoordinateChange())}),o(),i(53,"div",21),_(54,Jo,2,0,"div",22)(55,Zo,1,0,"ng-template",null,3,ie),o()(),i(57,"div",18)(58,"label",19),s(59,"Longitude *"),o(),i(60,"input",37),g("input",function(){return u(c),f(n.onCoordinateChange())}),o(),i(61,"div",21),_(62,Xo,2,0,"div",22)(63,er,1,0,"ng-template",null,4,ie),o()(),i(65,"div",18)(66,"label",19),s(67,"Location Preview"),o(),i(68,"div",38)(69,"button",39),g("click",function(){return u(c),f(n.previewLocation())}),d(70,"i",40),s(71," Preview Map "),o()()()(),i(72,"div",41)(73,"h6",15),d(74,"i",42),s(75,"Tenant Codes "),i(76,"small",43),s(77),o()()(),i(78,"div",17)(79,"div",18)(80,"label",19),s(81,"Add Tenant Code"),o(),i(82,"div",29)(83,"input",44),T("ngModelChange",function(b){return u(c),E(n.newTenantCode,b)||(n.newTenantCode=b),f(b)}),g("keyup.enter",function(){return u(c),f(n.addTenantCode())}),o(),i(84,"button",45),g("click",function(){return u(c),f(n.addTenantCode())}),d(85,"i",46),s(86," Add "),o()(),i(87,"div",21)(88,"small",28),s(89," Enter tenant codes one by one and press Add or Enter "),o()()(),i(90,"div",18)(91,"label",19),s(92,"Bulk Add"),o(),i(93,"div",29)(94,"textarea",47),T("ngModelChange",function(b){return u(c),E(n.bulkTenantCodes,b)||(n.bulkTenantCodes=b),f(b)}),o(),i(95,"button",48),g("click",function(){return u(c),f(n.addBulkTenantCodes())}),d(96,"i",49),s(97," Bulk Add "),o()(),i(98,"div",21)(99,"small",28),s(100," Separate codes with commas or new lines "),o()()()(),_(101,nr,13,5,"div",50)(102,ir,7,0,"div",51),i(103,"div",52)(104,"button",53),_(105,or,1,0,"span",54)(106,rr,2,1,"span",55)(107,ar,3,1,"span",55),o(),i(108,"button",56),g("click",function(){return u(c),f(n.resetForm())}),d(109,"i",57),s(110,"Cancel "),o()()()()(),i(111,"div",58)(112,"div",9)(113,"div",59)(114,"h5",10),d(115,"i",60),s(116),o(),i(117,"div",61)(118,"div",62)(119,"input",63),T("ngModelChange",function(b){return u(c),E(n.searchTerm,b)||(n.searchTerm=b),f(b)}),g("keyup.enter",function(){return u(c),f(n.onSearch())}),o(),i(120,"button",64),g("click",function(){return u(c),f(n.onSearch())}),d(121,"i",65),o()(),i(122,"select",66),T("ngModelChange",function(b){return u(c),E(n.filterActive,b)||(n.filterActive=b),f(b)}),g("change",function(){return u(c),f(n.onSearch())}),i(123,"option",67),s(124,"All Status"),o(),i(125,"option",67),s(126,"Active Only"),o(),i(127,"option",67),s(128,"Inactive Only"),o()()()()(),i(129,"div",12),_(130,sr,6,0,"div",68)(131,pr,24,9,"div",69)(132,ur,15,13,"nav",70),o()()()}if(e&2){let c,m,b,x,y=Y(22),A=Y(47),Z=Y(56),me=Y(64);a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(5),C(" ",n.editingStepOverId?"Edit StepOver":"Add New StepOver"," "),a(2),l("formGroup",n.stepOverForm),a(9),l("disabled",n.isLoading),a(2),l("ngIf",((c=n.stepOverForm.get("stepOverName"))==null?null:c.invalid)&&((c=n.stepOverForm.get("stepOverName"))==null?null:c.touched))("ngIfElse",y),a(5),l("disabled",n.isLoading),a(12),l("disabled",n.isLoading),a(2),l("disabled",n.isLoading||n.isGettingLocation),a(),l("ngIf",n.isGettingLocation),a(),l("ngIf",!n.isGettingLocation),a(),l("disabled",n.isLoading),a(3),l("ngIf",((m=n.stepOverForm.get("address"))==null?null:m.invalid)&&((m=n.stepOverForm.get("address"))==null?null:m.touched))("ngIfElse",A),a(7),l("disabled",n.isLoading),a(2),l("ngIf",((b=n.stepOverForm.get("latitude"))==null?null:b.invalid)&&((b=n.stepOverForm.get("latitude"))==null?null:b.touched))("ngIfElse",Z),a(6),l("disabled",n.isLoading),a(2),l("ngIf",((x=n.stepOverForm.get("longitude"))==null?null:x.invalid)&&((x=n.stepOverForm.get("longitude"))==null?null:x.touched))("ngIfElse",me),a(7),l("disabled",!n.hasValidCoordinates()),a(8),C("(",n.tenantCodes.length," codes added)"),a(6),I("ngModel",n.newTenantCode),l("ngModelOptions",$e(47,Ht))("disabled",n.isLoading),a(),l("disabled",n.isLoading||!(n.newTenantCode!=null&&n.newTenantCode.trim())),a(10),I("ngModel",n.bulkTenantCodes),l("ngModelOptions",$e(48,Ht))("disabled",n.isLoading),a(),l("disabled",n.isLoading||!(n.bulkTenantCodes!=null&&n.bulkTenantCodes.trim())),a(6),l("ngIf",n.tenantCodes.length>0),a(),l("ngIf",n.tenantCodes.length===0),a(2),l("disabled",n.stepOverForm.invalid||n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("disabled",n.isLoading),a(8),C(" StepOvers (",n.totalCount,") "),a(3),I("ngModel",n.searchTerm),a(3),I("ngModel",n.filterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoadingStepOvers),a(),l("ngIf",!n.isLoadingStepOvers),a(),l("ngIf",n.totalPages>1)}},dependencies:[k,ue,N,L,mt,fe,z,te,he,ve,$,be,_e,Ce,U,ee,ze,K,de,se,ce],styles:[".stepover-management[_ngcontent-%COMP%]{padding:1rem;margin:0 auto;font-size:.8rem}.form-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;margin-bottom:.25rem;color:#374151;text-transform:uppercase;letter-spacing:.025em}.form-control[_ngcontent-%COMP%]{padding:.375rem .5rem;font-size:.8rem;height:32px;border:1px solid #d1d5db;border-radius:.375rem}.form-control-sm[_ngcontent-%COMP%]{padding:.25rem .375rem;font-size:.75rem;height:28px}.form-select-sm[_ngcontent-%COMP%]{font-size:.75rem;height:28px;padding:.25rem 1.5rem .25rem .375rem}.btn[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.75rem;font-weight:500;border-radius:.375rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.7rem;height:28px}.btn-xs[_ngcontent-%COMP%]{padding:.125rem .375rem;font-size:.65rem;height:24px;border-radius:.25rem}.card-title[_ngcontent-%COMP%]{margin:0;font-size:.85rem;font-weight:700;color:#1e293b}.card-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.card-body[_ngcontent-%COMP%]{padding:.875rem}.section-title[_ngcontent-%COMP%]{color:#1f2937;font-weight:600;font-size:.8rem;margin-bottom:.5rem}.section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.85rem}.section-title[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.65rem;padding:.125rem .375rem}.alert[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem;border-radius:.375rem;margin-bottom:.75rem}.table[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .625rem;vertical-align:middle;border-color:#f3f4f6}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600;color:#374151;text-transform:uppercase;letter-spacing:.025em;font-size:.7rem;border-bottom:2px solid #e2e8f0}.table[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.65rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#3b82f608}.badge[_ngcontent-%COMP%]{font-size:.65rem;padding:.25rem .5rem;font-weight:600;border-radius:.3rem}.tenant-codes-display[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:.5rem;padding:.75rem}.codes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:.5rem}.tenant-code-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:.375rem;padding:.5rem;display:flex;justify-content:space-between;align-items:center;transition:all .2s ease}.tenant-code-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 1px 3px #3b82f61a}.code-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.code-text[_ngcontent-%COMP%]{font-family:Monaco,Menlo,monospace;background:#f1f5f9;padding:.125rem .375rem;border-radius:.25rem;font-size:.7rem;font-weight:600;color:#1e293b}.code-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.form-check-label[_ngcontent-%COMP%]{font-size:.65rem;color:#64748b;margin:0}.bulk-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.5rem;padding-top:.5rem;border-top:1px solid #e2e8f0}.bulk-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.65rem;padding:.25rem .5rem;height:26px}.empty-state[_ngcontent-%COMP%]{background:#f9fafb;border:2px dashed #d1d5db;border-radius:.5rem;margin:.75rem 0}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-bottom:.25rem}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.7rem;color:#9ca3af}.form-actions[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e5e7eb;display:flex;gap:.5rem}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:0;border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0;z-index:3}.pagination-sm[_ngcontent-%COMP%]{--bs-pagination-padding-x: .375rem;--bs-pagination-padding-y: .125rem;--bs-pagination-font-size: .7rem}.pagination-sm[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{height:28px;min-width:28px;display:flex;align-items:center;justify-content:center;border-radius:.25rem;margin:0 .125rem;border:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-bottom:1px solid #e2e8f0;padding:.75rem 1rem}.modal-title[_ngcontent-%COMP%]{color:#1f2937;font-weight:600;font-size:.9rem}.modal-body[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:.8rem}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}small[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]{font-size:.675rem!important}.spinner-border-sm[_ngcontent-%COMP%]{width:.75rem;height:.75rem}.text-danger.small[_ngcontent-%COMP%]{font-size:.65rem!important;margin-top:.125rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .375rem;font-size:.7rem;margin-right:.125rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media (max-width: 768px){.stepover-management[_ngcontent-%COMP%]{padding:.5rem;font-size:.75rem}.codes-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-group-sm[_ngcontent-%COMP%]{flex-direction:column;gap:.125rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.25rem!important;margin-right:0;font-size:.65rem}.table-responsive[_ngcontent-%COMP%]{font-size:.7rem}.card-title[_ngcontent-%COMP%]{font-size:.8rem}.section-title[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 576px){.stepover-management[_ngcontent-%COMP%]{font-size:.7rem}.table[_ngcontent-%COMP%]{font-size:.65rem}.form-control[_ngcontent-%COMP%]{font-size:.75rem;height:30px}.btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}}"]})};var Be=class r{constructor(t){this.http=t}apiUrl=`${D.apiBaseUrl}/MenuCategory`;getAuthHeaders(){let t=this.getToken();return new Te({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}getToken(){return localStorage.getItem("auth_token")}getCategories(t,e=1,n=10,c){let m=new pe().set("page",e.toString()).set("pageSize",n.toString());return t!==void 0&&(m=m.set("isActive",t.toString())),c&&(m=m.set("searchTerm",c)),this.http.get(this.apiUrl,{headers:this.getAuthHeaders(),params:m})}getCategory(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}createCategory(t){return this.http.post(this.apiUrl,t,{headers:this.getAuthHeaders()})}updateCategory(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,{headers:this.getAuthHeaders()})}deleteCategory(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function fr(r,t){if(r&1){let e=v();i(0,"div",41),d(1,"i",42),i(2,"span",43),s(3),o(),i(4,"button",44),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.successMessage)}}function _r(r,t){if(r&1){let e=v();i(0,"div",45),d(1,"i",46),i(2,"span",43),s(3),o(),i(4,"button",44),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.errorMessage)}}function br(r,t){r&1&&(i(0,"div",47),s(1," Category name is required "),o())}function Cr(r,t){r&1&&d(0,"span",48)}function hr(r,t){if(r&1&&(i(0,"span",25),s(1),o()),r&2){let e=p();a(),C(" ",e.editingCategoryId?"Updating...":"Saving..."," ")}}function vr(r,t){if(r&1&&(i(0,"span",25),d(1,"i",49),s(2),o()),r&2){let e=p();a(2),C("",e.editingCategoryId?"Update":"Save"," Category ")}}function Mr(r,t){r&1&&(i(0,"div",50),d(1,"div",51),i(2,"div",52),s(3,"Loading categories..."),o()())}function Or(r,t){if(r&1){let e=v();i(0,"tr")(1,"td",60)(2,"strong",25),s(3),o()(),i(4,"td",60)(5,"span",25),s(6),o()(),i(7,"td",60)(8,"span",25),s(9),o()(),i(10,"td",60)(11,"span",61),s(12),o()(),i(13,"td",60)(14,"span",62),s(15),o()(),i(16,"td",60)(17,"span",63),d(18,"i"),s(19),o()(),i(20,"td",60)(21,"small",25),s(22),ne(23,"date"),o()(),i(24,"td",60)(25,"div",64)(26,"button",65),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editCategory(c))}),d(27,"i",66),o(),i(28,"button",67),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteCategory(c))}),d(29,"i",68),o()()()()}if(r&2){let e=t.$implicit;M("table-warning",!e.isActive),a(3),h(e.categoryName),a(3),h(e.description||"-"),a(3),h(e.displayOrder),a(3),h(e.subcategoryCount),a(3),h(e.itemCount),a(2),l("ngClass",e.isActive?"bg-success":"bg-danger"),a(),R(e.isActive?"bi bi-check":"bi bi-x"),a(),C(" ",e.isActive?"Active":"Inactive"," "),a(3),h(ae(23,13,e.createdDate,"short")),a(6),l("disabled",e.itemCount>0||e.subcategoryCount>0)}}function Pr(r,t){r&1&&(i(0,"tr")(1,"td",69),d(2,"i",70),i(3,"div",43),s(4,"No categories found"),o()()())}function xr(r,t){if(r&1&&(i(0,"div",53)(1,"table",54)(2,"thead",55)(3,"tr")(4,"th",56),s(5,"Category Name"),o(),i(6,"th",56),s(7,"Description"),o(),i(8,"th",56),s(9,"Order"),o(),i(10,"th",56),s(11,"Subcategories"),o(),i(12,"th",56),s(13,"Items"),o(),i(14,"th",56),s(15,"Status"),o(),i(16,"th",56),s(17,"Created"),o(),i(18,"th",57),s(19,"Actions"),o()()(),i(20,"tbody"),_(21,Or,30,16,"tr",58)(22,Pr,5,0,"tr",59),o()()()),r&2){let e=p();a(21),l("ngForOf",e.categories)("ngForTrackBy",e.trackByCategoryId),a(),l("ngIf",e.categories.length===0)}}function yr(r,t){if(r&1){let e=v();i(0,"li",73)(1,"button",80),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onPageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.currentPage),a(2),h(e)}}function Sr(r,t){if(r&1){let e=v();i(0,"nav",71)(1,"ul",72)(2,"li",73)(3,"button",74),g("click",function(){u(e);let c=p();return f(c.onPageChange(1))}),d(4,"i",75),o()(),i(5,"li",73)(6,"button",74),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage-1))}),d(7,"i",76),o()(),_(8,yr,3,3,"li",77),i(9,"li",73)(10,"button",74),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage+1))}),d(11,"i",78),o()(),i(12,"li",73)(13,"button",74),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.totalPages))}),d(14,"i",79),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),l("ngForOf",e.getPaginationNumbers()),a(),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages),a(2),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages)}}var et=class r{constructor(t,e){this.fb=t;this.categoryService=e}categoryForm;categories=[];isLoading=!1;isSubmitting=!1;successMessage="";errorMessage="";editingCategoryId=null;currentPage=1;pageSize=10;totalCount=0;totalPages=0;searchTerm="";filterActive;destroy$=new B;ngOnInit(){this.initializeForm(),this.loadCategories()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.categoryForm=this.fb.group({categoryName:["",[O.required,O.maxLength(255)]],description:[""],displayOrder:[0,[O.min(0)]],isActive:[!0]})}loadCategories(){this.isLoading=!0,this.clearMessages(),this.categoryService.getCategories(this.filterActive,this.currentPage,this.pageSize,this.searchTerm).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoading=!1,t.success&&t.data&&(this.categories=t.data,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0)},error:t=>{this.isLoading=!1,this.errorMessage="Failed to load categories",console.error("Load categories error:",t)}})}onSubmit(){if(this.categoryForm.invalid){this.markFormGroupTouched(this.categoryForm);return}this.isSubmitting=!0,this.clearMessages();let t=this.categoryForm.value;(this.editingCategoryId?this.categoryService.updateCategory(this.editingCategoryId,t):this.categoryService.createCategory(t)).pipe(w(this.destroy$)).subscribe({next:n=>{this.isSubmitting=!1,n.success?(this.successMessage=this.editingCategoryId?`Category "${t.categoryName}" updated successfully!`:`Category "${t.categoryName}" created successfully!`,this.resetForm(),this.loadCategories()):this.errorMessage=n.message||"Failed to save category"},error:n=>{this.isSubmitting=!1,this.errorMessage=n.error?.message||"Failed to save category",console.error("Save category error:",n)}})}editCategory(t){this.editingCategoryId=t.categoryId,this.categoryForm.patchValue({categoryName:t.categoryName,description:t.description,displayOrder:t.displayOrder,isActive:t.isActive}),document.querySelector(".category-form")?.scrollIntoView({behavior:"smooth"})}deleteCategory(t){if(t.itemCount>0||t.subcategoryCount>0){this.errorMessage="Cannot delete category with items or subcategories";return}let e=`Are you sure you want to delete category "${t.categoryName}"?

This action cannot be undone.`;confirm(e)&&this.categoryService.deleteCategory(t.categoryId).pipe(w(this.destroy$)).subscribe({next:n=>{n.success?(this.successMessage=`Category "${t.categoryName}" deleted successfully!`,this.loadCategories()):this.errorMessage=n.message||"Failed to delete category"},error:n=>{this.errorMessage=n.error?.message||"Failed to delete category",console.error("Delete category error:",n)}})}resetForm(){this.categoryForm.reset(),this.categoryForm.patchValue({isActive:!0,displayOrder:0}),this.editingCategoryId=null,this.clearMessages()}onSearch(){this.currentPage=1,this.loadCategories()}onPageChange(t){this.currentPage=t,this.loadCategories()}getPaginationNumbers(){let t=[],e=Math.max(1,this.currentPage-2),n=Math.min(this.totalPages,this.currentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}clearMessages(){this.successMessage="",this.errorMessage=""}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{t.get(e)?.markAsTouched({onlySelf:!0})})}trackByCategoryId(t,e){return e.categoryId}static \u0275fac=function(e){return new(e||r)(P(le),P(Be))};static \u0275cmp=S({type:r,selectors:[["app-menu-category"]],decls:62,vars:23,consts:[[1,"menu-category-container"],["class","alert alert-success alert-compact mb-2",4,"ngIf"],["class","alert alert-danger alert-compact mb-2",4,"ngIf"],[1,"category-form","card"],[1,"card-header","py-2"],[1,"card-title","mb-0","small"],[1,"bi","bi-tags","me-1"],[1,"card-body","py-2"],[3,"ngSubmit","formGroup"],[1,"form-grid","mb-3"],[1,"form-group"],[1,"form-label","text-xs"],["type","text","formControlName","categoryName","placeholder","Enter category name",1,"form-control","form-control-sm","text-xs",3,"disabled"],["class","text-danger text-xs mt-1",4,"ngIf"],["formControlName","description","placeholder","Category description","rows","2",1,"form-control","form-control-sm","text-xs",3,"disabled"],["type","number","formControlName","displayOrder","min","0",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"form-check","mt-3"],["type","checkbox","formControlName","isActive",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"form-check-label","text-xs"],[1,"form-actions","mt-3","pt-2","border-top"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-xs",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"text-xs"],[1,"categories-list","card","mt-3"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap"],[1,"bi","bi-list","me-1"],[1,"badge","badge-sm","bg-primary"],[1,"d-flex","gap-2","flex-wrap"],[1,"input-group","input-group-sm",2,"width","200px"],["type","text","placeholder","Search categories...",1,"form-control","text-xs",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-primary","btn-sm","px-2",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm","text-xs",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[1,"card-body","p-0"],["class","text-center py-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-2 px-3 pb-2",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-2"],[1,"bi","bi-check-circle","me-1"],[1,"small"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-2"],[1,"bi","bi-exclamation-circle","me-1"],[1,"text-danger","text-xs","mt-1"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-save","me-1"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-1","small"],[1,"table-responsive"],[1,"table","table-hover","table-sm","table-compact","mb-0"],[1,"table-light"],[1,"py-2","text-xs"],["width","120",1,"py-2","text-xs"],[3,"table-warning",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"py-2"],[1,"badge","badge-sm","bg-info"],[1,"badge","badge-sm","bg-secondary"],[1,"badge","badge-sm",3,"ngClass"],[1,"btn-group","btn-group-sm"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs","px-1",3,"click"],[1,"bi","bi-pencil"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs","px-1",3,"click","disabled"],[1,"bi","bi-trash"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-tags","display-4","mb-2","d-block"],[1,"mt-2","px-3","pb-2"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link","px-2","py-1","text-xs",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link","px-2","py-1","text-xs",3,"click"]],template:function(e,n){if(e&1&&(i(0,"div",0),_(1,fr,5,1,"div",1)(2,_r,5,1,"div",2),i(3,"div",3)(4,"div",4)(5,"h6",5),d(6,"i",6),s(7),o()(),i(8,"div",7)(9,"form",8),g("ngSubmit",function(){return n.onSubmit()}),i(10,"div",9)(11,"div",10)(12,"label",11),s(13,"Category Name *"),o(),d(14,"input",12),_(15,br,2,0,"div",13),o(),i(16,"div",10)(17,"label",11),s(18,"Description"),o(),d(19,"textarea",14),o(),i(20,"div",10)(21,"label",11),s(22,"Display Order"),o(),d(23,"input",15),o(),i(24,"div",10)(25,"div",16),d(26,"input",17),i(27,"label",18),s(28,"Active Category"),o()()()(),i(29,"div",19)(30,"button",20),_(31,Cr,1,0,"span",21)(32,hr,2,1,"span",22)(33,vr,3,1,"span",22),o(),i(34,"button",23),g("click",function(){return n.resetForm()}),d(35,"i",24),i(36,"span",25),s(37,"Reset"),o()()()()()(),i(38,"div",26)(39,"div",4)(40,"div",27)(41,"h6",5),d(42,"i",28),s(43," Categories "),i(44,"span",29),s(45),o()(),i(46,"div",30)(47,"div",31)(48,"input",32),T("ngModelChange",function(m){return E(n.searchTerm,m)||(n.searchTerm=m),m}),g("keyup.enter",function(){return n.onSearch()}),o(),i(49,"button",33),g("click",function(){return n.onSearch()}),d(50,"i",34),o()(),i(51,"select",35),T("ngModelChange",function(m){return E(n.filterActive,m)||(n.filterActive=m),m}),g("change",function(){return n.onSearch()}),i(52,"option",36),s(53,"All Status"),o(),i(54,"option",36),s(55,"Active"),o(),i(56,"option",36),s(57,"Inactive"),o()()()()(),i(58,"div",37),_(59,Mr,4,0,"div",38)(60,xr,23,3,"div",39)(61,Sr,15,13,"nav",40),o()()()),e&2){let c;a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(5),C(" ",n.editingCategoryId?"Edit Category":"Add New Category"," "),a(2),l("formGroup",n.categoryForm),a(5),l("disabled",n.isSubmitting),a(),l("ngIf",((c=n.categoryForm.get("categoryName"))==null?null:c.invalid)&&((c=n.categoryForm.get("categoryName"))==null?null:c.touched)),a(4),l("disabled",n.isSubmitting),a(4),l("disabled",n.isSubmitting),a(3),l("disabled",n.isSubmitting),a(4),l("disabled",n.categoryForm.invalid||n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",!n.isSubmitting),a(),l("disabled",n.isSubmitting),a(11),h(n.totalCount),a(3),I("ngModel",n.searchTerm),a(3),I("ngModel",n.filterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.totalPages>1)}},dependencies:[k,ue,N,L,fe,z,te,he,ve,$,be,_e,Ce,U,ee,Ve,K,de,se,ce],styles:[".menu-category-container[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:.875rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem;width:100%}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;margin-bottom:.25rem;color:#374151}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e5e7eb}.table-compact[_ngcontent-%COMP%]{font-size:.75rem}.table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.375rem .5rem;vertical-align:middle}.badge-sm[_ngcontent-%COMP%]{font-size:.6rem;padding:.2rem .4rem}.btn-xs[_ngcontent-%COMP%]{padding:.125rem .25rem;font-size:.65rem;line-height:1.2;border-radius:.2rem}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.alert-compact[_ngcontent-%COMP%]   .btn-close-sm[_ngcontent-%COMP%]{font-size:.65rem;padding:.125rem}.card-title[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.bg-success[_ngcontent-%COMP%]{background-color:#10b981!important}.bg-danger[_ngcontent-%COMP%]{background-color:#ef4444!important}.bg-info[_ngcontent-%COMP%]{background-color:#3b82f6!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6b7280!important}.bg-primary[_ngcontent-%COMP%]{background-color:#8b5cf6!important}.form-control-sm[_ngcontent-%COMP%]:focus, .form-select-sm[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 .2rem #8b5cf640}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#8b5cf60d}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6b7280;border-color:#d1d5db}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{color:#8b5cf6;background-color:#f3f4f6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #8b5cf640}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#8b5cf6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#9ca3af;background-color:#f9fafb}"]})};var tt=class r{constructor(t){this.http=t}apiUrl=`${D.apiBaseUrl}/MenuSubcategory`;getAuthHeaders(){let t=this.getToken();return new Te({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}getToken(){return localStorage.getItem("auth_token")}getSubcategories(t,e,n=1,c=10,m){let b=new pe().set("page",n.toString()).set("pageSize",c.toString());return t!==void 0&&(b=b.set("categoryId",t.toString())),e!==void 0&&(b=b.set("isActive",e.toString())),m&&(b=b.set("searchTerm",m)),this.http.get(this.apiUrl,{headers:this.getAuthHeaders(),params:b})}getSubcategory(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}createSubcategory(t){return this.http.post(this.apiUrl,t,{headers:this.getAuthHeaders()})}updateSubcategory(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,{headers:this.getAuthHeaders()})}deleteSubcategory(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function wr(r,t){if(r&1){let e=v();i(0,"div",46),d(1,"i",47),i(2,"span",48),s(3),o(),i(4,"button",49),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.successMessage)}}function kr(r,t){if(r&1){let e=v();i(0,"div",50),d(1,"i",51),i(2,"span",48),s(3),o(),i(4,"button",49),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.errorMessage)}}function Ir(r,t){if(r&1&&(i(0,"option",52),s(1),o()),r&2){let e=t.$implicit;l("value",e.categoryId),a(),C(" ",e.categoryName," ")}}function Er(r,t){r&1&&(i(0,"div",53),d(1,"i",54),s(2,"Loading categories... "),o())}function Tr(r,t){r&1&&(i(0,"div",55),s(1," Category selection is required "),o())}function Lr(r,t){r&1&&(i(0,"div",55),s(1," Subcategory name is required "),o())}function Ar(r,t){r&1&&d(0,"span",54)}function Rr(r,t){if(r&1&&(i(0,"span",29),s(1),o()),r&2){let e=p();a(),C(" ",e.editingSubcategoryId?"Updating...":"Saving..."," ")}}function Nr(r,t){if(r&1&&(i(0,"span",29),d(1,"i",56),s(2),o()),r&2){let e=p();a(2),C("",e.editingSubcategoryId?"Update":"Save"," Subcategory ")}}function Dr(r,t){if(r&1&&(i(0,"option",40),s(1),o()),r&2){let e=t.$implicit;l("ngValue",e.categoryId),a(),C(" ",e.categoryName," ")}}function Fr(r,t){r&1&&(i(0,"div",57),d(1,"div",58),i(2,"div",59),s(3,"Loading subcategories..."),o()())}function Vr(r,t){if(r&1){let e=v();i(0,"tr")(1,"td",67)(2,"strong",29),s(3),o()(),i(4,"td",67)(5,"span",68),s(6),o()(),i(7,"td",67)(8,"span",29),s(9),o()(),i(10,"td",67)(11,"span",29),s(12),o()(),i(13,"td",67)(14,"span",69),s(15),o()(),i(16,"td",67)(17,"span",70),d(18,"i"),s(19),o()(),i(20,"td",67)(21,"small",29),s(22),ne(23,"date"),o()(),i(24,"td",67)(25,"div",71)(26,"button",72),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editSubcategory(c))}),d(27,"i",73),o(),i(28,"button",74),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteSubcategory(c))}),d(29,"i",75),o()()()()}if(r&2){let e=t.$implicit;M("table-warning",!e.isActive),a(3),h(e.subcategoryName),a(3),h(e.categoryName),a(3),h(e.description||"-"),a(3),h(e.displayOrder),a(3),h(e.itemCount),a(2),l("ngClass",e.isActive?"bg-success":"bg-danger"),a(),R(e.isActive?"bi bi-check":"bi bi-x"),a(),C(" ",e.isActive?"Active":"Inactive"," "),a(3),h(ae(23,13,e.createdDate,"short")),a(6),l("disabled",e.itemCount>0)}}function zr(r,t){r&1&&(i(0,"tr")(1,"td",76),d(2,"i",77),i(3,"div",48),s(4,"No subcategories found"),o()()())}function Br(r,t){if(r&1&&(i(0,"div",60)(1,"table",61)(2,"thead",62)(3,"tr")(4,"th",63),s(5,"Subcategory Name"),o(),i(6,"th",63),s(7,"Category"),o(),i(8,"th",63),s(9,"Description"),o(),i(10,"th",63),s(11,"Order"),o(),i(12,"th",63),s(13,"Items"),o(),i(14,"th",63),s(15,"Status"),o(),i(16,"th",63),s(17,"Created"),o(),i(18,"th",64),s(19,"Actions"),o()()(),i(20,"tbody"),_(21,Vr,30,16,"tr",65)(22,zr,5,0,"tr",66),o()()()),r&2){let e=p();a(21),l("ngForOf",e.subcategories)("ngForTrackBy",e.trackBySubcategoryId),a(),l("ngIf",e.subcategories.length===0)}}function jr(r,t){if(r&1){let e=v();i(0,"li",80)(1,"button",87),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onPageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.currentPage),a(2),h(e)}}function $r(r,t){if(r&1){let e=v();i(0,"nav",78)(1,"ul",79)(2,"li",80)(3,"button",81),g("click",function(){u(e);let c=p();return f(c.onPageChange(1))}),d(4,"i",82),o()(),i(5,"li",80)(6,"button",81),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage-1))}),d(7,"i",83),o()(),_(8,jr,3,3,"li",84),i(9,"li",80)(10,"button",81),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage+1))}),d(11,"i",85),o()(),i(12,"li",80)(13,"button",81),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.totalPages))}),d(14,"i",86),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),l("ngForOf",e.getPaginationNumbers()),a(),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages),a(2),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages)}}var nt=class r{constructor(t,e,n){this.fb=t;this.subcategoryService=e;this.categoryService=n}subcategoryForm;subcategories=[];categories=[];isLoading=!1;isLoadingCategories=!1;isSubmitting=!1;successMessage="";errorMessage="";editingSubcategoryId=null;currentPage=1;pageSize=10;totalCount=0;totalPages=0;searchTerm="";filterActive;filterCategoryId;destroy$=new B;ngOnInit(){this.initializeForm(),this.loadCategories(),this.loadSubcategories()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.subcategoryForm=this.fb.group({categoryId:["",O.required],subcategoryName:["",[O.required,O.maxLength(255)]],description:[""],displayOrder:[0,[O.min(0)]],isActive:[!0]})}loadCategories(){this.isLoadingCategories=!0,this.categoryService.getCategories(!0,1,100).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingCategories=!1,t.success&&t.data&&(this.categories=t.data.filter(e=>e.isActive))},error:t=>{this.isLoadingCategories=!1,this.errorMessage="Failed to load categories",console.error("Load categories error:",t)}})}loadSubcategories(){this.isLoading=!0,this.clearMessages(),this.subcategoryService.getSubcategories(this.filterCategoryId,this.filterActive,this.currentPage,this.pageSize,this.searchTerm).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoading=!1,t.success&&t.data&&(this.subcategories=t.data,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0)},error:t=>{this.isLoading=!1,this.errorMessage="Failed to load subcategories",console.error("Load subcategories error:",t)}})}onSubmit(){if(this.subcategoryForm.invalid){this.markFormGroupTouched(this.subcategoryForm);return}this.isSubmitting=!0,this.clearMessages();let t=this.subcategoryForm.value;(this.editingSubcategoryId?this.subcategoryService.updateSubcategory(this.editingSubcategoryId,t):this.subcategoryService.createSubcategory(t)).pipe(w(this.destroy$)).subscribe({next:n=>{this.isSubmitting=!1,n.success?(this.successMessage=this.editingSubcategoryId?`Subcategory "${t.subcategoryName}" updated successfully!`:`Subcategory "${t.subcategoryName}" created successfully!`,this.resetForm(),this.loadSubcategories()):this.errorMessage=n.message||"Failed to save subcategory"},error:n=>{this.isSubmitting=!1,this.errorMessage=n.error?.message||"Failed to save subcategory",console.error("Save subcategory error:",n)}})}editSubcategory(t){this.editingSubcategoryId=t.subcategoryId,this.subcategoryForm.patchValue({categoryId:t.categoryId,subcategoryName:t.subcategoryName,description:t.description,displayOrder:t.displayOrder,isActive:t.isActive}),document.querySelector(".subcategory-form")?.scrollIntoView({behavior:"smooth"})}deleteSubcategory(t){if(t.itemCount>0){this.errorMessage="Cannot delete subcategory with menu items";return}let e=`Are you sure you want to delete subcategory "${t.subcategoryName}"?

This action cannot be undone.`;confirm(e)&&this.subcategoryService.deleteSubcategory(t.subcategoryId).pipe(w(this.destroy$)).subscribe({next:n=>{n.success?(this.successMessage=`Subcategory "${t.subcategoryName}" deleted successfully!`,this.loadSubcategories()):this.errorMessage=n.message||"Failed to delete subcategory"},error:n=>{this.errorMessage=n.error?.message||"Failed to delete subcategory",console.error("Delete subcategory error:",n)}})}resetForm(){this.subcategoryForm.reset(),this.subcategoryForm.patchValue({isActive:!0,displayOrder:0}),this.editingSubcategoryId=null,this.clearMessages()}onSearch(){this.currentPage=1,this.loadSubcategories()}onCategoryFilterChange(){this.currentPage=1,this.loadSubcategories()}onPageChange(t){this.currentPage=t,this.loadSubcategories()}getPaginationNumbers(){let t=[],e=Math.max(1,this.currentPage-2),n=Math.min(this.totalPages,this.currentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}getCategoryName(t){let e=this.categories.find(n=>n.categoryId===t);return e?e.categoryName:""}clearMessages(){this.successMessage="",this.errorMessage=""}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{t.get(e)?.markAsTouched({onlySelf:!0})})}trackBySubcategoryId(t,e){return e.subcategoryId}trackByCategoryId(t,e){return e.categoryId}static \u0275fac=function(e){return new(e||r)(P(le),P(tt),P(Be))};static \u0275cmp=S({type:r,selectors:[["app-menu-subcategory"]],decls:75,vars:32,consts:[[1,"menu-subcategory-container"],["class","alert alert-success alert-compact mb-2",4,"ngIf"],["class","alert alert-danger alert-compact mb-2",4,"ngIf"],[1,"subcategory-form","card"],[1,"card-header","py-2"],[1,"card-title","mb-0","small"],[1,"bi","bi-bookmark","me-1"],[1,"card-body","py-2"],[3,"ngSubmit","formGroup"],[1,"form-grid","mb-3"],[1,"form-group"],[1,"form-label","text-xs"],["formControlName","categoryId",1,"form-select","form-select-sm","text-xs",3,"disabled"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-muted text-xs mt-1",4,"ngIf"],["class","text-danger text-xs mt-1",4,"ngIf"],["type","text","formControlName","subcategoryName","placeholder","Enter subcategory name",1,"form-control","form-control-sm","text-xs",3,"disabled"],["formControlName","description","placeholder","Subcategory description","rows","2",1,"form-control","form-control-sm","text-xs",3,"disabled"],["type","number","formControlName","displayOrder","min","0",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"form-check","mt-3"],["type","checkbox","formControlName","isActive",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"form-check-label","text-xs"],[1,"form-actions","mt-3","pt-2","border-top"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-xs",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"text-xs"],[1,"subcategories-list","card","mt-3"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap"],[1,"bi","bi-list","me-1"],[1,"badge","badge-sm","bg-primary"],[1,"d-flex","gap-2","flex-wrap"],[1,"input-group","input-group-sm",2,"width","200px"],["type","text","placeholder","Search subcategories...",1,"form-control","text-xs",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-primary","btn-sm","px-2",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm","text-xs",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-body","p-0"],["class","text-center py-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-2 px-3 pb-2",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-2"],[1,"bi","bi-check-circle","me-1"],[1,"small"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-2"],[1,"bi","bi-exclamation-circle","me-1"],[3,"value"],[1,"text-muted","text-xs","mt-1"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"text-danger","text-xs","mt-1"],[1,"bi","bi-save","me-1"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-1","small"],[1,"table-responsive"],[1,"table","table-hover","table-sm","table-compact","mb-0"],[1,"table-light"],[1,"py-2","text-xs"],["width","120",1,"py-2","text-xs"],[3,"table-warning",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"py-2"],[1,"badge","badge-sm","bg-info"],[1,"badge","badge-sm","bg-secondary"],[1,"badge","badge-sm",3,"ngClass"],[1,"btn-group","btn-group-sm"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs","px-1",3,"click"],[1,"bi","bi-pencil"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs","px-1",3,"click","disabled"],[1,"bi","bi-trash"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-bookmark","display-4","mb-2","d-block"],[1,"mt-2","px-3","pb-2"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link","px-2","py-1","text-xs",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link","px-2","py-1","text-xs",3,"click"]],template:function(e,n){if(e&1&&(i(0,"div",0),_(1,wr,5,1,"div",1)(2,kr,5,1,"div",2),i(3,"div",3)(4,"div",4)(5,"h6",5),d(6,"i",6),s(7),o()(),i(8,"div",7)(9,"form",8),g("ngSubmit",function(){return n.onSubmit()}),i(10,"div",9)(11,"div",10)(12,"label",11),s(13,"Category *"),o(),i(14,"select",12)(15,"option",13),s(16,"Select Category"),o(),_(17,Ir,2,2,"option",14),o(),_(18,Er,3,0,"div",15)(19,Tr,2,0,"div",16),o(),i(20,"div",10)(21,"label",11),s(22,"Subcategory Name *"),o(),d(23,"input",17),_(24,Lr,2,0,"div",16),o(),i(25,"div",10)(26,"label",11),s(27,"Description"),o(),d(28,"textarea",18),o(),i(29,"div",10)(30,"label",11),s(31,"Display Order"),o(),d(32,"input",19),o(),i(33,"div",10)(34,"div",20),d(35,"input",21),i(36,"label",22),s(37,"Active Subcategory"),o()()()(),i(38,"div",23)(39,"button",24),_(40,Ar,1,0,"span",25)(41,Rr,2,1,"span",26)(42,Nr,3,1,"span",26),o(),i(43,"button",27),g("click",function(){return n.resetForm()}),d(44,"i",28),i(45,"span",29),s(46,"Reset"),o()()()()()(),i(47,"div",30)(48,"div",4)(49,"div",31)(50,"h6",5),d(51,"i",32),s(52," Subcategories "),i(53,"span",33),s(54),o()(),i(55,"div",34)(56,"div",35)(57,"input",36),T("ngModelChange",function(m){return E(n.searchTerm,m)||(n.searchTerm=m),m}),g("keyup.enter",function(){return n.onSearch()}),o(),i(58,"button",37),g("click",function(){return n.onSearch()}),d(59,"i",38),o()(),i(60,"select",39),T("ngModelChange",function(m){return E(n.filterCategoryId,m)||(n.filterCategoryId=m),m}),g("change",function(){return n.onCategoryFilterChange()}),i(61,"option",40),s(62,"All Categories"),o(),_(63,Dr,2,2,"option",41),o(),i(64,"select",39),T("ngModelChange",function(m){return E(n.filterActive,m)||(n.filterActive=m),m}),g("change",function(){return n.onSearch()}),i(65,"option",40),s(66,"All Status"),o(),i(67,"option",40),s(68,"Active"),o(),i(69,"option",40),s(70,"Inactive"),o()()()()(),i(71,"div",42),_(72,Fr,4,0,"div",43)(73,Br,23,3,"div",44)(74,$r,15,13,"nav",45),o()()()),e&2){let c,m;a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(5),C(" ",n.editingSubcategoryId?"Edit Subcategory":"Add New Subcategory"," "),a(2),l("formGroup",n.subcategoryForm),a(5),l("disabled",n.isSubmitting||n.isLoadingCategories),a(3),l("ngForOf",n.categories)("ngForTrackBy",n.trackByCategoryId),a(),l("ngIf",n.isLoadingCategories),a(),l("ngIf",((c=n.subcategoryForm.get("categoryId"))==null?null:c.invalid)&&((c=n.subcategoryForm.get("categoryId"))==null?null:c.touched)),a(4),l("disabled",n.isSubmitting),a(),l("ngIf",((m=n.subcategoryForm.get("subcategoryName"))==null?null:m.invalid)&&((m=n.subcategoryForm.get("subcategoryName"))==null?null:m.touched)),a(4),l("disabled",n.isSubmitting),a(4),l("disabled",n.isSubmitting),a(3),l("disabled",n.isSubmitting),a(4),l("disabled",n.subcategoryForm.invalid||n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",!n.isSubmitting),a(),l("disabled",n.isSubmitting),a(11),h(n.totalCount),a(3),I("ngModel",n.searchTerm),a(3),I("ngModel",n.filterCategoryId),a(),l("ngValue",void 0),a(2),l("ngForOf",n.categories)("ngForTrackBy",n.trackByCategoryId),a(),I("ngModel",n.filterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.totalPages>1)}},dependencies:[k,ue,N,L,fe,z,te,he,ve,$,be,_e,Ce,U,ee,Ve,K,de,se,ce],styles:[".menu-subcategory-container[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:.875rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem;width:100%}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;margin-bottom:.25rem;color:#374151}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e5e7eb}.table-compact[_ngcontent-%COMP%]{font-size:.75rem}.table-compact[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-compact[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.375rem .5rem;vertical-align:middle}.badge-sm[_ngcontent-%COMP%]{font-size:.6rem;padding:.2rem .4rem}.btn-xs[_ngcontent-%COMP%]{padding:.125rem .25rem;font-size:.65rem;line-height:1.2;border-radius:.2rem}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.alert-compact[_ngcontent-%COMP%]   .btn-close-sm[_ngcontent-%COMP%]{font-size:.65rem;padding:.125rem}.card-title[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.d-flex.gap-2[_ngcontent-%COMP%]{gap:.5rem}.d-flex.gap-2[_ngcontent-%COMP%]   .input-group-sm[_ngcontent-%COMP%]{min-width:180px}.d-flex.gap-2[_ngcontent-%COMP%]   .form-select-sm[_ngcontent-%COMP%]{min-width:120px}.bg-success[_ngcontent-%COMP%]{background-color:#10b981!important}.bg-danger[_ngcontent-%COMP%]{background-color:#ef4444!important}.bg-info[_ngcontent-%COMP%]{background-color:#3b82f6!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6b7280!important}.bg-primary[_ngcontent-%COMP%]{background-color:#8b5cf6!important}.form-control-sm[_ngcontent-%COMP%]:focus, .form-select-sm[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 .2rem #8b5cf640}.badge.bg-info[_ngcontent-%COMP%]{color:#fff;font-weight:500}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.d-flex.gap-2[_ngcontent-%COMP%]   .input-group-sm[_ngcontent-%COMP%], .d-flex.gap-2[_ngcontent-%COMP%]   .form-select-sm[_ngcontent-%COMP%]{width:100%!important;min-width:auto}.table-responsive[_ngcontent-%COMP%]{font-size:.65rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#8b5cf60d}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6b7280;border-color:#d1d5db}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{color:#8b5cf6;background-color:#f3f4f6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #8b5cf640}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#8b5cf6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#9ca3af;background-color:#f9fafb}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;border-bottom:2px solid #e2e8f0;font-weight:600;color:#475569}.table-warning[_ngcontent-%COMP%]{background-color:#f59e0b1a}"]})};var Tt=class r{constructor(t){this.http=t}baseUrl=D.apiUrl;apiUrl=`${D.apiBaseUrl}/MenuItem`;getAuthHeaders(){let t=this.getToken();return new Te({Authorization:`Bearer ${t}`})}getToken(){return localStorage.getItem("auth_token")}getMenuItems(t,e,n,c,m,b=1,x=10,y){let A=new pe().set("page",b.toString()).set("pageSize",x.toString());return t!==void 0&&(A=A.set("categoryId",t.toString())),e!==void 0&&(A=A.set("subcategoryId",e.toString())),n!==void 0&&(A=A.set("isActive",n.toString())),c!==void 0&&(A=A.set("isPromotion",c.toString())),m&&(A=A.set("availabilityStatus",m)),y&&(A=A.set("searchTerm",y)),this.http.get(this.apiUrl,{headers:this.getAuthHeaders(),params:A})}getMenuItem(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}createMenuItem(t,e){let n=new FormData;if(Object.keys(t).forEach(c=>{let m=t[c];m!=null&&(typeof m=="object"?n.append(c,JSON.stringify(m)):n.append(c,m.toString()))}),e)for(let c=0;c<e.length;c++)n.append("images",e[c]);return this.http.post(this.apiUrl,n,{headers:this.getAuthHeaders()})}updateMenuItem(t,e,n){let c=new FormData;if(Object.keys(e).forEach(m=>{let b=e[m];b!=null&&(typeof b=="object"?c.append(m,JSON.stringify(b)):c.append(m,b.toString()))}),n)for(let m=0;m<n.length;m++)c.append("images",n[m]);return this.http.put(`${this.apiUrl}/${t}`,c,{headers:this.getAuthHeaders()})}deleteMenuItem(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()})}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function qr(r,t){if(r&1){let e=v();i(0,"div",69),d(1,"i",70),i(2,"span",71),s(3),o(),i(4,"button",72),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.successMessage)}}function Gr(r,t){if(r&1){let e=v();i(0,"div",73),d(1,"i",74),i(2,"span",71),s(3),o(),i(4,"button",72),g("click",function(){u(e);let c=p();return f(c.clearMessages())}),o()()}if(r&2){let e=p();a(3),h(e.errorMessage)}}function Hr(r,t){if(r&1&&(i(0,"option",75),s(1),o()),r&2){let e=t.$implicit;l("value",e.categoryId),a(),C(" ",e.categoryName," ")}}function Wr(r,t){r&1&&(i(0,"div",76),d(1,"i",77),s(2,"Loading categories... "),o())}function Yr(r,t){r&1&&(i(0,"div",78),s(1," Category selection is required "),o())}function Qr(r,t){if(r&1&&(i(0,"option",75),s(1),o()),r&2){let e=t.$implicit;l("value",e.subcategoryId),a(),C(" ",e.subcategoryName," ")}}function Kr(r,t){r&1&&(i(0,"div",76),d(1,"i",77),s(2,"Loading subcategories... "),o())}function Jr(r,t){r&1&&(i(0,"div",78),s(1," Item name is required "),o())}function Zr(r,t){r&1&&(i(0,"div",78),s(1," Price is required and must be positive "),o())}function Xr(r,t){r&1&&(i(0,"div",17)(1,"label",18),s(2,"Discounted Price"),o(),i(3,"div",26)(4,"span",79),s(5,"\u20B9"),o(),d(6,"input",80),o(),i(7,"small",81),s(8,"Auto-calculated from discount percentage"),o()())}function ea(r,t){if(r&1&&(i(0,"option",75),s(1),o()),r&2){let e=t.$implicit;l("value",e.value),a(),C(" ",e.label," ")}}function ta(r,t){if(r&1&&(i(0,"div",17)(1,"label",18),s(2,"Spice Level"),o(),i(3,"select",99),_(4,ea,2,2,"option",64),o()()),r&2){let e=p(2);a(3),l("disabled",e.isSubmitting),a(),l("ngForOf",e.spiceLevels)}}function na(r,t){if(r&1&&(i(0,"option",75),s(1),o()),r&2){let e=t.$implicit;l("value",e.value),a(),C(" ",e.label," ")}}function ia(r,t){if(r&1&&(i(0,"div",13)(1,"h6",14),d(2,"i",10),s(3,"Advanced Options "),o(),i(4,"div",16)(5,"div",17)(6,"label",18),s(7,"Dietary Information"),o(),i(8,"div",82)(9,"div",83),d(10,"input",84),i(11,"label",36),d(12,"i",85),s(13,"Vegetarian "),o()(),i(14,"div",83),d(15,"input",86),i(16,"label",36),d(17,"i",87),s(18,"Non Veg "),o()(),i(19,"div",83),d(20,"input",88),i(21,"label",36),d(22,"i",89),s(23,"Spicy "),o()()()(),_(24,ta,5,2,"div",30),i(25,"div",17)(26,"label",18),s(27,"Ingredients"),o(),d(28,"textarea",90),o(),i(29,"div",17)(30,"label",18),s(31,"Allergen Information"),o(),d(32,"textarea",91),o(),i(33,"div",17)(34,"label",18),s(35,"Nutritional Info (JSON)"),o(),d(36,"textarea",92),i(37,"small",93),s(38,"Enter as JSON format or simple text"),o()(),i(39,"div",17)(40,"label",18),s(41,"Preparation Time"),o(),i(42,"div",26),d(43,"input",94),i(44,"span",27),s(45,"minutes"),o()()(),i(46,"div",17)(47,"label",18),s(48,"Availability Status"),o(),i(49,"select",95),_(50,na,2,2,"option",64),o()(),i(51,"div",17)(52,"label",18),s(53,"Display Order"),o(),d(54,"input",96),o(),i(55,"div",17)(56,"div",97),d(57,"input",98),i(58,"label",36),s(59,"Active Item"),o()()()()()),r&2){let e,n=p();a(10),l("disabled",n.isSubmitting),a(5),l("disabled",n.isSubmitting),a(5),l("disabled",n.isSubmitting),a(4),l("ngIf",(e=n.itemForm.get("isSpicy"))==null?null:e.value),a(4),l("disabled",n.isSubmitting),a(4),l("disabled",n.isSubmitting),a(4),l("disabled",n.isSubmitting),a(7),l("disabled",n.isSubmitting),a(6),l("disabled",n.isSubmitting),a(),l("ngForOf",n.availabilityStatuses),a(4),l("disabled",n.isSubmitting),a(3),l("disabled",n.isSubmitting)}}function oa(r,t){if(r&1&&(i(0,"div",17)(1,"label",18),s(2,"Promotion Label"),o(),d(3,"input",100),o()),r&2){let e=p();a(3),l("disabled",e.isSubmitting)}}function ra(r,t){if(r&1){let e=v();i(0,"div",104),d(1,"img",105),i(2,"button",106),g("click",function(){let c=u(e).index,m=p(2);return f(m.removePreviewImage(c))}),d(3,"i",107),o()()}if(r&2){let e=t.$implicit,n=t.index;a(),l("src",e,Ee)("alt","Preview "+(n+1))}}function aa(r,t){if(r&1&&(i(0,"div",101)(1,"div",102),_(2,ra,4,2,"div",103),o()()),r&2){let e=p();a(2),l("ngForOf",e.previewImages)}}function sa(r,t){r&1&&d(0,"span",77)}function ca(r,t){if(r&1&&(i(0,"span",51),s(1),o()),r&2){let e=p();a(),C(" ",e.editingItemId?"Updating...":"Saving..."," ")}}function la(r,t){if(r&1&&(i(0,"span",51),d(1,"i",108),s(2),o()),r&2){let e=p();a(2),C("",e.editingItemId?"Update":"Save"," Item ")}}function da(r,t){if(r&1&&(i(0,"option",62),s(1),o()),r&2){let e=t.$implicit;l("ngValue",e.categoryId),a(),C(" ",e.categoryName," ")}}function ma(r,t){if(r&1&&(i(0,"option",75),s(1),o()),r&2){let e=t.$implicit;l("value",e.value),a(),C(" ",e.label," ")}}function pa(r,t){r&1&&(i(0,"div",109),d(1,"div",110),i(2,"div",111),s(3,"Loading menu items..."),o()())}function ga(r,t){if(r&1&&d(0,"img",143),r&2){let e=p().$implicit;l("src",e.images[0],Ee)("alt",e.itemName)}}function ua(r,t){r&1&&(i(0,"div",144),d(1,"i",145),o())}function fa(r,t){if(r&1&&(i(0,"div",146)(1,"span",147),s(2),o()()),r&2){let e=p().$implicit;a(2),h(e.promotionLabel||"Special")}}function _a(r,t){r&1&&(i(0,"span",148),d(1,"i",149),o())}function ba(r,t){r&1&&(i(0,"span",150),d(1,"i",151),o())}function Ca(r,t){r&1&&(i(0,"span",152),d(1,"i",153),o())}function ha(r,t){if(r&1&&(i(0,"p",154),s(1),ne(2,"slice"),o()),r&2){let e=p().$implicit;a(),C(" ",e.description.length>80?Zt(2,1,e.description,0,80)+"...":e.description," ")}}function va(r,t){if(r&1&&(i(0,"span"),s(1),o()),r&2){let e=p().$implicit;a(),C(" / ",e.subcategoryName,"")}}function Ma(r,t){if(r&1&&(i(0,"span",155),s(1),o()),r&2){let e=p().$implicit;a(),C(" \u20B9",e.price," ")}}function Oa(r,t){if(r&1&&(i(0,"span",156),s(1),o()),r&2){let e=p().$implicit;a(),C(" ",e.discountPercentage,"% OFF ")}}function Pa(r,t){if(r&1){let e=v();i(0,"div",115)(1,"div",116)(2,"div",117),_(3,ga,1,2,"img",118)(4,ua,2,0,"ng-template",null,0,ie)(6,fa,3,1,"div",119),i(7,"div",120)(8,"span",121),s(9),o()()(),i(10,"div",122)(11,"div",123)(12,"h6",124),s(13),o(),i(14,"div",125),_(15,_a,2,0,"span",126)(16,ba,2,0,"span",127)(17,Ca,2,0,"span",128),o()(),_(18,ha,3,5,"p",129),i(19,"div",130)(20,"div",131),d(21,"i",132),s(22),_(23,va,2,1,"span",133),o(),i(24,"div",134)(25,"span",135),s(26),o(),_(27,Ma,2,1,"span",136)(28,Oa,2,1,"span",137),o()(),i(29,"div",138)(30,"button",139),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.editMenuItem(c))}),d(31,"i",140),s(32,"Edit "),o(),i(33,"button",141),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.deleteMenuItem(c))}),d(34,"i",142),o()()()()()}if(r&2){let e=t.$implicit,n=Y(5),c=p(2);a(3),l("ngIf",e.images.length>0)("ngIfElse",n),a(3),l("ngIf",e.isPromotion),a(2),l("ngClass",c.getStatusBadgeClass(e.availabilityStatus)),a(),C(" ",c.getAvailabilityStatusLabel(e.availabilityStatus)," "),a(4),h(e.itemName),a(2),l("ngIf",e.isVegetarian),a(),l("ngIf",e.isVegan),a(),l("ngIf",e.isSpicy),a(),l("ngIf",e.description),a(4),C(" ",e.categoryName," "),a(),l("ngIf",e.subcategoryName),a(3),C("\u20B9",e.effectivePrice,""),a(),l("ngIf",e.hasDiscount),a(),l("ngIf",e.discountPercentage>0)}}function xa(r,t){r&1&&(i(0,"div",157),d(1,"i",158),i(2,"h6",159),s(3,"No menu items found"),o(),i(4,"p",160),s(5,"Add your first menu item to get started"),o()())}function ya(r,t){if(r&1&&(i(0,"div",112),_(1,Pa,35,15,"div",113)(2,xa,6,0,"div",114),o()),r&2){let e=p();a(),l("ngForOf",e.menuItems)("ngForTrackBy",e.trackByItemId),a(),l("ngIf",e.menuItems.length===0)}}function Sa(r,t){if(r&1){let e=v();i(0,"li",163)(1,"button",170),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.onPageChange(c))}),s(2),o()()}if(r&2){let e=t.$implicit,n=p(2);M("active",e===n.currentPage),a(2),h(e)}}function wa(r,t){if(r&1){let e=v();i(0,"nav",161)(1,"ul",162)(2,"li",163)(3,"button",164),g("click",function(){u(e);let c=p();return f(c.onPageChange(1))}),d(4,"i",165),o()(),i(5,"li",163)(6,"button",164),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage-1))}),d(7,"i",166),o()(),_(8,Sa,3,3,"li",167),i(9,"li",163)(10,"button",164),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.currentPage+1))}),d(11,"i",168),o()(),i(12,"li",163)(13,"button",164),g("click",function(){u(e);let c=p();return f(c.onPageChange(c.totalPages))}),d(14,"i",169),o()()()()}if(r&2){let e=p();a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),M("disabled",e.currentPage<=1),a(),l("disabled",e.currentPage<=1),a(2),l("ngForOf",e.getPaginationNumbers()),a(),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages),a(2),M("disabled",e.currentPage>=e.totalPages),a(),l("disabled",e.currentPage>=e.totalPages)}}var it=class r{constructor(t,e,n,c){this.fb=t;this.menuItemService=e;this.categoryService=n;this.subcategoryService=c}itemForm;menuItems=[];categories=[];subcategories=[];selectedFiles=null;previewImages=[];isLoading=!1;isLoadingCategories=!1;isLoadingSubcategories=!1;isSubmitting=!1;successMessage="";errorMessage="";editingItemId=null;showAdvancedOptions=!1;currentPage=1;pageSize=10;totalCount=0;totalPages=0;searchTerm="";filterActive;filterCategoryId;filterSubcategoryId;filterIsPromotion;filterAvailabilityStatus;availabilityStatuses=[{value:"available",label:"Available"},{value:"out_of_stock",label:"Out of Stock"},{value:"limited",label:"Limited"}];spiceLevels=[{value:0,label:"Not Spicy"},{value:1,label:"Mild"},{value:2,label:"Medium"},{value:3,label:"Hot"},{value:4,label:"Very Hot"},{value:5,label:"Extremely Hot"}];destroy$=new B;ngOnInit(){this.initializeForm(),this.loadCategories(),this.loadMenuItems()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.itemForm=this.fb.group({categoryId:["",O.required],subcategoryId:[""],itemName:["",[O.required,O.maxLength(255)]],description:[""],price:["",[O.required,O.min(0)]],discountedPrice:["",[O.min(0)]],discountPercentage:[0,[O.min(0),O.max(100)]],isPromotion:[!1],promotionLabel:["",O.maxLength(100)],ingredients:[""],allergenInfo:[""],nutritionalInfo:[""],isVegetarian:[!1],isVegan:[!1],isSpicy:[!1],spiceLevel:[0,[O.min(0),O.max(5)]],preparationTime:[0,[O.min(0)]],availabilityStatus:["available"],displayOrder:[0,[O.min(0)]],isActive:[!0]}),this.itemForm.get("discountPercentage")?.valueChanges.subscribe(t=>{this.calculateDiscountedPrice(t)}),this.itemForm.get("price")?.valueChanges.subscribe(()=>{let t=this.itemForm.get("discountPercentage")?.value;t>0&&this.calculateDiscountedPrice(t)}),this.itemForm.get("categoryId")?.valueChanges.subscribe(t=>{t?(this.loadSubcategories(t),this.itemForm.patchValue({subcategoryId:""})):this.subcategories=[]})}calculateDiscountedPrice(t){let e=this.itemForm.get("price")?.value;if(e&&t>0){let n=e-e*t/100;this.itemForm.patchValue({discountedPrice:Math.round(n*100)/100})}else this.itemForm.patchValue({discountedPrice:""})}loadCategories(){this.isLoadingCategories=!0,this.categoryService.getCategories(!0,1,100).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoadingCategories=!1,t.success&&t.data&&(this.categories=t.data.filter(e=>e.isActive))},error:t=>{this.isLoadingCategories=!1,this.errorMessage="Failed to load categories",console.error("Load categories error:",t)}})}loadSubcategories(t){this.isLoadingSubcategories=!0,this.subcategoryService.getSubcategories(t,!0,1,100).pipe(w(this.destroy$)).subscribe({next:e=>{this.isLoadingSubcategories=!1,e.success&&e.data&&(this.subcategories=e.data.filter(n=>n.isActive))},error:e=>{this.isLoadingSubcategories=!1,console.error("Load subcategories error:",e),this.subcategories=[]}})}loadMenuItems(){this.isLoading=!0,this.clearMessages(),this.menuItemService.getMenuItems(this.filterCategoryId,this.filterSubcategoryId,this.filterActive,this.filterIsPromotion,this.filterAvailabilityStatus,this.currentPage,this.pageSize,this.searchTerm).pipe(w(this.destroy$)).subscribe({next:t=>{this.isLoading=!1,t.success&&t.data&&(this.menuItems=t.data,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0)},error:t=>{this.isLoading=!1,this.errorMessage="Failed to load menu items",console.error("Load menu items error:",t)}})}onFileSelect(t){let e=t.target.files;if(e&&e.length>0){this.selectedFiles=e,this.previewImages=[];for(let n=0;n<Math.min(e.length,5);n++){let c=e[n];if(c.type.startsWith("image/")){let m=new FileReader;m.onload=b=>{this.previewImages.push(b.target.result)},m.readAsDataURL(c)}}}}getStatusBadgeClass(t){switch(t){case"available":return"bg-success";case"out_of_stock":return"bg-danger";case"limited":return"bg-warning";default:return"bg-secondary"}}removePreviewImage(t){this.previewImages.splice(t,1)}onSubmit(){if(this.itemForm.invalid){this.markFormGroupTouched(this.itemForm);return}this.isSubmitting=!0,this.clearMessages();let t=this.itemForm.value,e;if(t.nutritionalInfo)try{e=JSON.parse(t.nutritionalInfo)}catch{e={notes:t.nutritionalInfo}}let n={categoryId:parseInt(t.categoryId),subcategoryId:t.subcategoryId?parseInt(t.subcategoryId):void 0,itemName:t.itemName,description:t.description,price:parseFloat(t.price),discountedPrice:t.discountedPrice?parseFloat(t.discountedPrice):void 0,discountPercentage:parseInt(t.discountPercentage),isPromotion:t.isPromotion,promotionLabel:t.promotionLabel,ingredients:t.ingredients,allergenInfo:t.allergenInfo,nutritionalInfo:e,isVegetarian:t.isVegetarian,isVegan:t.isVegan,isSpicy:t.isSpicy,spiceLevel:parseInt(t.spiceLevel),preparationTime:parseInt(t.preparationTime),availabilityStatus:t.availabilityStatus,displayOrder:parseInt(t.displayOrder),isActive:t.isActive};(this.editingItemId?this.menuItemService.updateMenuItem(this.editingItemId,n,this.selectedFiles||void 0):this.menuItemService.createMenuItem(n,this.selectedFiles||void 0)).pipe(w(this.destroy$)).subscribe({next:m=>{this.isSubmitting=!1,m.success?(this.successMessage=this.editingItemId?`Menu item "${n.itemName}" updated successfully!`:`Menu item "${n.itemName}" created successfully!`,this.resetForm(),this.loadMenuItems()):this.errorMessage=m.message||"Failed to save menu item"},error:m=>{this.isSubmitting=!1,this.errorMessage=m.error?.message||"Failed to save menu item",console.error("Save menu item error:",m)}})}editMenuItem(t){this.editingItemId=t.itemId,t.subcategoryId&&this.loadSubcategories(t.categoryId),this.itemForm.patchValue({categoryId:t.categoryId,subcategoryId:t.subcategoryId,itemName:t.itemName,description:t.description,price:t.price,discountedPrice:t.discountedPrice,discountPercentage:t.discountPercentage,isPromotion:t.isPromotion,promotionLabel:t.promotionLabel,ingredients:t.ingredients,allergenInfo:t.allergenInfo,nutritionalInfo:t.nutritionalInfo?JSON.stringify(t.nutritionalInfo):"",isVegetarian:t.isVegetarian,isVegan:t.isVegan,isSpicy:t.isSpicy,spiceLevel:t.spiceLevel,preparationTime:t.preparationTime,availabilityStatus:t.availabilityStatus,displayOrder:t.displayOrder,isActive:t.isActive}),this.previewImages=[...t.images],this.selectedFiles=null,document.querySelector(".item-form")?.scrollIntoView({behavior:"smooth"})}deleteMenuItem(t){let e=`Are you sure you want to delete menu item "${t.itemName}"?

This action cannot be undone.`;confirm(e)&&this.menuItemService.deleteMenuItem(t.itemId).pipe(w(this.destroy$)).subscribe({next:n=>{n.success?(this.successMessage=`Menu item "${t.itemName}" deleted successfully!`,this.loadMenuItems()):this.errorMessage=n.message||"Failed to delete menu item"},error:n=>{this.errorMessage=n.error?.message||"Failed to delete menu item",console.error("Delete menu item error:",n)}})}toggleAdvancedOptions(){this.showAdvancedOptions=!this.showAdvancedOptions}resetForm(){this.itemForm.reset(),this.itemForm.patchValue({isActive:!0,displayOrder:0,discountPercentage:0,spiceLevel:0,preparationTime:0,availabilityStatus:"available"}),this.editingItemId=null,this.selectedFiles=null,this.previewImages=[],this.showAdvancedOptions=!1,this.clearMessages()}onSearch(){this.currentPage=1,this.loadMenuItems()}onCategoryFilterChange(){this.filterSubcategoryId=void 0,this.currentPage=1,this.loadMenuItems()}onPageChange(t){this.currentPage=t,this.loadMenuItems()}getPaginationNumbers(){let t=[],e=Math.max(1,this.currentPage-2),n=Math.min(this.totalPages,this.currentPage+2);for(let c=e;c<=n;c++)t.push(c);return t}getFullImageUrl(t){debugger;return`${this.menuItemService.baseUrl}/${t}`}getCategoryName(t){let e=this.categories.find(n=>n.categoryId===t);return e?e.categoryName:""}getSubcategoryName(t){let e=this.subcategories.find(n=>n.subcategoryId===t);return e?e.subcategoryName:""}getAvailabilityStatusLabel(t){let e=this.availabilityStatuses.find(n=>n.value===t);return e?e.label:t}getSpiceLevelLabel(t){let e=this.spiceLevels.find(n=>n.value===t);return e?e.label:t.toString()}clearMessages(){this.successMessage="",this.errorMessage=""}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{t.get(e)?.markAsTouched({onlySelf:!0})})}trackByItemId(t,e){return e.itemId}trackByCategoryId(t,e){return e.categoryId}trackBySubcategoryId(t,e){return e.subcategoryId}static \u0275fac=function(e){return new(e||r)(P(le),P(Tt),P(Be),P(tt))};static \u0275cmp=S({type:r,selectors:[["app-menu-item"]],decls:136,vars:50,consts:[["noImage",""],[1,"menu-item-container"],["class","alert alert-success alert-compact mb-2",4,"ngIf"],["class","alert alert-danger alert-compact mb-2",4,"ngIf"],[1,"item-form","card"],[1,"card-header","py-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0","small"],[1,"bi","bi-basket","me-1"],["type","button",1,"btn","btn-outline-secondary","btn-xs",3,"click"],[1,"bi","bi-gear","me-1"],[1,"card-body","py-2"],[3,"ngSubmit","formGroup"],[1,"form-section","mb-3"],[1,"section-title","text-xs","mb-2"],[1,"bi","bi-info-circle","me-1"],[1,"form-grid"],[1,"form-group"],[1,"form-label","text-xs"],["formControlName","categoryId",1,"form-select","form-select-sm","text-xs",3,"disabled"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-muted text-xs mt-1",4,"ngIf"],["class","text-danger text-xs mt-1",4,"ngIf"],["formControlName","subcategoryId",1,"form-select","form-select-sm","text-xs",3,"disabled"],["type","text","formControlName","itemName","placeholder","Enter item name",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"input-group","input-group-sm"],[1,"input-group-text","text-xs"],["type","number","step","0.01","min","0","formControlName","price","placeholder","0.00",1,"form-control","text-xs",3,"disabled"],["type","number","min","0","max","100","formControlName","discountPercentage","placeholder","0",1,"form-control","text-xs",3,"disabled"],["class","form-group",4,"ngIf"],["formControlName","description","placeholder","Item description","rows","3",1,"form-control","form-control-sm","text-xs",3,"disabled"],["class","form-section mb-3",4,"ngIf"],[1,"bi","bi-star","me-1"],[1,"form-check"],["type","checkbox","formControlName","isPromotion",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"form-check-label","text-xs"],[1,"bi","bi-images","me-1"],[1,"image-upload-section"],[1,"upload-area"],["type","file","id","imageUpload","multiple","","accept","image/*",1,"d-none",3,"change"],["for","imageUpload",1,"upload-label"],[1,"bi","bi-cloud-upload","display-6","text-muted","mb-2","d-block"],[1,"text-xs","text-muted"],["class","image-previews mt-2",4,"ngIf"],[1,"form-actions","mt-3","pt-2","border-top"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-xs",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"text-xs"],[1,"items-list","card","mt-3"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap"],[1,"bi","bi-list","me-1"],[1,"badge","badge-sm","bg-primary"],[1,"d-flex","gap-2","flex-wrap"],[1,"input-group","input-group-sm",2,"width","200px"],["type","text","placeholder","Search items...",1,"form-control","text-xs",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-primary","btn-sm","px-2",3,"click"],[1,"bi","bi-search"],[1,"form-select","form-select-sm","text-xs",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value",4,"ngFor","ngForOf"],[1,"card-body","p-0"],["class","text-center py-3",4,"ngIf"],["class","items-grid p-3",4,"ngIf"],["class","mt-2 px-3 pb-2",4,"ngIf"],[1,"alert","alert-success","alert-compact","mb-2"],[1,"bi","bi-check-circle","me-1"],[1,"small"],["type","button",1,"btn-close","btn-close-sm",3,"click"],[1,"alert","alert-danger","alert-compact","mb-2"],[1,"bi","bi-exclamation-circle","me-1"],[3,"value"],[1,"text-muted","text-xs","mt-1"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"text-danger","text-xs","mt-1"],[1,"input-group-text","text-xs","bg-success","text-white"],["type","number","formControlName","discountedPrice","readonly","",1,"form-control","text-xs","bg-light"],[1,"text-success","text-xs"],[1,"dietary-checkboxes"],[1,"form-check","form-check-inline"],["type","checkbox","formControlName","isVegetarian",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"bi","bi-circle-fill","text-success","me-1"],["type","checkbox","formControlName","isVegan",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"bi","bi-circle-fill","text-danger","me-1"],["type","checkbox","formControlName","isSpicy",1,"form-check-input","form-check-input-sm",3,"disabled"],[1,"bi","bi-fire","text-danger","me-1"],["formControlName","ingredients","placeholder","List main ingredients","rows","2",1,"form-control","form-control-sm","text-xs",3,"disabled"],["formControlName","allergenInfo","placeholder","Contains: nuts, dairy, etc.","rows","2",1,"form-control","form-control-sm","text-xs",3,"disabled"],["formControlName","nutritionalInfo","placeholder",'{"calories": 250, "protein": "15g", "carbs": "30g"}',"rows","2",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"text-muted","text-xs"],["type","number","min","0","formControlName","preparationTime","placeholder","0",1,"form-control","text-xs",3,"disabled"],["formControlName","availabilityStatus",1,"form-select","form-select-sm","text-xs",3,"disabled"],["type","number","min","0","formControlName","displayOrder",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"form-check","mt-3"],["type","checkbox","formControlName","isActive",1,"form-check-input","form-check-input-sm",3,"disabled"],["formControlName","spiceLevel",1,"form-select","form-select-sm","text-xs",3,"disabled"],["type","text","formControlName","promotionLabel","placeholder","e.g., Today's Special, Limited Offer",1,"form-control","form-control-sm","text-xs",3,"disabled"],[1,"image-previews","mt-2"],[1,"preview-grid"],["class","preview-item",4,"ngFor","ngForOf"],[1,"preview-item"],[1,"preview-image",3,"src","alt"],["type","button","title","Remove image",1,"btn","btn-danger","btn-xs","remove-image",3,"click"],[1,"bi","bi-x"],[1,"bi","bi-save","me-1"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-1","small"],[1,"items-grid","p-3"],["class","item-card",4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-state text-center py-5",4,"ngIf"],[1,"item-card"],[1,"card","h-100"],[1,"item-image"],["class","card-img-top",3,"src","alt",4,"ngIf","ngIfElse"],["class","promotion-badge",4,"ngIf"],[1,"status-badge"],[1,"badge",3,"ngClass"],[1,"card-body","p-2"],[1,"item-header","mb-1"],[1,"item-name","text-xs","mb-0"],[1,"item-badges"],["class","badge bg-success badge-xs","title","Vegetarian",4,"ngIf"],["class","badge bg-success badge-xs","title","Non Veg",4,"ngIf"],["class","badge bg-danger badge-xs","title","Spicy",4,"ngIf"],["class","item-description text-xs text-muted",4,"ngIf"],[1,"item-details","mb-2"],[1,"category-info","text-xs","text-muted"],[1,"bi","bi-tag","me-1"],[4,"ngIf"],[1,"price-info"],[1,"current-price","fw-bold"],["class","original-price text-muted text-decoration-line-through ms-1",4,"ngIf"],["class","discount-badge badge bg-success ms-1",4,"ngIf"],[1,"item-actions","d-flex","gap-1"],["type","button","title","Edit",1,"btn","btn-outline-primary","btn-xs","flex-grow-1",3,"click"],[1,"bi","bi-pencil","me-1"],["type","button","title","Delete",1,"btn","btn-outline-danger","btn-xs",3,"click"],[1,"bi","bi-trash"],[1,"card-img-top",3,"src","alt"],[1,"no-image-placeholder"],[1,"bi","bi-image","text-muted","display-4"],[1,"promotion-badge"],[1,"badge","bg-danger"],["title","Vegetarian",1,"badge","bg-success","badge-xs"],[1,"bi","bi-circle-fill"],["title","Non Veg",1,"badge","bg-success","badge-xs"],[1,"bi","bi-heart-fill"],["title","Spicy",1,"badge","bg-danger","badge-xs"],[1,"bi","bi-fire"],[1,"item-description","text-xs","text-muted"],[1,"original-price","text-muted","text-decoration-line-through","ms-1"],[1,"discount-badge","badge","bg-success","ms-1"],[1,"empty-state","text-center","py-5"],[1,"bi","bi-basket","display-1","text-muted","mb-3","d-block"],[1,"text-muted"],[1,"text-muted","small"],[1,"mt-2","px-3","pb-2"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link","px-2","py-1","text-xs",3,"click","disabled"],[1,"bi","bi-chevron-double-left"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"bi","bi-chevron-double-right"],[1,"page-link","px-2","py-1","text-xs",3,"click"]],template:function(e,n){if(e&1&&(i(0,"div",1),_(1,qr,5,1,"div",2)(2,Gr,5,1,"div",3),i(3,"div",4)(4,"div",5)(5,"div",6)(6,"h6",7),d(7,"i",8),s(8),o(),i(9,"button",9),g("click",function(){return n.toggleAdvancedOptions()}),d(10,"i",10),s(11),o()()(),i(12,"div",11)(13,"form",12),g("ngSubmit",function(){return n.onSubmit()}),i(14,"div",13)(15,"h6",14),d(16,"i",15),s(17,"Basic Information "),o(),i(18,"div",16)(19,"div",17)(20,"label",18),s(21,"Category *"),o(),i(22,"select",19)(23,"option",20),s(24,"Select Category"),o(),_(25,Hr,2,2,"option",21),o(),_(26,Wr,3,0,"div",22)(27,Yr,2,0,"div",23),o(),i(28,"div",17)(29,"label",18),s(30,"Subcategory"),o(),i(31,"select",24)(32,"option",20),s(33,"Select Subcategory (Optional)"),o(),_(34,Qr,2,2,"option",21),o(),_(35,Kr,3,0,"div",22),o(),i(36,"div",17)(37,"label",18),s(38,"Item Name *"),o(),d(39,"input",25),_(40,Jr,2,0,"div",23),o(),i(41,"div",17)(42,"label",18),s(43,"Price *"),o(),i(44,"div",26)(45,"span",27),s(46,"\u20B9"),o(),d(47,"input",28),o(),_(48,Zr,2,0,"div",23),o(),i(49,"div",17)(50,"label",18),s(51,"Discount %"),o(),i(52,"div",26),d(53,"input",29),i(54,"span",27),s(55,"%"),o()()(),_(56,Xr,9,0,"div",30),o()(),i(57,"div",13)(58,"div",17)(59,"label",18),s(60,"Description"),o(),d(61,"textarea",31),o()(),_(62,ia,60,12,"div",32),i(63,"div",13)(64,"h6",14),d(65,"i",33),s(66,"Promotion Settings "),o(),i(67,"div",16)(68,"div",17)(69,"div",34),d(70,"input",35),i(71,"label",36),s(72,"This is a promotional item"),o()()(),_(73,oa,4,1,"div",30),o()(),i(74,"div",13)(75,"h6",14),d(76,"i",37),s(77,"Images "),o(),i(78,"div",38)(79,"div",39)(80,"input",40),g("change",function(m){return n.onFileSelect(m)}),o(),i(81,"label",41),d(82,"i",42),i(83,"div",43),s(84,"Click to upload images"),o(),i(85,"small",43),s(86,"Support: JPG, PNG, GIF (Max 5MB each)"),o()()(),_(87,aa,3,1,"div",44),o()(),i(88,"div",45)(89,"button",46),_(90,sa,1,0,"span",47)(91,ca,2,1,"span",48)(92,la,3,1,"span",48),o(),i(93,"button",49),g("click",function(){return n.resetForm()}),d(94,"i",50),i(95,"span",51),s(96,"Reset"),o()()()()()(),i(97,"div",52)(98,"div",5)(99,"div",53)(100,"h6",7),d(101,"i",54),s(102," Menu Items "),i(103,"span",55),s(104),o()(),i(105,"div",56)(106,"div",57)(107,"input",58),T("ngModelChange",function(m){return E(n.searchTerm,m)||(n.searchTerm=m),m}),g("keyup.enter",function(){return n.onSearch()}),o(),i(108,"button",59),g("click",function(){return n.onSearch()}),d(109,"i",60),o()(),i(110,"select",61),T("ngModelChange",function(m){return E(n.filterCategoryId,m)||(n.filterCategoryId=m),m}),g("change",function(){return n.onCategoryFilterChange()}),i(111,"option",62),s(112,"All Categories"),o(),_(113,da,2,2,"option",63),o(),i(114,"select",61),T("ngModelChange",function(m){return E(n.filterAvailabilityStatus,m)||(n.filterAvailabilityStatus=m),m}),g("change",function(){return n.onSearch()}),i(115,"option",62),s(116,"All Status"),o(),_(117,ma,2,2,"option",64),o(),i(118,"select",61),T("ngModelChange",function(m){return E(n.filterIsPromotion,m)||(n.filterIsPromotion=m),m}),g("change",function(){return n.onSearch()}),i(119,"option",62),s(120,"All Items"),o(),i(121,"option",62),s(122,"Promotions"),o(),i(123,"option",62),s(124,"Regular"),o()(),i(125,"select",61),T("ngModelChange",function(m){return E(n.filterActive,m)||(n.filterActive=m),m}),g("change",function(){return n.onSearch()}),i(126,"option",62),s(127,"All Status"),o(),i(128,"option",62),s(129,"Active"),o(),i(130,"option",62),s(131,"Inactive"),o()()()()(),i(132,"div",65),_(133,pa,4,0,"div",66)(134,ya,3,3,"div",67)(135,wa,15,13,"nav",68),o()()()),e&2){let c,m,b,x,y,A;a(),l("ngIf",n.successMessage),a(),l("ngIf",n.errorMessage),a(6),C(" ",n.editingItemId?"Edit Menu Item":"Add New Menu Item"," "),a(3),C(" ",n.showAdvancedOptions?"Hide":"Show"," Advanced Options "),a(2),l("formGroup",n.itemForm),a(9),l("disabled",n.isSubmitting||n.isLoadingCategories),a(3),l("ngForOf",n.categories)("ngForTrackBy",n.trackByCategoryId),a(),l("ngIf",n.isLoadingCategories),a(),l("ngIf",((c=n.itemForm.get("categoryId"))==null?null:c.invalid)&&((c=n.itemForm.get("categoryId"))==null?null:c.touched)),a(4),l("disabled",n.isSubmitting||n.isLoadingSubcategories||!((m=n.itemForm.get("categoryId"))!=null&&m.value)),a(3),l("ngForOf",n.subcategories)("ngForTrackBy",n.trackBySubcategoryId),a(),l("ngIf",n.isLoadingSubcategories),a(4),l("disabled",n.isSubmitting),a(),l("ngIf",((b=n.itemForm.get("itemName"))==null?null:b.invalid)&&((b=n.itemForm.get("itemName"))==null?null:b.touched)),a(7),l("disabled",n.isSubmitting),a(),l("ngIf",((x=n.itemForm.get("price"))==null?null:x.invalid)&&((x=n.itemForm.get("price"))==null?null:x.touched)),a(5),l("disabled",n.isSubmitting),a(3),l("ngIf",(y=n.itemForm.get("discountedPrice"))==null?null:y.value),a(5),l("disabled",n.isSubmitting),a(),l("ngIf",n.showAdvancedOptions),a(8),l("disabled",n.isSubmitting),a(3),l("ngIf",(A=n.itemForm.get("isPromotion"))==null?null:A.value),a(14),l("ngIf",n.previewImages.length>0),a(2),l("disabled",n.itemForm.invalid||n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",n.isSubmitting),a(),l("ngIf",!n.isSubmitting),a(),l("disabled",n.isSubmitting),a(11),h(n.totalCount),a(3),I("ngModel",n.searchTerm),a(3),I("ngModel",n.filterCategoryId),a(),l("ngValue",void 0),a(2),l("ngForOf",n.categories)("ngForTrackBy",n.trackByCategoryId),a(),I("ngModel",n.filterAvailabilityStatus),a(),l("ngValue",void 0),a(2),l("ngForOf",n.availabilityStatuses),a(),I("ngModel",n.filterIsPromotion),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(2),I("ngModel",n.filterActive),a(),l("ngValue",void 0),a(2),l("ngValue",!0),a(2),l("ngValue",!1),a(3),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.totalPages>1)}},dependencies:[k,ue,N,L,en,z,te,he,ve,$,be,_e,Ce,U,ee,Ve,dn,K,de,se,ce],styles:[".menu-item-container[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:.875rem}.form-section[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.375rem;padding:.75rem;background-color:#f9fafb;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.5rem;padding-bottom:.25rem;border-bottom:1px solid #d1d5db}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem;width:100%}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;margin-bottom:.25rem;color:#374151}.image-upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{border:2px dashed #d1d5db;border-radius:.5rem;padding:2rem;text-align:center;background-color:#f9fafb;transition:all .2s ease}.image-upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]:hover{border-color:#8b5cf6;background-color:#f5f3ff}.image-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{cursor:pointer;display:block;margin:0}.image-upload-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]{margin-top:1rem}.image-upload-section[_ngcontent-%COMP%]   .preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:.5rem}.image-upload-section[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]{position:relative;border:1px solid #e5e7eb;border-radius:.375rem;overflow:hidden;background-color:#fff}.image-upload-section[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;display:block}.image-upload-section[_ngcontent-%COMP%]   .remove-image[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;width:1.5rem;height:1.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.6rem}.dietary-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.dietary-checkboxes[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{margin:0}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;padding:1rem}.item-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.5rem;overflow:hidden;transition:all .2s ease}.item-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #8b5cf626;transform:translateY(-2px)}.item-image[_ngcontent-%COMP%]{position:relative;height:180px;overflow:hidden}.item-image[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-image[_ngcontent-%COMP%]   .no-image-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#f3f4f6}.item-image[_ngcontent-%COMP%]   .promotion-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;z-index:10}.item-image[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;z-index:10}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.item-header[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{flex-grow:1;font-weight:600;color:#1f2937;line-height:1.2}.item-header[_ngcontent-%COMP%]   .item-badges[_ngcontent-%COMP%]{display:flex;gap:.25rem;margin-left:.5rem}.item-description[_ngcontent-%COMP%]{margin-bottom:.5rem;line-height:1.3}.item-details[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{margin-bottom:.25rem}.item-details[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:.25rem}.item-details[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{color:#059669;font-size:.9rem}.item-details[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{font-size:.8rem}.item-details[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]   .discount-badge[_ngcontent-%COMP%]{font-size:.6rem}.item-actions[_ngcontent-%COMP%]{margin-top:.75rem}.badge.bg-available[_ngcontent-%COMP%]{background-color:#10b981!important}.badge.bg-out_of_stock[_ngcontent-%COMP%]{background-color:#ef4444!important}.badge.bg-limited[_ngcontent-%COMP%]{background-color:#f59e0b!important}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e5e7eb}.badge-xs[_ngcontent-%COMP%]{font-size:.5rem;padding:.125rem .25rem}.btn-xs[_ngcontent-%COMP%]{padding:.125rem .25rem;font-size:.65rem;line-height:1.2;border-radius:.2rem}.alert-compact[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.alert-compact[_ngcontent-%COMP%]   .btn-close-sm[_ngcontent-%COMP%]{font-size:.65rem;padding:.125rem}.card-title[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.bg-success[_ngcontent-%COMP%]{background-color:#10b981!important}.bg-danger[_ngcontent-%COMP%]{background-color:#ef4444!important}.bg-info[_ngcontent-%COMP%]{background-color:#3b82f6!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6b7280!important}.bg-primary[_ngcontent-%COMP%]{background-color:#8b5cf6!important}.bg-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important}.form-control-sm[_ngcontent-%COMP%]:focus, .form-select-sm[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 .2rem #8b5cf640}.input-group-text[_ngcontent-%COMP%]{font-size:.7rem}.input-group-text.bg-success[_ngcontent-%COMP%]{border-color:#10b981}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;padding:3rem 1rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.d-flex.gap-2[_ngcontent-%COMP%]   .input-group-sm[_ngcontent-%COMP%], .d-flex.gap-2[_ngcontent-%COMP%]   .form-select-sm[_ngcontent-%COMP%]{width:100%!important;min-width:auto}.items-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:.5rem}.dietary-checkboxes[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.item-header[_ngcontent-%COMP%]   .item-badges[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 576px){.menu-item-container[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{padding:.5rem}.image-upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{padding:1rem}.preview-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(80px,1fr))}.preview-image[_ngcontent-%COMP%]{height:80px}}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#8b5cf60d}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6b7280;border-color:#d1d5db}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{color:#8b5cf6;background-color:#f3f4f6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #8b5cf640}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#8b5cf6;border-color:#8b5cf6}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#9ca3af;background-color:#f9fafb}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#8b5cf6;border-color:#8b5cf6}.text-decoration-line-through[_ngcontent-%COMP%]{text-decoration:line-through!important}"]})};function ka(r,t){if(r&1){let e=v();i(0,"button",10),g("click",function(){let c=u(e).$implicit,m=p();return f(m.setActiveTab(c.id))}),d(1,"i"),s(2),o()}if(r&2){let e=t.$implicit,n=p();M("active",n.activeTab===e.id),a(),R(e.icon+" me-1"),a(),C(" ",e.label," ")}}function Ia(r,t){r&1&&d(0,"app-profile-settings")}function Ea(r,t){r&1&&d(0,"app-password-settings")}function Ta(r,t){r&1&&d(0,"app-restaurant-settings")}function La(r,t){r&1&&d(0,"app-stopover-master")}function Aa(r,t){r&1&&d(0,"app-location-master")}function Ra(r,t){r&1&&d(0,"app-route-master")}function Na(r,t){r&1&&d(0,"app-menu-category")}function Da(r,t){r&1&&d(0,"app-menu-subcategory")}function Fa(r,t){r&1&&d(0,"app-menu-item")}var Lt=class r{activeTab="password";isAdmin=!1;ngOnInit(){}get availableTabs(){let t=[{id:"password",label:"Change Password",icon:"bi-lock",visible:!0},{id:"restaurant",label:"Restaurant Info",icon:"bi-shop",visible:!0},{id:"menu-category",label:"Menu Category",icon:"bi-shop",visible:!0},{id:"menu-subcategory",label:"Menu Sub-Category",icon:"bi-shop",visible:!0},{id:"menu-item",label:"Menu Items",icon:"bi-shop",visible:!0},{id:"location",label:"Location Master",icon:"bi-geo-alt",visible:!0},{id:"route",label:"Route Master",icon:"bi-map",visible:!0}],e=[{id:"stopover",label:"Stopover Master",icon:"bi-pin-map",visible:this.isAdmin}];return[...t,...e].filter(n=>n.visible)}setActiveTab(t){this.activeTab=t}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-settings"]],decls:19,vars:10,consts:[[1,"settings-container"],[1,"settings-header"],[1,"mb-0"],[1,"bi","bi-gear","me-2"],[1,"settings-content"],[1,"settings-tabs"],[1,"tab-list"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-content"],[4,"ngIf"],[1,"tab-btn",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h4",2),d(3,"i",3),s(4,"Settings"),o()(),i(5,"div",4)(6,"div",5)(7,"div",6),_(8,ka,3,5,"button",7),o()(),i(9,"div",8),_(10,Ia,1,0,"app-profile-settings",9)(11,Ea,1,0,"app-password-settings",9)(12,Ta,1,0,"app-restaurant-settings",9)(13,La,1,0,"app-stopover-master",9)(14,Aa,1,0,"app-location-master",9)(15,Ra,1,0,"app-route-master",9)(16,Na,1,0,"app-menu-category",9)(17,Da,1,0,"app-menu-subcategory",9)(18,Fa,1,0,"app-menu-item",9),o()()()),e&2&&(a(8),l("ngForOf",n.availableTabs),a(2),l("ngIf",n.activeTab==="profile"),a(),l("ngIf",n.activeTab==="password"),a(),l("ngIf",n.activeTab==="restaurant"),a(),l("ngIf",n.activeTab==="stopover"),a(),l("ngIf",n.activeTab==="location"),a(),l("ngIf",n.activeTab==="route"),a(),l("ngIf",n.activeTab==="menu-category"),a(),l("ngIf",n.activeTab==="menu-subcategory"),a(),l("ngIf",n.activeTab==="menu-item"))},dependencies:[k,N,L,wt,Ye,Qe,Je,Xe,Et,et,nt,it],styles:[".settings-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;overflow:hidden}.settings-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px 16px;border-bottom:1px solid #e9ecef}.settings-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#495057}.settings-content[_ngcontent-%COMP%]{min-height:500px}.settings-tabs[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;background:#fafbfc}.tab-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 8px;gap:2px}.tab-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px 12px;font-size:12px;font-weight:500;color:#6c757d;border-radius:4px 4px 0 0;cursor:pointer;transition:all .2s;white-space:nowrap}.tab-btn[_ngcontent-%COMP%]:hover{background:#007bff1a;color:#007bff}.tab-btn.active[_ngcontent-%COMP%]{background:#fff;color:#007bff;border-bottom:2px solid #007bff}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}.tab-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.tab-list[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{width:100%;text-align:left;border-radius:0;border-bottom:1px solid #e9ecef}.tab-btn.active[_ngcontent-%COMP%]{border-bottom:1px solid #007bff;border-left:3px solid #007bff}.settings-content[_ngcontent-%COMP%]{min-height:auto}.tab-content[_ngcontent-%COMP%]{padding:16px}}"]})};function Va(r,t){if(r&1){let e=v();i(0,"button",8),g("mousedown",function(){u(e);let c=p();return f(c.clearSelection())}),s(1," \xD7 "),o()}}function za(r,t){r&1&&(i(0,"div",9),d(1,"div",10),o())}function Ba(r,t){if(r&1&&(i(0,"span"),s(1),o()),r&2){let e=p(2).$implicit;a(),C(" \u2022 ",e.code,"")}}function ja(r,t){if(r&1&&(i(0,"div",18),s(1),_(2,Ba,2,1,"span",19),o()),r&2){let e=p().$implicit;a(),C(" ",e.state,""),a(),l("ngIf",e.code)}}function $a(r,t){if(r&1){let e=v();i(0,"div",14),g("mousedown",function(){let c=u(e).$implicit,m=p(2);return f(m.selectLocation(c))}),i(1,"div",15)(2,"div",16),s(3),o(),_(4,ja,3,2,"div",17),o()()}if(r&2){let e=t.$implicit,n=p(2);M("selected",(n.selectedLocation==null?null:n.selectedLocation.id)===e.id),a(3),h(e.name),a(),l("ngIf",e.state)}}function Ua(r,t){r&1&&(i(0,"div",20),s(1," No locations found "),o())}function qa(r,t){r&1&&(i(0,"div",20),s(1," No locations available "),o())}function Ga(r,t){if(r&1&&(i(0,"div",11),_(1,$a,5,4,"div",12)(2,Ua,2,0,"div",13)(3,qa,2,0,"div",13),o()),r&2){let e=p();a(),l("ngForOf",e.filteredLocations)("ngForTrackBy",e.trackByLocationId),a(),l("ngIf",e.filteredLocations.length===0&&e.locations.length>0),a(),l("ngIf",e.locations.length===0)}}var At=class r{label="Select Location";placeholder="Search locations...";selectedLocation=null;locations=[];disabled=!1;locationSelected=new Ie;searchTerm="";isOpen=!1;filteredLocations=[];searchSubject=new B;searchSubscription;ngOnInit(){this.filteredLocations=[...this.locations],this.searchSubscription=this.searchSubject.pipe(st(300),ct()).subscribe(t=>{this.filterLocations(t)}),this.selectedLocation&&(this.searchTerm=this.selectedLocation.name)}ngOnChanges(t){t.locations&&t.locations.currentValue&&(this.filteredLocations=[...this.locations],this.searchTerm&&this.filterLocations(this.searchTerm)),t.selectedLocation&&t.selectedLocation.currentValue&&(this.searchTerm=this.selectedLocation?.name||""),t.locations&&t.locations.previousValue&&t.locations.previousValue.length>0&&t.locations.currentValue.length===0&&(this.searchTerm="",this.selectedLocation=null)}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}trackByLocationId(t,e){return e.id}onSearch(){this.disabled||this.searchSubject.next(this.searchTerm)}filterLocations(t){if(!t.trim()){this.filteredLocations=[...this.locations];return}let e=t.toLowerCase();this.filteredLocations=this.locations.filter(n=>n.name.toLowerCase().includes(e)||n.state&&n.state.toLowerCase().includes(e)||n.code&&n.code.toLowerCase().includes(e))}openDropdown(){this.disabled||(this.isOpen=!0,this.filterLocations(this.searchTerm))}closeDropdown(){setTimeout(()=>{this.isOpen=!1},150)}selectLocation(t){this.disabled||(this.selectedLocation=t,this.searchTerm=t.name,this.isOpen=!1,this.locationSelected.emit(t))}clearSelection(){this.disabled||(this.selectedLocation=null,this.searchTerm="",this.filteredLocations=[...this.locations],this.locationSelected.emit(null))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-location-select"]],inputs:{label:"label",placeholder:"placeholder",selectedLocation:"selectedLocation",locations:"locations",disabled:"disabled"},outputs:{locationSelected:"locationSelected"},features:[Yt],decls:10,vars:15,consts:[[1,"location-select"],[1,"label"],[1,"input-wrapper"],["type","text","autocomplete","off",1,"input",3,"ngModelChange","input","focus","blur","placeholder","ngModel","disabled"],["type","button","class","clear-btn",3,"mousedown",4,"ngIf"],[1,"arrow"],["class","loading",4,"ngIf"],["class","dropdown",4,"ngIf"],["type","button",1,"clear-btn",3,"mousedown"],[1,"loading"],[1,"spinner"],[1,"dropdown"],["class","option",3,"selected","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["class","no-results",4,"ngIf"],[1,"option",3,"mousedown"],[1,"option-content"],[1,"name"],["class","details",4,"ngIf"],[1,"details"],[4,"ngIf"],[1,"no-results"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"label",1),s(2),o(),i(3,"div",2)(4,"input",3),T("ngModelChange",function(m){return E(n.searchTerm,m)||(n.searchTerm=m),m}),g("input",function(){return n.onSearch()})("focus",function(){return n.openDropdown()})("blur",function(){return n.closeDropdown()}),o(),_(5,Va,2,0,"button",4),i(6,"span",5),s(7,"\u25BC"),o(),_(8,za,2,0,"div",6)(9,Ga,4,4,"div",7),o()()),e&2&&(M("disabled",n.disabled),a(2),h(n.label),a(),M("open",n.isOpen)("disabled",n.disabled),a(),l("placeholder",n.disabled?"Select boarding point first":n.placeholder),I("ngModel",n.searchTerm),l("disabled",n.disabled),a(),l("ngIf",n.searchTerm&&!n.disabled),a(),M("rotated",n.isOpen),a(2),l("ngIf",n.locations.length===0&&!n.disabled),a(),l("ngIf",n.isOpen&&!n.disabled))},dependencies:[k,N,L,z,$,U,K],styles:[".location-select.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.location-select[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:600;color:#4a5568;margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.5px}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;padding:.6rem 2.5rem .6rem .8rem;border:1.5px solid #e2e8f0;border-radius:8px;font-size:.85rem;background:#fafafa;transition:all .2s}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]::placeholder{color:#a0aec0;font-size:.8rem}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:2rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#a0aec0;cursor:pointer;font-size:1rem;width:1rem;height:1rem;display:flex;align-items:center;justify-content:center}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{color:#718096}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;right:.8rem;top:50%;transform:translateY(-50%);color:#a0aec0;font-size:.6rem;transition:transform .2s;pointer-events:none}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .arrow.rotated[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;right:.8rem;top:50%;transform:translateY(-50%)}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:.8rem;height:.8rem;border:1.5px solid #e2e8f0;border-top:1.5px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 4px 12px #0000001a;z-index:1000;max-height:160px;overflow-y:auto;margin-top:.25rem}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{padding:.6rem .8rem;cursor:pointer;transition:background-color .15s;border-bottom:1px solid #f7fafc}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:last-child{border-bottom:none}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover{background-color:#f7fafc}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option.selected[_ngcontent-%COMP%]{background-color:#edf2f7;border-left:2px solid #667eea}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:.85rem;margin-bottom:.1rem}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:.7rem;color:#718096}.location-select[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#718096;font-size:.8rem}.location-select[_ngcontent-%COMP%]   .input-wrapper.open[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.location-select[_ngcontent-%COMP%]   .input-wrapper.disabled[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background:#f7fafc;border-color:#e2e8f0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dropdown[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e0 #f7fafc}.dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f7fafc}.dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:2px}"]})};function Ha(r,t){r&1&&d(0,"i",28)}function Wa(r,t){r&1&&d(0,"i",29)}function Ya(r,t){r&1&&(i(0,"span"),s(1,"Search Routes"),o())}function Qa(r,t){r&1&&(i(0,"span"),s(1,"Searching..."),o())}function Ka(r,t){if(r&1&&(i(0,"div",30),d(1,"i",31),s(2),o()),r&2){let e=p();a(2),C(" ",e.error," ")}}function Ja(r,t){r&1&&(i(0,"div",30),d(1,"i",31),s(2," Boarding point and destination must be different "),o())}function Za(r,t){if(r&1&&(i(0,"div",35)(1,"div",36)(2,"span",37),s(3),o(),i(4,"span",38),s(5,"Active"),o()(),i(6,"div",39)(7,"div",40),d(8,"i",41),i(9,"span"),s(10),o()(),i(11,"div",40),d(12,"i",42),i(13,"span"),s(14),o()(),i(15,"div",40),d(16,"i",43),i(17,"span"),s(18),o()()()()),r&2){let e=t.$implicit;a(3),h(e.routeName),a(7),C("",e.distanceKm," km"),a(4),h(e.estimatedTime),a(4),C("",e.stepOvers.length," stops")}}function Xa(r,t){if(r&1&&(i(0,"div",32)(1,"h3"),d(2,"i",33),s(3," Available Routes"),o(),_(4,Za,19,4,"div",34),o()),r&2){let e=p();a(4),l("ngForOf",e.searchResults)}}var Rt=class r{constructor(t,e){this.router=t;this.http=e}baseUrl=D.apiBaseUrl;boardingPoint=null;destination=null;departureDate="";departureTime="";busName="";busNumber="";isLoading=!1;error="";searchResults=[];startLocations=[];endLocations=[];ngOnInit(){this.initializeForm(),this.loadStartLocations()}initializeForm(){let t=new Date,e=new Date(t.getTime()-t.getTimezoneOffset()*6e4);this.departureDate=e.toISOString().split("T")[0];let n=new Date;n.setHours(n.getHours()+1),this.departureTime=n.toTimeString().slice(0,5)}loadStartLocations(){console.log("Loading start locations..."),this.http.get(`${this.baseUrl}/search/start-locations`).pipe(G(this.handleError.bind(this))).subscribe({next:t=>{console.log("Start locations loaded:",t),this.startLocations=t.map(e=>({id:e.startLocationId,name:e.startLocationName,state:e.state,city:e.city,country:e.country,type:"city"}))},error:t=>{console.error("Error loading start locations:",t),this.error="Failed to load start locations. Please try again."}})}loadEndLocations(t){t<=0||(console.log("Loading end locations for start location ID:",t),this.http.get(`${this.baseUrl}/search/end-locations/${t}`).pipe(G(this.handleError.bind(this))).subscribe({next:e=>{console.log("End locations loaded:",e),this.endLocations=e.map(n=>({id:n.endLocationId,name:n.endLocationName,state:n.state,city:n.city,country:n.country,type:"city"}))},error:e=>{console.error("Error loading end locations:",e),this.error="Failed to load destination locations. Please try again."}}))}onBoardingPointSelected(t){this.boardingPoint=t,this.destination=null,this.endLocations=[],this.error="",t&&t.id&&this.loadEndLocations(t.id)}onDestinationSelected(t){this.destination=t,this.error=""}isFormValid(){return!!(this.boardingPoint&&this.destination&&this.departureDate&&this.departureTime&&this.busName?.trim()&&this.busNumber?.trim()&&this.boardingPoint.id!==this.destination.id)}searchRoute(){if(!this.isFormValid()||!this.boardingPoint||!this.destination){this.error="Please fill in all required fields";return}this.isLoading=!0,this.error="",this.searchRoutes(this.boardingPoint.id,this.destination.id,this.departureDate)}searchRoutes(t,e,n){let c={startLocationId:t.toString(),endLocationId:e.toString(),page:"1",pageSize:"10"};n&&(c.departureDate=n);let m=new URLSearchParams(c).toString();console.log("Searching routes with params:",c),this.http.get(`${this.baseUrl}/search/routes?${m}`).pipe(G(this.handleError.bind(this))).subscribe({next:b=>{if(console.log("Route search response:",b),b?.success&&b.data&&b.data.length>0){this.searchResults=b.data;let x={busNumber:this.busNumber.trim(),busName:this.busName.trim(),startLocationId:this.boardingPoint.id,startLocationName:this.boardingPoint.name,endLocationId:this.destination.id,endLocationName:this.destination.name,departureDate:this.departureDate,departureTime:this.departureTime.includes(":")&&this.departureTime.split(":").length===2?this.departureTime+":00":this.departureTime,tenantId:1};this.createBooking(x)}else this.error="No routes found for the selected locations and date",this.isLoading=!1},error:b=>{console.error("Error searching routes:",b),this.error=b?.message||"An error occurred while searching for routes",this.isLoading=!1}})}createBooking(t){console.log("Creating booking:",t),this.http.post(`${this.baseUrl}/search/booking`,t).pipe(G(this.handleError.bind(this))).subscribe({next:e=>{console.log("Booking response:",e),e?.success&&e.data?this.router.navigate(["/stop-overs"],{queryParams:{bookingId:e.data.bookingId}}):this.error=e?.message||"Failed to create booking",this.isLoading=!1},error:e=>{console.error("Error creating booking:",e),this.error=e?.message||"Failed to create booking. Please try again.",this.isLoading=!1}})}handleError(t){let e="An error occurred";if(t.error instanceof ErrorEvent)e=`Error: ${t.error.message}`;else switch(console.log("Server error details:",{status:t.status,statusText:t.statusText,error:t.error,message:t.message,url:t.url}),t.status){case 0:e="Unable to connect to server. Please check your connection.";break;case 404:e="API endpoint not found. Please check the server configuration.";break;case 500:e="Server error. Please try again later.";break;default:e=t.error?.message||`Error ${t.status}: ${t.statusText}`}return console.error("API Error:",t),Se(()=>new Error(e))}setPopularRoute(t,e){this.boardingPoint=t,this.destination=e}getPopularRoutes(){let t={mumbai:{id:1,name:"Mumbai",code:"MUM",state:"Maharashtra",type:"city"},delhi:{id:2,name:"Delhi",code:"DEL",state:"Delhi",type:"city"},bangalore:{id:3,name:"Bangalore",code:"BLR",state:"Karnataka",type:"city"},chennai:{id:4,name:"Chennai",code:"CHE",state:"Tamil Nadu",type:"city"}};return[{from:t.mumbai,to:t.delhi},{from:t.bangalore,to:t.chennai},{from:t.delhi,to:t.bangalore}]}static \u0275fac=function(e){return new(e||r)(P(Q),P(j))};static \u0275cmp=S({type:r,selectors:[["app-search"]],decls:68,vars:18,consts:[[1,"app-container"],[1,"header"],[1,"header-content"],["src","assets/logo_compact2.png","alt","BusFood",1,"logo"],[1,"header-text"],[1,"main"],[1,"search-container"],[1,"search-header"],[1,"search-form",3,"ngSubmit"],[1,"form-section"],[1,"bi","bi-bus-front"],[1,"form-row"],[1,"form-field"],[1,"required"],["type","text","name","busName","placeholder","","required","","maxlength","100",3,"ngModelChange","ngModel"],["type","text","name","busNumber","placeholder","","required","","maxlength","20",2,"text-transform","uppercase",3,"ngModelChange","input","ngModel"],[1,"bi","bi-geo-alt"],["label","From","placeholder","Select boarding point",3,"locationSelected","selectedLocation","locations"],["label","To","placeholder","Select destination",3,"locationSelected","selectedLocation","locations","disabled"],[1,"bi","bi-calendar3"],["type","date","name","departureDate","required","",3,"ngModelChange","ngModel","min"],["type","time","name","departureTime","required","",3,"ngModelChange","ngModel"],["type","submit",1,"search-btn",3,"disabled"],["class","bi bi-search",4,"ngIf"],["class","bi bi-arrow-clockwise spin",4,"ngIf"],[4,"ngIf"],["class","error-message",4,"ngIf"],["class","results-section",4,"ngIf"],[1,"bi","bi-search"],[1,"bi","bi-arrow-clockwise","spin"],[1,"error-message"],[1,"bi","bi-exclamation-circle"],[1,"results-section"],[1,"bi","bi-list-check"],["class","route-card",4,"ngFor","ngForOf"],[1,"route-card"],[1,"route-header"],[1,"route-name"],[1,"route-status","active"],[1,"route-info"],[1,"info-item"],[1,"bi","bi-signpost"],[1,"bi","bi-clock"],[1,"bi","bi-geo"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2),d(3,"img",3),i(4,"div",4)(5,"h1"),s(6,"Route Eat"),o(),i(7,"p"),s(8,"Pre-order food on your journey"),o()()()(),i(9,"main",5)(10,"div",6)(11,"div",7)(12,"h2"),s(13,"Create New Booking"),o(),i(14,"p"),s(15,"Enter your journey details to get started"),o()(),i(16,"form",8),g("ngSubmit",function(){return n.searchRoute()}),i(17,"div",9)(18,"h3"),d(19,"i",10),s(20," Bus Information"),o(),i(21,"div",11)(22,"div",12)(23,"label"),s(24,"Bus Name "),i(25,"span",13),s(26,"*"),o()(),i(27,"input",14),T("ngModelChange",function(m){return E(n.busName,m)||(n.busName=m),m}),o()(),i(28,"div",12)(29,"label"),s(30,"Bus Number "),i(31,"span",13),s(32,"*"),o()(),i(33,"input",15),T("ngModelChange",function(m){return E(n.busNumber,m)||(n.busNumber=m),m}),g("input",function(){return n.busNumber=n.busNumber.toUpperCase()}),o()()()(),i(34,"div",9)(35,"h3"),d(36,"i",16),s(37," Journey Details"),o(),i(38,"div",11)(39,"div",12)(40,"app-location-select",17),g("locationSelected",function(m){return n.onBoardingPointSelected(m)}),o()(),i(41,"div",12)(42,"app-location-select",18),g("locationSelected",function(m){return n.onDestinationSelected(m)}),o()()()(),i(43,"div",9)(44,"h3"),d(45,"i",19),s(46," Departure Schedule"),o(),i(47,"div",11)(48,"div",12)(49,"label"),s(50,"Departure Date "),i(51,"span",13),s(52,"*"),o()(),i(53,"input",20),T("ngModelChange",function(m){return E(n.departureDate,m)||(n.departureDate=m),m}),o()(),i(54,"div",12)(55,"label"),s(56,"Departure Time "),i(57,"span",13),s(58,"*"),o()(),i(59,"input",21),T("ngModelChange",function(m){return E(n.departureTime,m)||(n.departureTime=m),m}),o()()()(),i(60,"button",22),_(61,Ha,1,0,"i",23)(62,Wa,1,0,"i",24)(63,Ya,2,0,"span",25)(64,Qa,2,0,"span",25),o(),_(65,Ka,3,1,"div",26)(66,Ja,3,0,"div",26),o(),_(67,Xa,5,1,"div",27),o()()()),e&2&&(a(27),I("ngModel",n.busName),a(6),I("ngModel",n.busNumber),a(7),l("selectedLocation",n.boardingPoint)("locations",n.startLocations),a(2),l("selectedLocation",n.destination)("locations",n.endLocations)("disabled",!n.boardingPoint),a(11),I("ngModel",n.departureDate),l("min",n.departureDate),a(6),I("ngModel",n.departureTime),a(),l("disabled",!n.isFormValid()||n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",!n.isLoading),a(),l("ngIf",n.isLoading),a(),l("ngIf",n.error),a(),l("ngIf",n.boardingPoint&&n.destination&&n.boardingPoint.id===n.destination.id),a(),l("ngIf",n.searchResults.length>0))},dependencies:[k,N,L,z,te,$,U,ee,He,ze,K,gt,At],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{min-height:100vh;background:#f9fafb;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;position:relative}.app-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:url(https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1920&q=80);background-size:cover;background-position:center;background-attachment:fixed;filter:blur(8px);opacity:.3;z-index:0}.app-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.header[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid #e5e7eb;padding:1rem;position:sticky;top:0;z-index:100;box-shadow:0 1px 3px #0000000d}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;align-items:center;gap:1rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain;border-radius:8px;filter:brightness(1.2)}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff;margin:0 0 .125rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3;margin:0}.main[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:800px;margin:0 auto}.search-container[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:1.5rem;box-shadow:0 4px 20px #00000026;border:1px solid rgba(229,231,235,.5)}.search-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #f3f4f6}.search-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#111827;margin-bottom:.25rem}.search-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#374151;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:1rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;margin-left:.125rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem;transition:all .2s;background:#fff}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f9fafb;cursor:not-allowed}.search-btn[_ngcontent-%COMP%]{width:100%;background:#3b82f6;color:#fff;border:none;padding:.875rem 1.5rem;border-radius:8px;font-size:.9375rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-top:1rem}.search-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.search-btn[_ngcontent-%COMP%]   i.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.search-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}.error-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#991b1b;font-size:.875rem;display:flex;align-items:center;gap:.5rem}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.results-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #f3f4f6}.results-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#111827;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.results-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:1rem}.route-card[_ngcontent-%COMP%]{background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;padding:1rem;margin-bottom:.75rem;transition:all .2s}.route-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 8px #3b82f61a}.route-card[_ngcontent-%COMP%]   .route-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.route-card[_ngcontent-%COMP%]   .route-header[_ngcontent-%COMP%]   .route-name[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:.9375rem}.route-card[_ngcontent-%COMP%]   .route-header[_ngcontent-%COMP%]   .route-status[_ngcontent-%COMP%]{padding:.25rem .625rem;border-radius:12px;font-size:.75rem;font-weight:500}.route-card[_ngcontent-%COMP%]   .route-header[_ngcontent-%COMP%]   .route-status.active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.route-card[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{display:flex;gap:1.5rem;flex-wrap:wrap}.route-card[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;color:#6b7280}.route-card[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#9ca3af;font-size:.875rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 640px){.main[_ngcontent-%COMP%]{padding:1rem .75rem}.search-container[_ngcontent-%COMP%]{padding:1rem;border-radius:8px}.search-header[_ngcontent-%COMP%]{margin-bottom:1rem}.search-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}.search-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}.form-section[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem}.route-card[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{gap:1rem}}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:.75rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{gap:.75rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40px;height:40px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.125rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.route-card[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}']})};function es(r,t){r&1&&(i(0,"div",4)(1,"div",5)(2,"div",6),d(3,"div",7),o(),i(4,"h3"),s(5,"Loading journey..."),o(),i(6,"p"),s(7,"Please wait while we fetch your stops"),o()()())}function ts(r,t){if(r&1){let e=v();i(0,"div",8)(1,"div",9)(2,"div",10),d(3,"i",11),o(),i(4,"h3"),s(5,"Unable to load journey"),o(),i(6,"p"),s(7),o(),i(8,"div",12)(9,"button",13),g("click",function(){u(e);let c=p();return f(c.retryLoad())}),s(10,"Try Again"),o(),i(11,"button",14),g("click",function(){u(e);let c=p();return f(c.goBack())}),s(12,"Go Back"),o()()()()}if(r&2){let e=p();a(7),h(e.error)}}function ns(r,t){if(r&1&&(i(0,"div",55)(1,"p"),s(2),o()()),r&2){let e=p().$implicit;a(2),h(e.address)}}function is(r,t){if(r&1){let e=v();i(0,"div",41),g("click",function(){let c=u(e).$implicit,m=p(3);return f(m.selectStopOver(c))}),i(1,"div",42)(2,"div",43)(3,"div",44)(4,"h4"),s(5),o()(),i(6,"button",45),d(7,"i",46),o()(),i(8,"div",47)(9,"div",48),d(10,"i",49),i(11,"div",50)(12,"span",51),s(13,"Arrival Time"),o(),i(14,"span",52),s(15),o()()(),i(16,"div",48),d(17,"i",53),i(18,"div",50)(19,"span",51),s(20,"Distance"),o(),i(21,"span",52),s(22),o()()()(),_(23,ns,3,1,"div",54),o()()}if(r&2){let e=t.$implicit,n=t.index,c=p(3);Ue("animation-delay",n*100,"ms"),a(5),h(e.name),a(10),h(c.getCalculatedArrivalTime(e)),a(7),C("",c.getDistanceFromStart(e)," km from start"),a(),l("ngIf",e.address)}}function os(r,t){if(r&1&&(i(0,"div",38)(1,"div",39),_(2,is,24,6,"div",40),o()()),r&2){let e=p(2);a(2),l("ngForOf",e.stopOvers)("ngForTrackBy",e.trackByStopId)}}function rs(r,t){if(r&1){let e=v();i(0,"div",56)(1,"div",57),d(2,"i",58),o(),i(3,"h4"),s(4,"Direct Route"),o(),i(5,"p"),s(6,"This journey goes directly to your destination with no intermediate stops"),o(),i(7,"button",59),g("click",function(){u(e);let c=p(2);return f(c.goBack())}),s(8," View Route Details "),o()()}}function as(r,t){if(r&1){let e=v();i(0,"div",15)(1,"div",16)(2,"button",17),g("click",function(){u(e);let c=p();return f(c.goBack())}),d(3,"i",18),o(),i(4,"div",19)(5,"div",20)(6,"h2"),s(7),o(),i(8,"div",21)(9,"span",22),d(10,"i",23),s(11),o(),i(12,"span",24),s(13,"\u2022"),o(),i(14,"span",25),d(15,"i",26),s(16),o()()(),i(17,"div",27),s(18),o()()(),i(19,"div",28)(20,"div",29)(21,"div",30)(22,"h3"),s(23,"Journey Stops"),o(),i(24,"p"),s(25),o()(),i(26,"div",31)(27,"div",32)(28,"div",33),s(29),o(),i(30,"div",34),s(31,"Stops"),o()(),d(32,"div",35),i(33,"div",32)(34,"div",33),s(35),o(),i(36,"div",34),s(37,"Total KM"),o()(),d(38,"div",35),i(39,"div",32)(40,"div",33),s(41),o(),i(42,"div",34),s(43,"Duration"),o()()()(),_(44,os,3,2,"div",36)(45,rs,9,0,"div",37),o()()}if(r&2){let e=p();a(7),q("",e.fromLocation," \u2192 ",e.toLocation,""),a(4),C(" ",e.formattedDate," "),a(5),C(" ",e.formatTime(e.departureTime)," "),a(),R("status-"+e.bookingDetails.bookingStatus.toLowerCase()),a(),C(" ",e.bookingDetails.bookingStatus," "),a(7),C("Your route with ",e.stopOvers.length," intermediate stops"),a(4),h(e.stopOvers.length),a(6),h(e.getTotalDistance()),a(6),h(e.getTotalJourneyTime()),a(3),l("ngIf",e.stopOvers.length>0),a(),l("ngIf",e.stopOvers.length===0)}}var Nt=class r{constructor(t,e,n){this.router=t;this.route=e;this.http=n}baseUrl=D.apiBaseUrl;subscription=new at;isScrolled=!1;bookingId="";bookingDetails=null;onScroll(t){let e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.isScrolled=e>50}isLoading=!1;error="";selectedStopOver=null;get fromLocation(){return this.bookingDetails?.startLocation?.name||""}get toLocation(){return this.bookingDetails?.endLocation?.name||""}get departureDate(){return this.bookingDetails?.departureDate||""}get departureTime(){return this.bookingDetails?.departureTime||""}get formattedDate(){return this.departureDate?new Date(this.departureDate).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric"}):""}get stopOvers(){return this.bookingDetails?.stepOvers||[]}get busInfo(){return this.bookingDetails?`${this.bookingDetails.busName} (${this.bookingDetails.busNumber})`:""}ngOnInit(){let t=this.route.queryParams.subscribe(e=>{this.bookingId=e.bookingId,this.bookingId?this.loadBookingDetails():(this.error="No booking ID provided",this.router.navigate(["/"]))});this.subscription.add(t)}ngOnDestroy(){this.subscription.unsubscribe()}trackByStopId(t,e){return e.id}getTotalDistance(){return this.bookingDetails?.route?.distanceKm||0}getDistanceFromStart(t){return Math.round(t.distance||t.stopOrder*(this.getTotalDistance()/(this.stopOvers.length+1)))}getRemainingDistance(t){let e=this.getDistanceFromStart(t),n=this.getTotalDistance();return Math.round(n-e)}getTotalJourneyTime(){if(this.bookingDetails?.route?.estimatedTime)return this.bookingDetails.route.estimatedTime;let t=this.getTotalDistance(),e=Math.floor(t/60),n=Math.round(t%60*60/60);return`${e}h ${n}m`}getCalculatedArrivalTime(t){if(!this.departureTime)return"TBD";try{let[e,n]=this.departureTime.split(":").map(Number),c=e*60+n,m=this.getDistanceFromStart(t),b=Math.round(m/50*60),x=(t.stopOrder-1)*15,y=c+b+x,A=Math.floor(y/60)%24,Z=y%60,me=A%12||12,Le=A>=12?"PM":"AM";return`${me}:${Z.toString().padStart(2,"0")} ${Le}`}catch(e){return console.error("Error calculating arrival time:",e),"TBD"}}getCalculatedStopDuration(t){let n=Math.max(1,t.stopOrder*2);return`${Math.min(15+n,30)} min`}loadBookingDetails(){if(!this.bookingId)return;this.isLoading=!0,this.error="";let t=this.http.get(`${this.baseUrl}/search/booking/${this.bookingId}/details`).pipe(G(e=>(console.error("Error loading booking details:",e),this.error=e?.error?.message||"Failed to load booking details",Se(()=>e))),oe(()=>{this.isLoading=!1})).subscribe({next:e=>{e.success&&e.data?(this.bookingDetails=e.data,console.log("Booking details loaded:",this.bookingDetails)):this.error=e.message||"No booking data found"},error:e=>{}});this.subscription.add(t)}formatTime(t){if(!t)return"";try{let[e,n]=t.split(":"),c=parseInt(e)%12||12,m=parseInt(e)>=12?"PM":"AM";return`${c}:${n} ${m}`}catch{return t}}selectStopOver(t){this.selectedStopOver=t,this.router.navigate(["/restaurants"],{queryParams:{bookingId:this.bookingId,stopId:t.id,stopName:t.name},state:{bookingDetails:this.bookingDetails,selectedStop:t}})}goBack(){this.router.navigate(["/"])}retryLoad(){this.loadBookingDetails()}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(j))};static \u0275cmp=S({type:r,selectors:[["app-stop-overs"]],hostBindings:function(e,n){e&1&&g("scroll",function(m){return n.onScroll(m)},!1,Qt)},decls:4,vars:3,consts:[[1,"journey-container"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],["class","journey-content",4,"ngIf"],[1,"loading-overlay"],[1,"loading-card"],[1,"loading-spinner"],[1,"spinner-ring"],[1,"error-overlay"],[1,"error-card"],[1,"error-icon"],[1,"bi","bi-exclamation-triangle"],[1,"error-actions"],[1,"btn-retry",3,"click"],[1,"btn-back",3,"click"],[1,"journey-content"],[1,"header"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"route-info"],[1,"route-details"],[1,"journey-meta"],[1,"journey-date"],[1,"bi","bi-calendar3"],[1,"separator"],[1,"journey-time"],[1,"bi","bi-clock"],[1,"status-badge"],[1,"content-section"],[1,"summary-card"],[1,"summary-header"],[1,"summary-stats"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"stat-divider"],["class","stops-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"stops-section"],[1,"stops-list"],["class","stop-item",3,"animation-delay","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"stop-item",3,"click"],[1,"stop-card"],[1,"stop-header"],[1,"stop-title-group"],[1,"action-btn"],[1,"bi","bi-chevron-right"],[1,"stop-details"],[1,"detail-item"],[1,"bi","bi-clock-fill"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],[1,"bi","bi-geo-alt-fill"],["class","stop-address",4,"ngIf"],[1,"stop-address"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-arrow-right-circle"],[1,"explore-btn",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0),_(1,es,8,0,"div",1)(2,ts,13,1,"div",2)(3,as,46,13,"div",3),o()),e&2&&(a(),l("ngIf",n.isLoading),a(),l("ngIf",n.error&&!n.isLoading),a(),l("ngIf",!n.isLoading&&!n.error&&n.bookingDetails))},dependencies:[k,N,L],styles:[".journey-container[_ngcontent-%COMP%]{min-height:100vh;background:#fff}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#3b82f6f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000}.loading-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 10px 40px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.loading-spinner[_ngcontent-%COMP%]{margin-bottom:1.5rem}.spinner-ring[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f1f5f9;border-top:4px solid #3b82f6;border-radius:50%;margin:0 auto;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1e293b;margin:0 0 .5rem}.loading-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:.9rem}.error-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ef4444f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000}.error-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 10px 40px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.error-icon[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.error-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1e293b;margin:0 0 .5rem}.error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem;font-size:.9rem}.error-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.btn-retry[_ngcontent-%COMP%], .btn-back[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.btn-retry[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-retry[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.btn-back[_ngcontent-%COMP%]{background:#f8f9fa;color:#1e293b;border:1px solid #e2e8f0}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9}.header[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1rem 1.25rem;box-shadow:0 2px 12px #00000014;display:flex;align-items:center;gap:1rem;position:sticky;top:0;z-index:100;border-bottom:1px solid #e2e8f0;animation:_ngcontent-%COMP%_slideDown .6s ease-out}.back-btn[_ngcontent-%COMP%]{background:#f1f5f9;border:none;width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#64748b;box-shadow:0 2px 8px #0000000f;flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#475569;transform:translate(-2px)}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.route-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:space-between;min-width:0}.route-details[_ngcontent-%COMP%]{flex:1;min-width:0}.route-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.2rem;font-weight:700;color:#1e293b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.journey-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#64748b;flex-wrap:wrap}.journey-date[_ngcontent-%COMP%], .journey-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.journey-meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.75rem}.separator[_ngcontent-%COMP%]{color:#cbd5e1}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-confirmed[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.content-section[_ngcontent-%COMP%]{padding:1.5rem 1.25rem;background:#f8fafc;min-height:calc(100vh - 80px)}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 4px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out .2s both}.summary-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:800;color:#1e293b;margin:0 0 .25rem}.summary-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:.9rem}.summary-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:2rem}.stat-item[_ngcontent-%COMP%]{text-align:center}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:800;color:#1e293b;margin-bottom:.25rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.stat-divider[_ngcontent-%COMP%]{width:1px;height:30px;background:#e2e8f0}.stops-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out .4s both}.stops-list[_ngcontent-%COMP%]{position:relative}.stop-item[_ngcontent-%COMP%]{display:flex;gap:1.25rem;margin-bottom:1.5rem;animation:_ngcontent-%COMP%_slideInUp .6s ease-out both;opacity:0}.stop-marker[_ngcontent-%COMP%]{position:relative;flex-shrink:0;display:flex;flex-direction:column;align-items:center}.marker-number[_ngcontent-%COMP%]{width:40px;height:40px;background:#3b82f6;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;border:3px solid white;box-shadow:0 4px 12px #3b82f64d;position:relative;z-index:2}.marker-line[_ngcontent-%COMP%]{width:2px;height:40px;background:linear-gradient(180deg,#3b82f6,#e2e8f0);margin-top:.5rem}.stop-card[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:12px;padding:1.25rem;border:1px solid #f1f5f9;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000000a}.stop-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #3b82f61f;transform:translateY(-2px);border-color:#3b82f6}.stop-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.stop-title-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1e293b;margin:0 0 .25rem}.stop-code[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;font-size:.75rem;font-weight:600;padding:.2rem .6rem;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f8f9fa;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;color:#64748b}.action-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#3b82f6}.stop-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:32px;height:32px;background:#f1f5f9;color:#3b82f6;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.85rem;flex-shrink:0}.detail-content[_ngcontent-%COMP%]{flex:1;min-width:0}.detail-label[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:.15rem}.detail-value[_ngcontent-%COMP%]{display:block;font-weight:600;color:#1e293b;font-size:.85rem}.stop-address[_ngcontent-%COMP%]{padding-top:1rem;border-top:1px solid #f1f5f9}.stop-address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin:0;line-height:1.4}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;background:#fff;border-radius:16px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;color:#1e293b;margin:0 0 .5rem;font-weight:700}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 2rem;line-height:1.5}.explore-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.875rem 2rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.explore-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:.75rem 1rem}.back-btn[_ngcontent-%COMP%]{width:40px;height:40px}.route-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.content-section[_ngcontent-%COMP%]{padding:1rem}.summary-card[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1.5rem}.summary-stats[_ngcontent-%COMP%]{gap:1rem}.stat-value[_ngcontent-%COMP%]{font-size:1.25rem}.stop-item[_ngcontent-%COMP%]{gap:1rem;margin-bottom:1rem}.marker-number[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.8rem}.stop-card[_ngcontent-%COMP%]{padding:1rem}.stop-details[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}.summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}}.back-btn[_ngcontent-%COMP%]:focus, .action-btn[_ngcontent-%COMP%]:focus, .btn-retry[_ngcontent-%COMP%]:focus, .btn-back[_ngcontent-%COMP%]:focus, .explore-btn[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}"]})};var ot=class r{cartItems=new ke([]);orderData=new ke({});cartItems$=this.cartItems.asObservable();orderData$=this.orderData.asObservable();mockStopOvers=[{id:1,name:"Highway Paradise Dhaba",arrivalTime:"14:30",stopDuration:30,restaurantCount:8,location:"Rajpura, Punjab"},{id:2,name:"Food Junction Plaza",arrivalTime:"18:45",stopDuration:45,restaurantCount:12,location:"Karnal, Haryana"}];mockRestaurants=[{id:1,name:"Punjabi Zaika",cuisine:"North Indian, Punjabi",rating:4.3,deliveryTime:15,priceRange:"\u20B9\u20B9",image:"/assets/restaurant1.jpg",isVeg:!0,isFastFood:!1,isRecommended:!0},{id:2,name:"Quick Bites Express",cuisine:"Fast Food, Snacks",rating:4.1,deliveryTime:8,priceRange:"\u20B9",image:"/assets/restaurant2.jpg",isVeg:!1,isFastFood:!0,isRecommended:!1}];mockMenu={categories:[{id:"mains",name:"Main Course",items:[{id:1,name:"Butter Chicken",description:"Creamy tomato-based curry with tender chicken pieces",price:280,isVeg:!1,isSpicy:!0,image:"/assets/butter-chicken.jpg"},{id:2,name:"Dal Makhani",description:"Rich and creamy black lentils cooked overnight",price:180,isVeg:!0,isSpicy:!1,image:"/assets/dal-makhani.jpg"}]}]};addToCart(t){let e=this.cartItems.value,n=e.find(c=>c.id===t.id);n?n.quantity+=1:e.push(je(Re({},t),{quantity:1})),this.cartItems.next([...e])}removeFromCart(t){let n=this.cartItems.value.filter(c=>c.id!==t);this.cartItems.next(n)}updateQuantity(t,e){let n=this.cartItems.value,c=n.find(m=>m.id===t);c&&(e<=0?this.removeFromCart(t):(c.quantity=e,this.cartItems.next([...n])))}getCartTotal(){return this.cartItems.value.reduce((t,e)=>t+e.price*e.quantity,0)}clearCart(){this.cartItems.next([])}setOrderData(t){this.orderData.next(t)}getCurrentLocation(){return new Promise((t,e)=>{if(!navigator.geolocation){e("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(n=>{t({latitude:n.coords.latitude,longitude:n.coords.longitude})},n=>e(n),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}sendOTP(t){return V(this,null,function*(){return new Promise(e=>{setTimeout(()=>{console.log(`OTP sent to ${t}`),e(!0)},1e3)})})}verifyOTP(t){return V(this,null,function*(){return new Promise(e=>{setTimeout(()=>{e(t.length===4)},1500)})})}placeOrder(t){return V(this,null,function*(){return new Promise(e=>{setTimeout(()=>{let n="TFE"+Date.now().toString().slice(-6);e(n)},2e3)})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function ss(r,t){if(r&1&&(i(0,"div",29),s(1),o()),r&2){let e=p();R("status-"+e.bookingDetails.bookingStatus.toLowerCase()),a(),C(" ",e.bookingDetails.bookingStatus," ")}}function cs(r,t){r&1&&(i(0,"span",11),s(1,"\u2022"),o())}function ls(r,t){if(r&1&&(i(0,"span",30),d(1,"i",31),s(2),o()),r&2){let e=p();a(2),q(" ",e.fromLocation," \u2192 ",e.toLocation," ")}}function ds(r,t){r&1&&(i(0,"div",32)(1,"div",33),d(2,"div",34),o(),i(3,"small"),s(4,"Loading booking details..."),o()())}function ms(r,t){if(r&1){let e=v();i(0,"div",35)(1,"div",36),d(2,"i",37),i(3,"span"),s(4),o(),i(5,"button",38),g("click",function(){u(e);let c=p();return f(c.retryBookingDetails())}),d(6,"i",39),o()()()}if(r&2){let e=p();a(4),h(e.bookingDetailsError)}}function ps(r,t){if(r&1&&(i(0,"div",40)(1,"div",41)(2,"div",42),d(3,"div",43),o(),i(4,"h4"),s(5,"Loading restaurants..."),o(),i(6,"p"),s(7),o()()()),r&2){let e=p();a(7),C("Fetching available restaurants at ",e.selectedStop.name||e.stopName,"")}}function gs(r,t){if(r&1){let e=v();i(0,"div",44)(1,"div",45),d(2,"i",46),i(3,"h4"),s(4,"Unable to load restaurants"),o(),i(5,"p"),s(6),o(),i(7,"div",47)(8,"button",48),g("click",function(){u(e);let c=p();return f(c.retryBookingAPI())}),d(9,"i",39),s(10," Try Again "),o()()()()}if(r&2){let e=p();a(6),h(e.bookingError)}}function us(r,t){r&1&&(i(0,"p"),s(1,"No vegetarian restaurants available at this stop"),o())}function fs(r,t){if(r&1&&(i(0,"p"),s(1),o()),r&2){let e=p(2);a(),C("No restaurants are available at ",e.selectedStop.name||e.stopName,"")}}function _s(r,t){if(r&1){let e=v();i(0,"button",53),g("click",function(){u(e);let c=p(2);return f(c.resetFilters())}),d(1,"i",39),s(2," Show All Restaurants "),o()}}function bs(r,t){if(r&1&&(i(0,"div",49),d(1,"i",50),i(2,"h4"),s(3,"No restaurants found"),o(),_(4,us,2,0,"p",51)(5,fs,2,1,"p",51)(6,_s,3,0,"button",52),o()),r&2){let e=p();a(4),l("ngIf",e.selectedFilter==="veg"),a(),l("ngIf",e.selectedFilter!=="veg"),a(),l("ngIf",e.selectedFilter==="veg")}}function Cs(r,t){r&1&&(i(0,"span"),s(1,", "),o())}function hs(r,t){if(r&1&&(i(0,"span",78),s(1),_(2,Cs,2,0,"span",51),o()),r&2){let e=t.$implicit,n=t.last;a(),C(" ",e,""),a(),l("ngIf",!n)}}function vs(r,t){if(r&1&&(i(0,"div",74)(1,"div",75),s(2,"Popular:"),o(),i(3,"div",76),_(4,hs,3,2,"span",77),o()()),r&2){let e=p().$implicit;a(4),l("ngForOf",e.popularItems.slice(0,3))}}function Ms(r,t){if(r&1){let e=v();i(0,"div",56),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.selectRestaurant(c))}),i(1,"div",57)(2,"img",58),g("error",function(c){let m=u(e).$implicit,b=p(2);return f(b.onImageError(c,m))}),o(),i(3,"div",59),d(4,"div",60),o(),i(5,"div",61),d(6,"i",10),s(7),o()(),i(8,"div",62)(9,"div",63)(10,"h3"),s(11),o(),i(12,"div",64),s(13),o()(),i(14,"div",65)(15,"span",66),s(16),o()(),_(17,vs,5,1,"div",67),i(18,"div",68)(19,"div",69)(20,"div",70),d(21,"i",71),i(22,"span"),s(23),o()(),i(24,"span",72),s(25),o()(),i(26,"div",73),s(27),o()()()()}if(r&2){let e=t.$implicit,n=t.index,c=p(2);Ue("animation-delay",n*100,"ms"),a(2),l("src",c.getRestaurantImage(e),Ee)("alt",e.name),a(),M("veg",e.isVeg)("non-veg",!e.isVeg),a(4),C(" ",e.deliveryTime," min "),a(4),h(e.name),a(2),h(e.priceRange),a(2),M("veg-type",e.isVeg),a(),C(" ",e.isVeg?"Pure Vegetarian":"Veg & Non-Veg"," "),a(),l("ngIf",e.popularItems&&e.popularItems.length>0),a(6),h(e.rating),a(2),C("",e.deliveryTime," min to prepare"),a(),M("available",e.takeOrders),a(),C(" ",e.takeOrders?"Available":"Closed"," ")}}function Os(r,t){if(r&1&&(i(0,"div",54),_(1,Ms,28,20,"div",55),o()),r&2){let e=p();a(),l("ngForOf",e.filteredRestaurants)}}function Ps(r,t){r&1&&(i(0,"div",79)(1,"div",80),d(2,"i",81),i(3,"span"),s(4,"Safe & Hygienic"),o()(),i(5,"div",80),d(6,"i",82),i(7,"span"),s(8,"Pick up on time"),o()(),i(9,"div",80),d(10,"i",83),i(11,"span"),s(12,"Multiple payments"),o()()())}var Dt=class r{constructor(t,e,n,c){this.router=t;this.route=e;this.http=n;this.foodOrderService=c}subscription=new at;selectedStop={};bookingDetails=null;restaurants=[];filteredRestaurants=[];searchQuery="";selectedFilter="all";sortBy="recommended";isLoadingBooking=!1;isLoadingRestaurants=!1;isLoadingBookingDetails=!1;bookingError="";restaurantsError="";bookingDetailsError="";bookingId="";stopId="";stopName="";API_BASE_URL=D.apiBaseUrl;RESTAURANTS_ENDPOINT="/restaurant/stepover";BOOKING_DETAILS_ENDPOINT="/search/booking";get fromLocation(){return this.bookingDetails?.startLocation?.name||"Loading..."}get toLocation(){return this.bookingDetails?.endLocation?.name||"Loading..."}get departureDate(){return this.bookingDetails?.departureDate||""}get departureTime(){return this.bookingDetails?.departureTime||""}get formattedDate(){if(!this.departureDate)return"Date TBD";try{return new Date(this.departureDate).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch(t){return console.error("Date formatting error:",t),"Invalid Date"}}get stopOvers(){return this.bookingDetails?.stepOvers||[]}get busInfo(){return this.bookingDetails?`${this.bookingDetails.busName} (${this.bookingDetails.busNumber})`:"Bus information loading..."}get currentStopDetails(){return!this.stopId||!this.stopOvers.length?null:this.stopOvers.find(t=>t.id.toString()===this.stopId.toString())||null}ngOnInit(){this.initializeComponent()}ngOnDestroy(){this.subscription.unsubscribe()}initializeComponent(){let t=this.route.queryParams.subscribe(c=>{this.bookingId=c.bookingId||"",this.stopId=c.stopId||"",this.stopName=c.stopName||"",console.log("Restaurant component initialized with:",{bookingId:this.bookingId,stopId:this.stopId,stopName:this.stopName}),this.bookingId?this.loadBookingDetails().then(()=>{this.stopId&&this.callRestaurantsDetailsAPI()}).catch(()=>{this.stopId?this.callRestaurantsDetailsAPI():this.loadDefaultRestaurants()}):this.stopId?this.callRestaurantsDetailsAPI():this.loadDefaultRestaurants()});this.subscription.add(t);let e=this.router.getCurrentNavigation()?.extras.state;e&&(this.bookingDetails=e.bookingDetails||this.bookingDetails,this.selectedStop=e.selectedStop||{},console.log("Received navigation state:",{bookingDetails:this.bookingDetails,selectedStop:this.selectedStop}));let n=this.foodOrderService.orderData$.subscribe(c=>{this.selectedStop=c.stopOver||this.selectedStop,c.bookingDetails&&!this.bookingDetails&&(this.bookingDetails=c.bookingDetails)});this.subscription.add(n)}toggleVegFilter(){this.selectedFilter=this.selectedFilter==="veg"?"all":"veg",this.filterRestaurants()}getRestaurantImage(t){let e=D.apiUrl;return t.logoUrl?t.logoUrl.startsWith("http")?t.logoUrl:`${e}${t.logoUrl}`:this.getDefaultFoodImage(t.tenantName||t.name)}getDefaultFoodImage(t){if(!t)return"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=600";let e=t.toLowerCase();return e.includes("spice")||e.includes("indian")?"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=600":e.includes("ocean")||e.includes("sea")?"https://images.unsplash.com/photo-1559181567-c3190ca9959b?w=600":e.includes("pizza")?"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=600":e.includes("burger")?"https://images.unsplash.com/photo-1552566120-d1c35e522f20?w=600":e.includes("coffee")||e.includes("cafe")?"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=600":"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=600"}loadBookingDetails(){return new Promise((t,e)=>{if(!this.bookingId){t();return}if(this.bookingDetails){console.log("Using existing booking details from navigation state"),t();return}this.isLoadingBookingDetails=!0,this.bookingDetailsError="",console.log(`Loading booking details for ID: ${this.bookingId}`);let n=this.http.get(`${this.API_BASE_URL}${this.BOOKING_DETAILS_ENDPOINT}/${this.bookingId}/details`).pipe(qt(3e4),rt({count:2,delay:2e3}),G(c=>(console.error("Error loading booking details:",c),this.bookingDetailsError=this.getDetailedErrorMessage(c),Se(()=>c))),oe(()=>{this.isLoadingBookingDetails=!1})).subscribe({next:c=>{if(c.success&&c.data){if(this.bookingDetails=c.data,console.log("Booking details loaded:",this.bookingDetails),this.stopId&&this.stopOvers.length>0){let m=this.stopOvers.find(b=>b.id.toString()===this.stopId.toString());m&&(this.selectedStop=Re(Re({},this.selectedStop),m),this.stopName=m.name)}t()}else this.bookingDetailsError=c.message||"No booking data found",e(new Error(this.bookingDetailsError))},error:c=>{e(c)}});this.subscription.add(n)})}callRestaurantsDetailsAPI(){if(!this.stopId){this.bookingError="Missing stop ID",this.loadDefaultRestaurants();return}this.isLoadingBooking=!0,this.bookingError="",console.log(`Fetching restaurants for stepover ${this.stopId}`);let t={stepoverId:parseInt(this.stopId),bookingId:this.bookingId||null,userId:this.bookingDetails?.createdAt||null,routeId:this.bookingDetails?.route?.routeId||null},e=new Te({"Content-Type":"application/json",Accept:"application/json"}),n=`${this.API_BASE_URL}${this.RESTAURANTS_ENDPOINT}`;console.log("Calling restaurants API:",n,"with payload:",t);let c=this.http.post(n,t,{headers:e}).pipe(qt(3e4),rt({count:2,delay:2e3}),G(m=>(console.error("Restaurants API error:",m),console.error("Error details:",{status:m.status,statusText:m.statusText,message:m.message,error:m.error}),this.bookingError=this.getDetailedErrorMessage(m),ge({success:!1,message:"Failed to load restaurants",data:{stepOver:null,restaurants:[],totalCount:0},timestamp:new Date().toISOString()}))),oe(()=>{this.isLoadingBooking=!1})).subscribe({next:m=>{console.log("Restaurants API response:",m),m&&m.success&&m.data&&m.data.restaurants?(this.restaurants=m.data.restaurants.map(b=>this.mapCSharpRestaurantToLocal(b)),this.filteredRestaurants=[...this.restaurants],m.data.stepOver&&(this.selectedStop=je(Re({},this.selectedStop),{id:m.data.stepOver.id,name:m.data.stepOver.name,code:m.data.stepOver.code,arrivalTime:m.data.stepOver.arrivalTime,stopDuration:m.data.stepOver.stopDuration}),this.stopName||(this.stopName=m.data.stepOver.name)),this.sortRestaurants(),console.log(`Loaded ${this.restaurants.length} restaurants from API`),this.bookingError=""):(this.bookingError=m?.message||"Failed to load restaurants for this stop",console.warn("API returned unsuccessful response:",m),this.loadDefaultRestaurants())},error:m=>{console.error("Subscription error:",m),this.loadDefaultRestaurants()}});this.subscription.add(c)}getRestaurantLogo(t){let e=D.apiUrl;return t.logoUrl?t.logoUrl.startsWith("http")?t.logoUrl:`${e}${t.logoUrl}`:this.getDefaultImage(t.tenantName||t.name)}onLogoError(t,e){console.warn("Logo failed to load for restaurant:",e.name),t.target.src=this.getDefaultImage(e.tenantName||e.name)}determineIfVeg(t,e,n){if(!t&&!e&&!n)return!1;let c=["veg","vegetarian","pure veg","haldiram","saravana","temple","jain"],m=`${t||""} ${e||""} ${n||""}`.toLowerCase();return c.some(b=>m.includes(b))}getEnabledFeatures(t){try{let e=JSON.parse(t);return Object.keys(e).filter(n=>e[n]===!0)}catch{return[]}}getFeatureIcon(t){return{dinein:"bi bi-house-door-fill",delivery:"bi bi-truck",takeaway:"bi bi-bag-fill",online_ordering:"bi bi-laptop"}[t]||"bi bi-check-circle-fill"}getFeatureLabel(t){return{dinein:"Dine In",delivery:"Delivery",takeaway:"Takeaway",online_ordering:"Online Ordering"}[t]||t.replace("_"," ").toUpperCase()}getLanguageLabel(t){return{en:"English",hi:"Hindi",ta:"Tamil",te:"Telugu",kn:"Kannada",ml:"Malayalam",bn:"Bengali",gu:"Gujarati",mr:"Marathi",pa:"Punjabi"}[t]||t.toUpperCase()}formatDate(t){try{return new Date(t).getFullYear().toString()}catch{return"N/A"}}generatePopularItems(t,e){if(!t&&!e)return["House Special"];let n=(t||"").toLowerCase(),c=(e||"").toLowerCase();return n.includes("spice")||c.includes("indian")?["Butter Chicken","Biryani","Naan","Dal Makhani"]:n.includes("ocean")||n.includes("sea")?["Fish Curry","Prawns Fry","Crab Masala","Seafood Platter"]:c.includes("pizza")?["Margherita","Pepperoni","Veggie Supreme"]:c.includes("cafe")||c.includes("coffee")?["Cappuccino","Americano","Sandwich","Pastries"]:["Chef Special","Today's Special","House Combo"]}filterRestaurants(){let t=this.restaurants;this.selectedFilter==="veg"&&(t=t.filter(e=>e.isVeg)),this.filteredRestaurants=t}resetFilters(){this.selectedFilter="all",this.filterRestaurants()}mapCSharpRestaurantToLocal(t){return console.log("Mapping restaurant:",t),{id:t.tenantId,name:t.tenantName||"Unknown Restaurant",cuisine:this.generateCuisineFromBusinessType(t.businessType),image:this.getRestaurantLogo(t),rating:t.rating||4,deliveryTime:t.deliveryTime||20,priceRange:t.priceRange||"\u20B9200",distance:t.distance||"0.5 km",isVeg:this.determineIfVeg(t.tenantName,t.businessType,t.notes),isFastFood:t.isFastFood||!0,isRecommended:t.isRecommended||!1,discount:t.discount,popularItems:Array.isArray(t.popularItems)?t.popularItems:this.generatePopularItems(t.tenantName,t.businessType),availableAtStop:!0,address:t.address||"Near Bus Stop",phone:t.contactPhone||t.contactMobile||"+91-0000000000",openingHours:t.openingHours||"9:00 AM - 9:00 PM",specialOffers:Array.isArray(t.specialOffers)?t.specialOffers:void 0,tenantCode:t.tenantCode,contactName:t.contactName,contactEmail:t.contactEmail,contactPhone:t.contactPhone,contactMobile:t.contactMobile,alternatePhone:t.alternatePhone,website:t.website,city:t.city,state:t.state,postalCode:t.postalCode,country:t.country,latitude:t.latitude,longitude:t.longitude,logoUrl:t.logoUrl,brandColor:t.brandColor,businessType:t.businessType,currency:t.currency,language:t.language,isActive:t.isActive,isVerified:t.isVerified,takeOrders:t.takeOrders,notes:t.notes,featuresEnabled:t.featuresEnabled,timezone:t.timezone,createdAt:t.createdAt}}getDefaultImage(t){if(!t)return"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400";let e=t.toLowerCase();return e.includes("pizza")?"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400":e.includes("burger")||e.includes("mcdonald")?"https://images.unsplash.com/photo-1552566120-d1c35e522f20?w=400":e.includes("coffee")||e.includes("cafe")?"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=400":e.includes("haldiram")||e.includes("sweets")?"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400":"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400"}generateCuisineFromBusinessType(t){if(!t)return"Multi-cuisine";let e=t.toLowerCase();return e.includes("pizza")?"Pizza, Italian":e.includes("burger")?"Burgers, Fast Food":e.includes("coffee")||e.includes("cafe")?"Coffee, Beverages, Snacks":e.includes("veg")?"Vegetarian, North Indian":e.includes("fast")?"Fast Food, Quick Bites":e.includes("restaurant")?"Multi-cuisine, Restaurant":e.includes("sweet")?"Sweets, North Indian, Snacks":"Restaurant, Multi-cuisine"}getDetailedErrorMessage(t){switch(t.status){case 0:return"Unable to connect to the server. Please check your internet connection and ensure the API server is running.";case 400:return"Invalid request. Please check the stop ID and booking information.";case 401:return"Authentication required. Please login again.";case 403:return"Access denied. You don't have permission for this request.";case 404:return`Restaurant API endpoint not found. Please ensure the API server is running on ${this.API_BASE_URL}`;case 408:return"Request timeout. Please try again.";case 429:return"Too many requests. Please wait a moment and try again.";case 500:return"Server error. Please check the API server logs and try again.";case 502:return"Service temporarily unavailable. Please try again later.";case 503:return"Service maintenance in progress. Please try again later.";default:return t.error?.message?`API Error: ${t.error.message}`:t.message?`Network Error: ${t.message}`:`Failed to load data (HTTP ${t.status})`}}retryBookingAPI(){this.callRestaurantsDetailsAPI()}retryBookingDetails(){this.loadBookingDetails().then(()=>{this.stopId&&this.callRestaurantsDetailsAPI()})}getCalculatedArrivalTime(t){let e=t||this.currentStopDetails;if(!e||!this.departureTime)return"TBD";try{let[n,c]=this.departureTime.split(":").map(Number),m=n*60+c,b=e.distance,x=Math.round(b/50*60),y=(e.stopOrder-1)*15,A=m+x+y,Z=Math.floor(A/60)%24,me=A%60,Le=Z%12||12,Ae=Z>=12?"PM":"AM";return`${Le}:${me.toString().padStart(2,"0")} ${Ae}`}catch(n){return console.error("Error calculating arrival time:",n),"TBD"}}formatTime(t){if(!t)return"";try{let[e,n]=t.split(":"),c=parseInt(e)%12||12,m=parseInt(e)>=12?"PM":"AM";return`${c}:${n} ${m}`}catch{return t}}loadDefaultRestaurants(){this.isLoadingRestaurants=!0,console.log("Loading default restaurants as fallback"),setTimeout(()=>{this.restaurants=[{id:1,name:"Subway",cuisine:"Sandwiches, Fast Food, Healthy",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400",rating:4.2,deliveryTime:15,priceRange:"\u20B9150",distance:"0.2 km",isVeg:!1,isFastFood:!0,isRecommended:!0,discount:20,popularItems:["Italian BMT","Veggie Delite","Chicken Teriyaki"],availableAtStop:!0,address:"Near Bus Stop",phone:"+91-9876543210",openingHours:"6:00 AM - 11:00 PM"},{id:2,name:"McDonald's",cuisine:"Burgers, Fast Food, Beverages",image:"https://images.unsplash.com/photo-1552566120-d1c35e522f20?w=400",rating:4.1,deliveryTime:12,priceRange:"\u20B9200",distance:"0.1 km",isVeg:!1,isFastFood:!0,isRecommended:!1,discount:15,popularItems:["Big Mac","McChicken","French Fries"],availableAtStop:!0,address:"Bus Terminal Food Court",phone:"+91-9876543211",openingHours:"24/7"},{id:3,name:"Haldiram's",cuisine:"North Indian, Sweets, Snacks",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400",rating:4.5,deliveryTime:18,priceRange:"\u20B9120",distance:"0.3 km",isVeg:!0,isFastFood:!1,isRecommended:!0,popularItems:["Chole Bhature","Samosa","Rasgulla"],availableAtStop:!0,address:"Main Road",phone:"+91-9876543212",openingHours:"7:00 AM - 10:00 PM"}],this.isLoadingBooking||(this.filteredRestaurants=[...this.restaurants],this.sortRestaurants()),this.isLoadingRestaurants=!1,console.log("Default restaurants loaded")},1e3)}sortRestaurants(){switch(this.sortBy){case"rating":this.filteredRestaurants.sort((t,e)=>e.rating-t.rating);break;case"delivery":this.filteredRestaurants.sort((t,e)=>t.deliveryTime-e.deliveryTime);break;case"price":this.filteredRestaurants.sort((t,e)=>parseInt(t.priceRange.replace("\u20B9",""))-parseInt(e.priceRange.replace("\u20B9","")));break;default:this.filteredRestaurants.sort((t,e)=>(e.isRecommended?1:0)-(t.isRecommended?1:0))}}setFilter(t){this.selectedFilter=t,this.filterRestaurants()}clearSearch(){this.searchQuery="",this.filterRestaurants()}onImageError(t,e){console.warn("Image failed to load for restaurant:",e.name),t.target.src=this.getDefaultFoodImage(e.tenantName||e.name)}selectRestaurant(t){let e=this.foodOrderService.orderData$.subscribe(n=>{let c=je(Re({},n),{restaurant:t,bookingDetails:this.bookingDetails,bookingContext:{bookingId:this.bookingId,stopOverId:this.stopId,stopOverName:this.stopName}});this.foodOrderService.setOrderData(c)});this.subscription.add(e),this.router.navigate(["/menu"],{queryParams:{restaurantId:t.tenantCode,bookingId:this.bookingId,stopOverId:this.stopId}})}goBack(){this.router.navigate(["/stop-overs"],{queryParams:{bookingId:this.bookingId}})}getAuthToken(){return localStorage.getItem("authToken")||""}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(j),P(ot))};static \u0275cmp=S({type:r,selectors:[["app-restaurants"]],decls:40,vars:17,consts:[[1,"restaurants-container"],[1,"header"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"stop-info"],[1,"stop-details"],[1,"stop-title"],["class","status-badge",3,"class",4,"ngIf"],[1,"stop-meta"],[1,"arrival-info"],[1,"bi","bi-clock-fill"],[1,"separator"],[1,"stop-duration"],[1,"bi","bi-hourglass-split"],["class","separator",4,"ngIf"],["class","route-text",4,"ngIf"],["class","compact-loading",4,"ngIf"],["class","compact-error",4,"ngIf"],[1,"restaurants-content"],[1,"content-header"],[1,"section-info"],[1,"veg-filter"],[1,"veg-toggle",3,"click"],[1,"bi","bi-leaf"],["class","booking-loading",4,"ngIf"],["class","booking-error",4,"ngIf"],["class","no-results",4,"ngIf"],["class","restaurants-grid",4,"ngIf"],["class","quick-info",4,"ngIf"],[1,"status-badge"],[1,"route-text"],[1,"bi","bi-geo-alt"],[1,"compact-loading"],[1,"loading-bar"],[1,"loading-progress"],[1,"compact-error"],[1,"error-banner"],[1,"bi","bi-exclamation-triangle"],[1,"retry-btn",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"booking-loading"],[1,"loading-card"],[1,"loading-spinner"],[1,"spinner"],[1,"booking-error"],[1,"error-card"],[1,"bi","bi-exclamation-triangle-fill"],[1,"error-actions"],[1,"btn-retry",3,"click"],[1,"no-results"],[1,"bi","bi-search"],[4,"ngIf"],["class","reset-filters",3,"click",4,"ngIf"],[1,"reset-filters",3,"click"],[1,"restaurants-grid"],["class","restaurant-card",3,"animation-delay","click",4,"ngFor","ngForOf"],[1,"restaurant-card",3,"click"],[1,"restaurant-image"],[3,"error","src","alt"],[1,"veg-indicator"],[1,"veg-dot"],[1,"time-overlay"],[1,"restaurant-content"],[1,"restaurant-header"],[1,"price-tag"],[1,"restaurant-type"],[1,"type-badge"],["class","popular-section",4,"ngIf"],[1,"order-footer"],[1,"rating-info"],[1,"rating"],[1,"bi","bi-star-fill"],[1,"order-time"],[1,"order-status"],[1,"popular-section"],[1,"popular-label"],[1,"popular-list"],["class","popular-item",4,"ngFor","ngForOf"],[1,"popular-item"],[1,"quick-info"],[1,"info-item"],[1,"bi","bi-shield-check"],[1,"bi","bi-clock"],[1,"bi","bi-cash"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return n.goBack()}),d(3,"i",3),o(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),s(8),o(),_(9,ss,2,3,"div",7),o(),i(10,"div",8)(11,"span",9),d(12,"i",10),s(13),o(),i(14,"span",11),s(15,"\u2022"),o(),i(16,"span",12),d(17,"i",13),s(18),o(),_(19,cs,2,0,"span",14)(20,ls,3,2,"span",15),o()()()(),_(21,ds,5,0,"div",16)(22,ms,7,1,"div",17),i(23,"div",18)(24,"div",19)(25,"div",20)(26,"h3"),s(27,"Available Restaurants"),o(),i(28,"p"),s(29),o()(),i(30,"div",21)(31,"button",22),g("click",function(){return n.toggleVegFilter()}),d(32,"i",23),i(33,"span"),s(34,"Veg Only"),o()()()(),_(35,ps,8,1,"div",24)(36,gs,11,1,"div",25)(37,bs,7,3,"div",26)(38,Os,2,1,"div",27)(39,Ps,13,0,"div",28),o()()),e&2&&(a(8),h(n.stopName||"Loading..."),a(),l("ngIf",n.bookingDetails),a(4),C(" ",n.getCalculatedArrivalTime()," "),a(5),C(" ",(n.currentStopDetails==null?null:n.currentStopDetails.stopDuration)||"15 min"," "),a(),l("ngIf",n.bookingDetails),a(),l("ngIf",n.bookingDetails),a(),l("ngIf",n.isLoadingBookingDetails),a(),l("ngIf",n.bookingDetailsError&&!n.isLoadingBookingDetails),a(7),q("",n.filteredRestaurants.length," restaurants available at ",n.selectedStop.name||n.stopName,""),a(2),M("active",n.selectedFilter==="veg"),a(4),l("ngIf",n.isLoadingBooking),a(),l("ngIf",n.bookingError&&!n.isLoadingBooking),a(),l("ngIf",!n.isLoadingBooking&&!n.isLoadingBookingDetails&&!n.bookingError&&n.filteredRestaurants.length===0),a(),l("ngIf",!n.isLoadingBooking&&!n.isLoadingBookingDetails&&!n.bookingError&&n.filteredRestaurants.length>0),a(),l("ngIf",!n.isLoadingBooking&&!n.isLoadingBookingDetails&&!n.bookingError&&n.filteredRestaurants.length>0))},dependencies:[k,N,L,z],styles:[".restaurants-container[_ngcontent-%COMP%]{min-height:100vh;background:#fff}.header[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.75rem 1rem;box-shadow:0 1px 6px #0000000f;display:flex;align-items:center;gap:.75rem;position:sticky;top:0;z-index:100;border-bottom:1px solid #e2e8f0;min-height:60px}.back-btn[_ngcontent-%COMP%]{background:#f1f5f9;border:none;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#64748b;flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#475569;transform:translate(-1px)}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.stop-info[_ngcontent-%COMP%]{flex:1;min-width:0}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]{width:100%}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.25rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#1e293b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.2rem .6rem;border-radius:12px;font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px;margin-left:.5rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   .status-badge.status-confirmed[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#64748b;flex-wrap:wrap;line-height:1.2}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .arrival-info[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .stop-duration[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;white-space:nowrap}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .arrival-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .stop-duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.7rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#cbd5e1;font-size:.6rem}.compact-loading[_ngcontent-%COMP%]{background:#f8fafc;padding:.5rem 1rem;display:flex;align-items:center;gap:.75rem}.compact-loading[_ngcontent-%COMP%]   .loading-bar[_ngcontent-%COMP%]{flex:1;height:3px;background:#e2e8f0;border-radius:2px;overflow:hidden}.compact-loading[_ngcontent-%COMP%]   .loading-bar[_ngcontent-%COMP%]   .loading-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3b82f6,#06b6d4);border-radius:2px;animation:_ngcontent-%COMP%_loading-progress 2s ease-in-out infinite}.compact-loading[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#64748b;font-size:.75rem;white-space:nowrap}@keyframes _ngcontent-%COMP%_loading-progress{0%{width:0%;transform:translate(-100%)}50%{width:100%;transform:translate(0)}to{width:100%;transform:translate(100%)}}.compact-error[_ngcontent-%COMP%]{background:#fef2f2;border-left:3px solid #ef4444;padding:.5rem 1rem}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.8rem}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444;font-size:1rem;flex-shrink:0}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#991b1b;flex:1;line-height:1.3}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:none;width:24px;height:24px;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover{background:#dc2626}.compact-error[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:.75rem}.restaurants-content[_ngcontent-%COMP%]{padding:1rem;background:#f8fafc;min-height:calc(100vh - 60px)}.content-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;margin-bottom:1.5rem;box-shadow:0 2px 10px #0000000f}.content-header[_ngcontent-%COMP%]   .section-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1e293b;margin:0 0 .25rem}.content-header[_ngcontent-%COMP%]   .section-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:.9rem}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]   .veg-toggle[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:25px;padding:.5rem 1rem;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;color:#64748b}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]   .veg-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:#16a34a}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]   .veg-toggle[_ngcontent-%COMP%]:hover{border-color:#16a34a;background:#f0fdf4}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]   .veg-toggle.active[_ngcontent-%COMP%]{background:#16a34a;color:#fff;border-color:#16a34a;transform:scale(1.05)}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]   .veg-toggle.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.booking-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px}.booking-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 4px 20px #00000014}.booking-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-bottom:1.5rem}.booking-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f1f5f9;border-top:4px solid #3b82f6;border-radius:50%;margin:0 auto;animation:_ngcontent-%COMP%_spin 1s linear infinite}.booking-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1e293b;margin:0 0 .5rem;font-weight:700}.booking-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0}.booking-error[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 4px 20px #00000014;border-left:4px solid #ef4444}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1e293b;margin:0 0 .5rem;font-weight:700}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;background:#3b82f6;color:#fff}.booking-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:#2563eb}.no-results[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;background:#fff;border-radius:16px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.no-results[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#cbd5e1;margin-bottom:1rem}.no-results[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;color:#1e293b;margin:0 0 .5rem}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem}.no-results[_ngcontent-%COMP%]   .reset-filters[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:.5rem}.no-results[_ngcontent-%COMP%]   .reset-filters[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.restaurants-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin-bottom:2rem}.restaurant-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 20px #00000014;border:1px solid #f1f5f9;cursor:pointer;transition:all .4s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_slideInUp .6s ease-out both}.restaurant-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #3b82f626;transform:translateY(-4px);border-color:#3b82f6}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .veg-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;width:20px;height:20px;border-radius:4px;display:flex;align-items:center;justify-content:center;background:#fff;box-shadow:0 2px 4px #0000001a}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .veg-indicator[_ngcontent-%COMP%]   .veg-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .veg-indicator.veg[_ngcontent-%COMP%]   .veg-dot[_ngcontent-%COMP%]{background:#16a34a}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .veg-indicator.non-veg[_ngcontent-%COMP%]   .veg-dot[_ngcontent-%COMP%]{background:#dc2626}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .time-overlay[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:#000c;color:#fff;padding:.4rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600;display:flex;align-items:center;gap:.25rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]   .time-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]{padding:1.25rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#1e293b;margin:0;flex:1;margin-right:.75rem;line-height:1.3}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-header[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;padding:.4rem .8rem;border-radius:8px;font-size:.9rem;font-weight:600;white-space:nowrap}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-type[_ngcontent-%COMP%]{margin-bottom:1rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .75rem;border-radius:15px;font-size:.8rem;font-weight:500;background:#fee2e2;color:#dc2626}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-type[_ngcontent-%COMP%]   .type-badge.veg-type[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .popular-section[_ngcontent-%COMP%]{margin-bottom:1.25rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .popular-section[_ngcontent-%COMP%]   .popular-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#1e293b;margin-bottom:.5rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .popular-section[_ngcontent-%COMP%]   .popular-list[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;line-height:1.4}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .popular-section[_ngcontent-%COMP%]   .popular-list[_ngcontent-%COMP%]   .popular-item[_ngcontent-%COMP%]{display:inline}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px solid #f1f5f9}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .rating-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .rating-info[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:#16a34a;font-weight:600}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .rating-info[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .rating-info[_ngcontent-%COMP%]   .order-time[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:8px;font-size:.8rem;font-weight:600;background:#fee2e2;color:#dc2626}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .order-status.available[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.quick-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:2rem;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .8s both}.quick-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:12px;text-align:center;border:1px solid #e2e8f0;transition:transform .3s ease}.quick-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.quick-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:1.5rem;color:#3b82f6;margin-bottom:.5rem}.quick-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#1e293b}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:.5rem .75rem;min-height:54px}.back-btn[_ngcontent-%COMP%]{width:32px;height:32px}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.95rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-title[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.15rem .5rem;font-size:.6rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]{font-size:.7rem;gap:.4rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .arrival-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .stop-duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.65rem}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{max-width:120px}.restaurants-content[_ngcontent-%COMP%]{padding:.75rem;min-height:calc(100vh - 54px)}.content-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.content-header[_ngcontent-%COMP%]   .section-info[_ngcontent-%COMP%]{text-align:center}.content-header[_ngcontent-%COMP%]   .section-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.content-header[_ngcontent-%COMP%]   .section-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.content-header[_ngcontent-%COMP%]   .veg-filter[_ngcontent-%COMP%]{display:flex;justify-content:center}.restaurants-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-image[_ngcontent-%COMP%]{height:180px}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]{padding:1rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.restaurant-card[_ngcontent-%COMP%]   .restaurant-content[_ngcontent-%COMP%]   .restaurant-header[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]{align-self:flex-start}.quick-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}@media (max-width: 480px){.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{display:none}.stop-info[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   .stop-meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]:last-of-type{display:none}}"]})};function xs(r,t){r&1&&(i(0,"div",27),d(1,"div",28)(2,"div",29),o())}function ys(r,t){if(r&1&&(i(0,"span",35),d(1,"i",36),s(2),o()),r&2){let e=p(2);a(2),C(" ",e.selectedRestaurant.rating," ")}}function Ss(r,t){if(r&1&&(i(0,"span",37),d(1,"i",38),s(2),o()),r&2){let e=p(2);a(2),C(" ",e.selectedRestaurant.city," ")}}function ws(r,t){if(r&1&&(i(0,"div")(1,"h2"),s(2),o(),i(3,"div",30)(4,"span",31),d(5,"i",32),s(6),o(),_(7,ys,3,1,"span",33)(8,Ss,3,1,"span",34),o()()),r&2){let e=p();a(2),h(e.selectedRestaurant.tenantName),a(4),C(" ",e.selectedRestaurant.deliveryTime||20,"min "),a(),l("ngIf",e.selectedRestaurant.rating),a(),l("ngIf",e.selectedRestaurant.city)}}function ks(r,t){if(r&1&&(i(0,"span",39),s(1),o()),r&2){let e=p();a(),h(e.cartItemsCount)}}function Is(r,t){if(r&1&&(i(0,"div",40)(1,"div",41)(2,"div",42),d(3,"div",43),o(),i(4,"h4"),s(5,"Loading menu..."),o(),i(6,"p"),s(7),o()()()),r&2){let e=p();a(7),C("Fetching delicious items from ",e.selectedRestaurant.tenantName||"restaurant","")}}function Es(r,t){if(r&1){let e=v();i(0,"div",44)(1,"div",45),d(2,"i",46),i(3,"h4"),s(4,"Unable to load menu"),o(),i(5,"p"),s(6),o(),i(7,"div",47)(8,"button",48),g("click",function(){u(e);let c=p();return f(c.retryLoadMenu())}),d(9,"i",49),s(10," Try Again "),o(),i(11,"button",50),g("click",function(){u(e);let c=p();return f(c.goBack())}),d(12,"i",3),s(13," Go Back "),o()()()()}if(r&2){let e=p();a(6),h(e.menuError)}}function Ts(r,t){if(r&1){let e=v();i(0,"button",62),g("click",function(){u(e);let c=p(2);return f(c.clearSearch())}),d(1,"i",24),o()}}function Ls(r,t){if(r&1){let e=v();i(0,"button",65),g("click",function(){let c=u(e).$implicit,m=p(3);return f(m.selectCategory(c))}),s(1),o()}if(r&2){let e=t.$implicit,n=p(3);M("active",n.selectedCategory===e),a(),C(" ",e," ")}}function As(r,t){if(r&1&&(i(0,"div",63),_(1,Ls,2,3,"button",64),o()),r&2){let e=p(2);a(),l("ngForOf",e.categories)}}function Rs(r,t){if(r&1){let e=v();i(0,"div",66)(1,"span",67),s(2),o(),i(3,"div",68)(4,"button",69),g("click",function(){u(e);let c=p(2);return f(c.setViewMode("list"))}),d(5,"i",70),o(),i(6,"button",69),g("click",function(){u(e);let c=p(2);return f(c.setViewMode("grid"))}),d(7,"i",71),o()()()}if(r&2){let e=p(2);a(2),C("",e.filteredItems.length," items found"),a(2),M("active",e.viewMode==="list"),a(2),M("active",e.viewMode==="grid")}}function Ns(r,t){if(r&1){let e=v();i(0,"div",72),d(1,"i",54),i(2,"h4"),s(3,"No items found"),o(),i(4,"p"),s(5,"Try searching for something else"),o(),i(6,"button",73),g("click",function(){u(e);let c=p(2);return f(c.clearSearch())}),s(7,"Clear Search"),o()()}}function Ds(r,t){if(r&1&&(i(0,"div",97),s(1),o()),r&2){let e=p().$implicit;a(),C(" ",e.discountPercentage,"% OFF ")}}function Fs(r,t){r&1&&(i(0,"span",98),d(1,"i",99),o())}function Vs(r,t){r&1&&(i(0,"span",100),d(1,"i",101),o())}function zs(r,t){r&1&&(i(0,"span",102),d(1,"i",103),o())}function Bs(r,t){if(r&1&&(i(0,"span",104),s(1),o()),r&2){let e=p().$implicit;a(),C(" ",e.promotionLabel," ")}}function js(r,t){if(r&1&&(i(0,"span",105),s(1),o()),r&2){let e=p().$implicit;a(),C("\u20B9",e.price,"")}}function $s(r,t){if(r&1){let e=v();i(0,"div",106)(1,"button",107),g("click",function(c){u(e);let m=p().$implicit,b=p(2);return f(b.decreaseQuantity(m,c))}),d(2,"i",108),o(),i(3,"span",109),s(4),o(),i(5,"button",107),g("click",function(c){u(e);let m=p().$implicit,b=p(2);return f(b.increaseQuantity(m,c))}),d(6,"i",110),o()()}if(r&2){let e=p().$implicit,n=p(2);a(4),h(n.getItemQuantity(e.itemId))}}function Us(r,t){if(r&1){let e=v();i(0,"button",111),g("click",function(c){u(e);let m=p().$implicit,b=p(2);return f(b.addToCart(m,c))}),d(1,"i",110),s(2," Add "),o()}}function qs(r,t){if(r&1){let e=v();i(0,"div",74),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.viewItemDetails(c))}),i(1,"div",75)(2,"img",76),g("error",function(c){u(e);let m=p(2);return f(m.onImageError(c))}),o(),i(3,"div",77),_(4,Ds,2,1,"div",78),i(5,"div",79),d(6,"i",32),s(7),o()()(),i(8,"div",80)(9,"div",81)(10,"div",82)(11,"h4"),s(12),o(),i(13,"div",83),_(14,Fs,2,0,"span",84)(15,Vs,2,0,"span",85)(16,zs,2,0,"span",86)(17,Bs,2,1,"span",87),o()(),i(18,"div",88)(19,"span",89),s(20),o(),_(21,js,2,1,"span",90),o()(),i(22,"p",91),s(23),o(),i(24,"div",92)(25,"span",93),s(26),o(),i(27,"div",94),_(28,$s,7,1,"div",95)(29,Us,3,0,"button",96),o()()()()}if(r&2){let e=t.$implicit,n=p(2);a(2),l("src",n.getItemImage(e),Ee)("alt",e.itemName),a(2),l("ngIf",e.hasDiscount),a(3),C(" ",e.preparationTime,"m "),a(5),h(e.itemName),a(2),l("ngIf",e.isVegetarian),a(),l("ngIf",!e.isVegetarian),a(),l("ngIf",e.isSpicy),a(),l("ngIf",e.isPromotion),a(3),C("\u20B9",e.effectivePrice,""),a(),l("ngIf",e.hasDiscount),a(2),h(n.truncateText(e.description,80)),a(3),h(e.subcategoryName),a(2),l("ngIf",n.getItemQuantity(e.itemId)>0),a(),l("ngIf",n.getItemQuantity(e.itemId)===0)}}function Gs(r,t){if(r&1){let e=v();i(0,"div",51)(1,"div",52)(2,"div",53),d(3,"i",54),i(4,"input",55),T("ngModelChange",function(c){u(e);let m=p();return E(m.searchQuery,c)||(m.searchQuery=c),f(c)}),g("input",function(){u(e);let c=p();return f(c.filterMenu())}),o(),_(5,Ts,2,0,"button",56),o()(),_(6,As,2,1,"div",57)(7,Rs,8,5,"div",58)(8,Ns,8,0,"div",59),i(9,"div",60),_(10,qs,30,15,"div",61),o()()}if(r&2){let e=p();a(4),I("ngModel",e.searchQuery),a(),l("ngIf",e.searchQuery),a(),l("ngIf",e.categories.length>0),a(),l("ngIf",e.filteredItems.length>0),a(),l("ngIf",e.filteredItems.length===0&&e.searchQuery),a(),M("grid-view",e.viewMode==="grid"),a(),l("ngForOf",e.filteredItems)("ngForTrackBy",e.trackByItemId)}}function Hs(r,t){r&1&&d(0,"i",22)}function Ws(r,t){r&1&&(i(0,"div",42),d(1,"div",43),o())}function Ys(r,t){if(r&1&&(i(0,"span",67),s(1),o()),r&2){let e=p(2);a(),h(e.cartItemsCount)}}function Qs(r,t){if(r&1&&(i(0,"span",123),s(1),o()),r&2){let e=p(2);a(),q(" ",e.cartItemsCount," item",e.cartItemsCount>1?"s":""," ")}}function Ks(r,t){r&1&&(i(0,"span",123),s(1," Updating order... "),o())}function Js(r,t){r&1&&(i(0,"span"),s(1,"Checkout"),o())}function Zs(r,t){r&1&&(i(0,"span"),s(1,"Processing..."),o())}function Xs(r,t){r&1&&d(0,"i",124)}function ec(r,t){r&1&&d(0,"div",125)}function tc(r,t){if(r&1){let e=v();i(0,"div",112),g("click",function(){u(e);let c=p();return f(!c.isUpdatingBooking&&c.proceedToCheckout())}),i(1,"div",113)(2,"div",114),_(3,Hs,1,0,"i",115)(4,Ws,2,0,"div",18)(5,Ys,2,1,"span",116),o(),i(6,"div",117),_(7,Qs,2,2,"span",118)(8,Ks,2,0,"span",118),i(9,"span",119),s(10),o()()(),i(11,"div",120),_(12,Js,2,0,"span",6)(13,Zs,2,0,"span",6)(14,Xs,1,0,"i",121)(15,ec,1,0,"div",122),o()()}if(r&2){let e=p();M("loading",e.isUpdatingBooking),a(3),l("ngIf",!e.isUpdatingBooking),a(),l("ngIf",e.isUpdatingBooking),a(),l("ngIf",!e.isUpdatingBooking),a(2),l("ngIf",!e.isUpdatingBooking),a(),l("ngIf",e.isUpdatingBooking),a(2),C("\u20B9",e.cartTotal,""),a(),M("loading",e.isUpdatingBooking),a(),l("ngIf",!e.isUpdatingBooking),a(),l("ngIf",e.isUpdatingBooking),a(),l("ngIf",!e.isUpdatingBooking),a(),l("ngIf",e.isUpdatingBooking)}}function nc(r,t){r&1&&(i(0,"div",126)(1,"div",41)(2,"div",42),d(3,"div",43),o(),i(4,"h4"),s(5,"Loading your cart..."),o(),i(6,"p"),s(7,"Fetching your previously added items"),o()()())}function ic(r,t){r&1&&d(0,"i",127)}function oc(r,t){r&1&&(i(0,"div",42),d(1,"div",43),o())}function rc(r,t){r&1&&(i(0,"span"),s(1,"Proceed to Pay"),o())}function ac(r,t){r&1&&(i(0,"span"),s(1,"Updating Order..."),o())}function sc(r,t){if(r&1&&(i(0,"div",139),d(1,"i",140),i(2,"span"),s(3),o()()),r&2){let e=p(2);a(3),h(e.selectedRestaurant.name)}}function cc(r,t){if(r&1){let e=v();i(0,"div",141)(1,"div",75)(2,"img",142),g("error",function(c){u(e);let m=p(2);return f(m.onImageError(c))}),o()(),i(3,"div",143)(4,"h4"),s(5),o(),i(6,"div",88),s(7),o(),i(8,"div",144),s(9),o()(),i(10,"div",145)(11,"div",106)(12,"button",107),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.updateCartItemQuantity(c.id,-1))}),d(13,"i",108),o(),i(14,"span",146),s(15),o(),i(16,"button",107),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.updateCartItemQuantity(c.id,1))}),d(17,"i",110),o()(),i(18,"button",147),g("click",function(){let c=u(e).$implicit,m=p(2);return f(m.removeFromCart(c.id))}),d(19,"i",137),o()()()}if(r&2){let e=t.$implicit;a(2),l("src",e.image,Ee)("alt",e.name),a(3),h(e.name),a(2),C("\u20B9",e.price,""),a(2),C("Total: \u20B9",e.price*e.quantity,""),a(6),h(e.quantity)}}function lc(r,t){if(r&1){let e=v();i(0,"div",128),_(1,sc,4,1,"div",129),i(2,"div",130),_(3,cc,20,6,"div",131),o(),i(4,"div",132)(5,"div",133)(6,"span"),s(7),o(),i(8,"span"),s(9),o()(),i(10,"div",133)(11,"span"),s(12,"Packaging Fee"),o(),i(13,"span"),s(14,"\u20B95"),o()(),i(15,"div",133)(16,"span"),s(17,"Platform Fee"),o(),i(18,"span"),s(19,"\u20B93"),o()(),i(20,"div",134)(21,"span"),s(22,"Total Amount"),o(),i(23,"span"),s(24),o()()(),i(25,"div",135)(26,"button",136),g("click",function(){u(e);let c=p();return f(c.clearCart())}),d(27,"i",137),s(28," Clear Cart "),o(),i(29,"button",138),g("click",function(){u(e);let c=p();return f(c.proceedToCheckout())}),d(30,"i",127),s(31," Proceed to Pay "),o()()()}if(r&2){let e=p();a(),l("ngIf",e.selectedRestaurant.name),a(2),l("ngForOf",e.cartItems)("ngForTrackBy",e.trackByItemId),a(4),C("Subtotal (",e.cartItemsCount," items)"),a(2),C("\u20B9",e.cartTotal,""),a(15),C("\u20B9",e.cartTotal+8,"")}}function dc(r,t){if(r&1){let e=v();i(0,"div",148),d(1,"i",149),i(2,"h4"),s(3,"Your cart is empty"),o(),i(4,"p"),s(5,"Browse our delicious menu and add items to get started!"),o(),i(6,"button",150),g("click",function(){u(e);let c=p();return f(c.closeCart())}),d(7,"i",3),s(8," Continue Shopping "),o()()}}var Ft=class r{constructor(t,e,n,c){this.router=t;this.route=e;this.http=n;this.foodOrderService=c}destroy$=new B;API_BASE_URL=D.apiBaseUrl;MENU_ENDPOINT="/menuitem/restaurant";BOOKING_ENDPOINT="/search/booking";selectedRestaurant={};restaurantId=0;bookingID="";menuItems=[];filteredItems=[];categories=[];selectedCategory="All";searchQuery="";viewMode="list";cartItems=[];cartItemsCount=0;cartTotal=0;isLoading=!0;isLoadingMenu=!1;isLoadingCart=!1;isUpdatingBooking=!1;menuError="";isCartOpen=!1;ngOnInit(){this.route.queryParams.pipe(w(this.destroy$)).subscribe(t=>{this.restaurantId=parseInt(t.restaurantId)||0,this.bookingID=t.bookingId||"",console.log("Menu component initialized - Restaurant ID:",this.restaurantId,"Booking ID:",this.bookingID),this.restaurantId?this.loadMenuFromAPI():(this.menuError="Restaurant ID not provided",this.isLoading=!1),this.bookingID&&this.loadExistingBookingItems()}),this.foodOrderService.orderData$.pipe(w(this.destroy$)).subscribe(t=>{t.restaurant&&!this.selectedRestaurant.tenantId&&(this.selectedRestaurant={tenantId:t.restaurant.id,tenantName:t.restaurant.name,deliveryTime:t.restaurant.deliveryTime||20,rating:t.restaurant.rating||4})}),this.foodOrderService.cartItems$.pipe(w(this.destroy$)).subscribe(t=>{this.cartItems=t,this.cartItemsCount=t.reduce((e,n)=>e+n.quantity,0),this.cartTotal=this.foodOrderService.getCartTotal()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadExistingBookingItems(){if(!this.bookingID)return;this.isLoadingCart=!0,console.log("Loading existing booking items for booking ID:",this.bookingID);let t=`${this.API_BASE_URL}${this.BOOKING_ENDPOINT}/${this.bookingID}/details`;this.http.get(t).pipe(G(e=>(console.error("Error loading booking items:",e),ge({success:!1,message:"Failed to load existing booking items"}))),oe(()=>{this.isLoadingCart=!1})).subscribe({next:e=>{if(console.log("Booking details response:",e),e.success&&e.data&&e.data.bookimgItems)try{let n=JSON.parse(e.data.bookimgItems);console.log("Existing booking items:",n),n&&n.length>0&&(this.foodOrderService.clearCart(),n.forEach(c=>{if(c.Status==="Active"){let m={id:c.ItemId,name:c.ItemName,price:c.DiscountedPrice||c.Price,image:this.getItemImageById(c.ItemId),quantity:c.Quantity,specialInstructions:c.SpecialInstructions};for(let b=0;b<c.Quantity;b++)this.foodOrderService.addToCart({id:m.id,name:m.name,price:m.price,image:m.image})}}),console.log(`Loaded ${n.length} existing items into cart`))}catch(n){console.error("Error parsing existing booking items:",n)}else console.log("No existing booking items found")},error:e=>{console.error("Error loading existing booking items:",e)}})}getItemImageById(t){let e=this.menuItems.find(n=>n.itemId===t);return e?this.getItemImage(e):"https://via.placeholder.com/200x200/e2e8f0/64748b?text=Food"}loadMenuFromAPI(){if(!this.restaurantId){this.menuError="Invalid restaurant ID",this.isLoading=!1;return}this.isLoadingMenu=!0,this.menuError="",this.isLoading=!0,console.log(`Loading menu for restaurant ID: ${this.restaurantId}`);let t=new pe().set("isActive","true").set("availabilityStatus","available").set("pageSize","100"),e=`${this.API_BASE_URL}${this.MENU_ENDPOINT}/${this.restaurantId}`;this.http.get(e,{params:t}).pipe(G(n=>(console.error("Menu API error:",n),this.menuError=this.getErrorMessage(n),ge({success:!1,data:[],message:"Failed to load menu",totalCount:0,page:1,pageSize:0,totalPages:0,restaurantInfo:void 0}))),oe(()=>{this.isLoadingMenu=!1,this.isLoading=!1,this.bookingID&&this.menuItems.length>0&&setTimeout(()=>{this.loadExistingBookingItems()},500)})).subscribe({next:n=>{console.log("Menu API response:",n),n.success&&n.data&&n.data.length>0?(this.menuItems=n.data,this.extractCategories(),this.filterMenu(),n.restaurantInfo&&(this.selectedRestaurant={tenantId:n.restaurantInfo.tenantId,tenantName:n.restaurantInfo.tenantName,tenantCode:n.restaurantInfo.tenantCode,address:n.restaurantInfo.address,city:n.restaurantInfo.city,phone:n.restaurantInfo.phone,deliveryTime:20,rating:4,isActive:n.restaurantInfo.isActive,takeOrders:n.restaurantInfo.takeOrders}),console.log(`Loaded ${this.menuItems.length} menu items`),this.menuError=""):(this.menuError=n.message||"No menu items found for this restaurant",this.loadFallbackMenu())},error:n=>{console.error("Menu subscription error:",n),this.loadFallbackMenu()}})}updateBookingItems(){return new Promise((t,e)=>{if(!this.bookingID||this.cartItems.length===0){console.warn("No booking ID or cart items to update"),t(!1);return}this.isUpdatingBooking=!0;let n=this.cartItems.map(b=>{let x=this.menuItems.find(y=>y.itemId===b.id);return{itemId:b.id,itemName:b.name,categoryId:x?.categoryId||0,categoryName:x?.categoryName||"Unknown",subcategoryId:x?.subcategoryId||void 0,subcategoryName:x?.subcategoryName||void 0,price:x?.price||b.price,discountedPrice:x?.discountedPrice||void 0,quantity:b.quantity,specialInstructions:b.specialInstructions||void 0}}),c={itemsToAdd:n},m=`${this.API_BASE_URL}${this.BOOKING_ENDPOINT}/${this.bookingID}/items`;console.log("Updating booking items:",{bookingId:this.bookingID,itemsCount:n.length,totalAmount:this.cartTotal}),this.http.put(m,c).pipe(G(b=>{console.error("Booking update API error:",b);let x=this.getErrorMessage(b);throw new Error(x)}),oe(()=>{this.isUpdatingBooking=!1})).subscribe({next:b=>{if(console.log("Booking update response:",b),b.success&&b.data)console.log(`Successfully updated booking with ${b.data.itemCount} items`),console.log(`Total amount: \u20B9${b.data.totalAmount}`),this.foodOrderService.clearCart(),t(!0);else{let x=b.message||"Failed to update booking items";console.error("Booking update failed:",x),e(new Error(x))}},error:b=>{console.error("Booking update subscription error:",b),e(b)}})})}getErrorMessage(t){return t.status===404?"Booking not found or restaurant not available":t.status===400?"Invalid booking data. Please check your order.":t.status===0?"Unable to connect to server. Please check your connection.":t.status>=500?"Server error. Please try again later.":t.error?.message?t.error.message:t.message||"An unexpected error occurred"}retryLoadMenu(){this.loadMenuFromAPI()}loadFallbackMenu(){console.log("Loading fallback menu data"),this.menuItems=[],this.selectedRestaurant={tenantId:this.restaurantId,tenantName:"Restaurant",deliveryTime:20,rating:4,isActive:!0,takeOrders:!0},this.extractCategories(),this.filterMenu(),this.menuError=""}extractCategories(){let t=[...new Set(this.menuItems.map(e=>e.categoryName))];this.categories=["All",...t.sort()]}filterMenu(){let t=this.menuItems;if(this.selectedCategory!=="All"&&(t=t.filter(e=>e.categoryName===this.selectedCategory)),this.searchQuery.trim()){let e=this.searchQuery.toLowerCase();t=t.filter(n=>n.itemName.toLowerCase().includes(e)||n.description.toLowerCase().includes(e)||n.categoryName.toLowerCase().includes(e)||n.subcategoryName.toLowerCase().includes(e)||n.ingredients.toLowerCase().includes(e))}this.filteredItems=t}selectCategory(t){this.selectedCategory=t,this.filterMenu()}clearSearch(){this.searchQuery="",this.filterMenu()}setViewMode(t){this.viewMode=t}getItemImage(t){return t.images&&t.images.length>0?t.images[0]:"https://via.placeholder.com/200x200/e2e8f0/64748b?text=Food"}truncateText(t,e){return t.length>e?t.substring(0,e)+"...":t}trackByItemId(t,e){return e.itemId}onImageError(t){t.target.src="https://via.placeholder.com/200x200/e2e8f0/64748b?text=Food"}viewItemDetails(t){console.log("View item details:",t)}toggleCart(){this.isCartOpen=!this.isCartOpen}closeCart(){this.isCartOpen=!1}openCart(){this.toggleCart()}addToCart(t,e){e.stopPropagation(),this.foodOrderService.addToCart({id:t.itemId,name:t.itemName,price:t.effectivePrice,image:this.getItemImage(t)})}getItemQuantity(t){let e=this.cartItems.find(n=>n.id===t);return e?e.quantity:0}increaseQuantity(t,e){e.stopPropagation();let n=this.getItemQuantity(t.itemId);this.foodOrderService.updateQuantity(t.itemId,n+1)}decreaseQuantity(t,e){e.stopPropagation();let n=this.getItemQuantity(t.itemId);n>1?this.foodOrderService.updateQuantity(t.itemId,n-1):n===1&&this.removeFromCart(t.itemId)}updateCartItemQuantity(t,e){let c=this.getItemQuantity(t)+e;c<=0?this.removeFromCart(t):this.foodOrderService.updateQuantity(t,c)}removeFromCart(t){this.foodOrderService.removeFromCart(t)}clearCart(){this.foodOrderService.clearCart(),this.closeCart()}proceedToCheckout(){return V(this,null,function*(){if(this.cartItemsCount===0){console.warn("Cannot checkout with empty cart");return}try{console.log("Starting checkout process..."),this.isUpdatingBooking=!0,(yield this.updateBookingItems())?(console.log("Booking updated successfully, proceeding to checkout..."),this.closeCart(),this.router.navigate(["/mobile-verification"],{queryParams:{bookingId:this.bookingID,restaurantId:this.restaurantId,totalAmount:this.cartTotal}})):(console.error("Failed to update booking items"),alert("Failed to update your order. Please try again."))}catch(t){console.error("Checkout process failed:",t);let e="Failed to process your order. Please try again.";t instanceof Error&&(e=t.message),alert(e)}finally{this.isUpdatingBooking=!1}})}goBack(){this.router.navigate(["/restaurants"],{queryParams:{bookingId:this.bookingID,stopId:this.route.snapshot.queryParams.stopOverId}})}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(j),P(ot))};static \u0275cmp=S({type:r,selectors:[["app-menu"]],decls:31,vars:21,consts:[[1,"menu-container"],[1,"header"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"restaurant-info"],["class","restaurant-loading",4,"ngIf"],[4,"ngIf"],[1,"cart-btn",3,"click"],[1,"bi","bi-bag"],["class","cart-count",4,"ngIf"],["class","menu-loading",4,"ngIf"],["class","menu-error",4,"ngIf"],["class","menu-content",4,"ngIf"],["class","cart-summary",3,"loading","click",4,"ngIf"],["class","cart-loading",4,"ngIf"],[1,"proceed-checkout-btn",3,"click","disabled"],[1,"btn-content"],["class","bi bi-credit-card",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"cart-overlay",3,"click"],[1,"cart-sidebar"],[1,"cart-header"],[1,"bi","bi-bag-fill"],[1,"close-cart",3,"click"],[1,"bi","bi-x"],["class","cart-content",4,"ngIf"],["class","empty-cart",4,"ngIf"],[1,"restaurant-loading"],[1,"loading-placeholder"],[1,"loading-meta"],[1,"restaurant-meta"],[1,"delivery-time"],[1,"bi","bi-clock"],["class","rating",4,"ngIf"],["class","location",4,"ngIf"],[1,"rating"],[1,"bi","bi-star-fill"],[1,"location"],[1,"bi","bi-geo-alt"],[1,"cart-count"],[1,"menu-loading"],[1,"loading-card"],[1,"loading-spinner"],[1,"spinner"],[1,"menu-error"],[1,"error-card"],[1,"bi","bi-exclamation-triangle-fill"],[1,"error-actions"],[1,"btn-retry",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"btn-back",3,"click"],[1,"menu-content"],[1,"search-section"],[1,"search-box"],[1,"bi","bi-search"],["type","text","placeholder","Search menu items...",3,"ngModelChange","input","ngModel"],["class","clear-btn",3,"click",4,"ngIf"],["class","category-filters",4,"ngIf"],["class","results-info",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"menu-items"],["class","menu-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"clear-btn",3,"click"],[1,"category-filters"],["class","category-chip",3,"active","click",4,"ngFor","ngForOf"],[1,"category-chip",3,"click"],[1,"results-info"],[1,"item-count"],[1,"view-toggle"],[1,"toggle-btn",3,"click"],[1,"bi","bi-list"],[1,"bi","bi-grid-3x3-gap"],[1,"no-results"],[1,"clear-search-btn",3,"click"],[1,"menu-item",3,"click"],[1,"item-image"],["loading","lazy",3,"error","src","alt"],[1,"image-overlay"],["class","discount-badge",4,"ngIf"],[1,"prep-time"],[1,"item-content"],[1,"item-header"],[1,"item-title"],[1,"item-badges"],["class","badge veg",4,"ngIf"],["class","badge nonveg",4,"ngIf"],["class","badge spicy",4,"ngIf"],["class","badge promo",4,"ngIf"],[1,"item-price"],[1,"current-price"],["class","original-price",4,"ngIf"],[1,"item-description"],[1,"item-meta"],[1,"category"],[1,"item-actions"],["class","quantity-controls",4,"ngIf"],["class","add-btn",3,"click",4,"ngIf"],[1,"discount-badge"],[1,"badge","veg"],[1,"bi","bi-circle-fill"],[1,"badge","nonveg"],[1,"bi","bi-triangle-fill"],[1,"badge","spicy"],[1,"bi","bi-fire"],[1,"badge","promo"],[1,"original-price"],[1,"quantity-controls"],[1,"qty-btn",3,"click"],[1,"bi","bi-dash"],[1,"qty-display"],[1,"bi","bi-plus"],[1,"add-btn",3,"click"],[1,"cart-summary",3,"click"],[1,"cart-info"],[1,"cart-icon"],["class","bi bi-bag-fill",4,"ngIf"],["class","item-count",4,"ngIf"],[1,"cart-details"],["class","items-text",4,"ngIf"],[1,"total-amount"],[1,"checkout-btn"],["class","bi bi-arrow-right",4,"ngIf"],["class","mini-spinner",4,"ngIf"],[1,"items-text"],[1,"bi","bi-arrow-right"],[1,"mini-spinner"],[1,"cart-loading"],[1,"bi","bi-credit-card"],[1,"cart-content"],["class","restaurant-badge",4,"ngIf"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-summary-detailed"],[1,"summary-row"],[1,"summary-row","total"],[1,"cart-actions"],[1,"clear-cart-btn",3,"click"],[1,"bi","bi-trash"],[1,"proceed-checkout-btn",3,"click"],[1,"restaurant-badge"],[1,"bi","bi-shop"],[1,"cart-item"],[3,"error","src","alt"],[1,"item-details"],[1,"item-total"],[1,"item-controls"],[1,"quantity"],[1,"remove-item",3,"click"],[1,"empty-cart"],[1,"bi","bi-bag-x"],[1,"browse-menu-btn",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return n.goBack()}),d(3,"i",3),o(),i(4,"div",4),_(5,xs,3,0,"div",5)(6,ws,9,4,"div",6),o(),i(7,"button",7),g("click",function(){return n.openCart()}),d(8,"i",8),_(9,ks,2,1,"span",9),o()(),_(10,Is,8,1,"div",10)(11,Es,14,1,"div",11)(12,Gs,11,9,"div",12)(13,tc,16,14,"div",13)(14,nc,8,0,"div",14),i(15,"button",15),g("click",function(){return n.proceedToCheckout()}),i(16,"div",16),_(17,ic,1,0,"i",17)(18,oc,2,0,"div",18)(19,rc,2,0,"span",6)(20,ac,2,0,"span",6),o()(),i(21,"div",19),g("click",function(){return n.closeCart()}),o(),i(22,"div",20)(23,"div",21)(24,"h3"),d(25,"i",22),s(26," Your Order "),o(),i(27,"button",23),g("click",function(){return n.closeCart()}),d(28,"i",24),o()(),_(29,lc,32,6,"div",25)(30,dc,9,0,"div",26),o()()),e&2&&(a(5),l("ngIf",n.isLoading&&!n.selectedRestaurant.tenantName),a(),l("ngIf",n.selectedRestaurant.tenantName),a(),M("has-items",n.cartItemsCount>0),a(2),l("ngIf",n.cartItemsCount>0),a(),l("ngIf",n.isLoadingMenu),a(),l("ngIf",n.menuError&&!n.isLoadingMenu),a(),l("ngIf",!n.isLoadingMenu&&!n.menuError),a(),l("ngIf",n.cartItemsCount>0),a(),l("ngIf",n.isLoadingCart),a(),l("disabled",n.isUpdatingBooking||n.cartItemsCount===0),a(2),l("ngIf",!n.isUpdatingBooking),a(),l("ngIf",n.isUpdatingBooking),a(),l("ngIf",!n.isUpdatingBooking),a(),l("ngIf",n.isUpdatingBooking),a(),M("active",n.isCartOpen),a(),M("open",n.isCartOpen),a(7),l("ngIf",n.cartItems.length>0),a(),l("ngIf",n.cartItems.length===0))},dependencies:[k,N,L,z,$,U,K],styles:[".menu-container[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding-bottom:70px}.header[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.75rem 1rem;box-shadow:0 1px 8px #0000000f;display:flex;align-items:center;gap:.75rem;position:sticky;top:0;z-index:100;border-bottom:1px solid #f1f5f9;min-height:60px}.back-btn[_ngcontent-%COMP%], .cart-btn[_ngcontent-%COMP%]{background:#f8fafc;border:none;width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#64748b;flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover, .cart-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:scale(1.02)}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .cart-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.cart-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;position:relative}.cart-btn.has-items[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.cart-btn[_ngcontent-%COMP%]   .cart-count[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;font-size:.65rem;font-weight:700;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center}.restaurant-info[_ngcontent-%COMP%]{flex:1;min-width:0}.restaurant-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .15rem;font-size:1rem;font-weight:700;color:#1e293b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.restaurant-info[_ngcontent-%COMP%]   .restaurant-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#64748b}.restaurant-info[_ngcontent-%COMP%]   .restaurant-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.2rem}.restaurant-info[_ngcontent-%COMP%]   .restaurant-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;color:#3b82f6}.restaurant-info[_ngcontent-%COMP%]   .restaurant-meta[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b}.search-section[_ngcontent-%COMP%]{background:#f8fafc;padding:.75rem 1rem;border-bottom:1px solid #e2e8f0}.search-box[_ngcontent-%COMP%]{position:relative;max-width:100%}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#94a3b8;font-size:.85rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.65rem 2.5rem .65rem 2.25rem;border:1px solid #e2e8f0;border-radius:10px;font-size:.85rem;background:#fff;transition:all .2s ease}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f61a}.search-box[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:#e2e8f0;border:none;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.search-box[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background:#cbd5e1}.menu-content[_ngcontent-%COMP%]{padding:1rem;background:#f8fafc}.category-filters[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem;overflow-x:auto;padding-bottom:.5rem;scrollbar-width:none;-ms-overflow-style:none}.category-filters[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.category-chip[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:20px;padding:.4rem .8rem;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap;flex-shrink:0}.category-chip[_ngcontent-%COMP%]:hover, .category-chip.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#3b82f6}.results-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:0 .25rem}.results-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;font-weight:500}.results-info[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.results-info[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background:transparent;border:none;padding:.4rem .6rem;cursor:pointer;transition:all .2s ease;color:#64748b}.results-info[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.results-info[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.menu-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.menu-items.grid-view[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.menu-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 12px #0000000f;border:1px solid #f1f5f9;cursor:pointer;transition:all .3s ease;display:flex;gap:.75rem}.menu-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #3b82f61a;transform:translateY(-1px);border-color:#e2e8f0}.grid-view[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{flex-direction:column;gap:0}.item-image[_ngcontent-%COMP%]{position:relative;width:90px;height:90px;flex-shrink:0;border-radius:8px;overflow:hidden}.grid-view[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:160px;border-radius:0}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;top:.4rem;right:.4rem;left:.4rem;display:flex;justify-content:space-between;align-items:flex-start}.item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .discount-badge[_ngcontent-%COMP%], .item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .prep-time[_ngcontent-%COMP%]{padding:.2rem .4rem;border-radius:6px;font-size:.65rem;font-weight:600;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .discount-badge[_ngcontent-%COMP%]{background:#ef4444e6;color:#fff}.item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .prep-time[_ngcontent-%COMP%]{background:#000000b3;color:#fff;display:flex;align-items:center;gap:.2rem}.item-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .prep-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.item-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.item-content[_ngcontent-%COMP%]{flex:1;padding:.75rem;display:flex;flex-direction:column;gap:.5rem;min-height:90px}.grid-view[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{min-height:auto;padding:1rem}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.5rem}.item-title[_ngcontent-%COMP%]{flex:1}.item-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .3rem;font-size:.9rem;font-weight:600;color:#1e293b;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.item-title[_ngcontent-%COMP%]   .item-badges[_ngcontent-%COMP%]{display:flex;gap:.25rem;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.15rem;padding:.1rem .3rem;border-radius:6px;font-size:.6rem;font-weight:600}.badge.veg[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.badge.veg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#22c55e}.badge.nonveg[_ngcontent-%COMP%]{background:#fecaca;color:#991b1b}.badge.nonveg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.badge.spicy[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.badge.spicy[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f56565}.badge.promo[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.item-price[_ngcontent-%COMP%]{text-align:right;flex-shrink:0}.item-price[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1e293b}.item-price[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#94a3b8;text-decoration:line-through;margin-top:.1rem}.item-description[_ngcontent-%COMP%]{color:#64748b;font-size:.75rem;line-height:1.4;margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.item-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:auto}.item-meta[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8;font-weight:500}.item-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafc;border:1px solid #e2e8f0;border-radius:16px;padding:.2rem;gap:.3rem}.quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.1)}.quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.quantity-controls[_ngcontent-%COMP%]   .qty-display[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:.8rem;min-width:20px;text-align:center}.add-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.4rem .8rem;border-radius:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.3rem;font-size:.75rem}.add-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.02)}.add-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.no-results[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;background:#fff;border-radius:12px}.no-results[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#cbd5e1;margin-bottom:.75rem}.no-results[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;color:#1e293b;margin:0 0 .4rem}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1rem;font-size:.85rem}.no-results[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s ease;font-size:.85rem}.no-results[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]:hover{background:#2563eb}.cart-summary[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;padding:.75rem 1rem;display:flex;justify-content:space-between;align-items:center;cursor:pointer;box-shadow:0 -2px 12px #3b82f640;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);min-height:60px}.cart-summary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8)}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{background:#ffffff26;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:#ef4444;color:#fff;font-size:.6rem;font-weight:700;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .items-text[_ngcontent-%COMP%]{display:block;font-size:.75rem;opacity:.9}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:800}.cart-summary[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.cart-summary[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:.85rem}.cart-summary[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.cart-summary[_ngcontent-%COMP%]:hover   .checkout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(3px)}.cart-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:998;opacity:0;visibility:hidden;transition:all .3s ease}.cart-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.cart-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:0;width:400px;height:100vh;background:#fff;z-index:999;transform:translate(100%);transition:transform .3s cubic-bezier(.4,0,.2,1);box-shadow:-4px 0 20px #00000026;display:flex;flex-direction:column}.cart-sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.cart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border-bottom:1px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#f1f5f9);box-shadow:0 1px 3px #0000001a}.cart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:.5rem}.cart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.cart-header[_ngcontent-%COMP%]   .close-cart[_ngcontent-%COMP%]{background:none;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#64748b}.cart-header[_ngcontent-%COMP%]   .close-cart[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#1e293b}.cart-header[_ngcontent-%COMP%]   .close-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.cart-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.restaurant-badge[_ngcontent-%COMP%]{background:#eff6ff;border:1px solid #bfdbfe;margin:1rem;padding:.75rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;color:#1e40af;font-weight:600;font-size:.85rem}.restaurant-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.cart-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:.5rem 1rem 1rem}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.cart-item[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:.75rem;background:#fff;border-radius:12px;margin-bottom:.75rem;border:1px solid #e2e8f0;transition:all .3s ease}.cart-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a;border-color:#cbd5e1}.cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;flex-shrink:0}.cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#1e293b;margin:0 0 .25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;margin-bottom:.25rem}.cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#3b82f6}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafc;border:1px solid #e2e8f0;border-radius:20px;padding:.2rem}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.1)}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{padding:0 .6rem;font-weight:600;color:#1e293b;min-width:20px;text-align:center;font-size:.85rem}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .remove-item[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .remove-item[_ngcontent-%COMP%]:hover{background:#fecaca;transform:scale(1.1)}.cart-item[_ngcontent-%COMP%]   .item-controls[_ngcontent-%COMP%]   .remove-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.cart-summary-detailed[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:#f8fafc;border-top:1px solid #e2e8f0;border-bottom:1px solid #e2e8f0}.cart-summary-detailed[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem 0;font-size:.85rem;color:#64748b}.cart-summary-detailed[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f1f5f9}.cart-summary-detailed[_ngcontent-%COMP%]   .summary-row.total[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.75rem;border-top:2px solid #e2e8f0;border-bottom:none;font-size:1rem;font-weight:700;color:#1e293b}.cart-actions[_ngcontent-%COMP%]{padding:1.25rem;display:flex;gap:.75rem}.cart-actions[_ngcontent-%COMP%]   .clear-cart-btn[_ngcontent-%COMP%]{background:#f8fafc;color:#64748b;border:1px solid #e2e8f0;padding:.75rem 1rem;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;flex:1;justify-content:center;font-size:.85rem}.cart-actions[_ngcontent-%COMP%]   .clear-cart-btn[_ngcontent-%COMP%]:hover{background:#fee2e2;color:#dc2626;border-color:#fecaca}.cart-actions[_ngcontent-%COMP%]   .clear-cart-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.cart-actions[_ngcontent-%COMP%]   .proceed-checkout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;padding:.75rem 1rem;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;flex:2;justify-content:center;font-size:.85rem;box-shadow:0 2px 8px #3b82f640}.cart-actions[_ngcontent-%COMP%]   .proceed-checkout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f659}.cart-actions[_ngcontent-%COMP%]   .proceed-checkout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.empty-cart[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1.25rem;text-align:center}.empty-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:#cbd5e1;margin-bottom:1rem}.empty-cart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem;color:#1e293b;margin:0 0 .5rem;font-weight:600}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem;font-size:.9rem;line-height:1.4}.empty-cart[_ngcontent-%COMP%]   .browse-menu-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:10px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;font-size:.85rem}.empty-cart[_ngcontent-%COMP%]   .browse-menu-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.empty-cart[_ngcontent-%COMP%]   .browse-menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:.6rem .8rem;min-height:52px}.back-btn[_ngcontent-%COMP%], .cart-btn[_ngcontent-%COMP%]{width:32px;height:32px}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .cart-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.restaurant-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem}.restaurant-info[_ngcontent-%COMP%]   .restaurant-meta[_ngcontent-%COMP%]{font-size:.7rem}.search-section[_ngcontent-%COMP%]{padding:.6rem .8rem}.menu-content[_ngcontent-%COMP%]{padding:.8rem}.menu-items.grid-view[_ngcontent-%COMP%]{grid-template-columns:1fr}.item-image[_ngcontent-%COMP%]{width:80px;height:80px}.item-content[_ngcontent-%COMP%]{padding:.6rem;min-height:80px}.cart-summary[_ngcontent-%COMP%]{padding:.6rem .8rem;min-height:52px}.cart-summary[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{width:32px;height:32px}.cart-sidebar[_ngcontent-%COMP%]{width:100vw;right:0}.cart-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.cart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.restaurant-badge[_ngcontent-%COMP%]{margin:.75rem;padding:.6rem}.cart-items[_ngcontent-%COMP%]{padding:.5rem .75rem .75rem}.cart-item[_ngcontent-%COMP%]{padding:.6rem}.cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:50px;height:50px}.cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.85rem}.cart-summary-detailed[_ngcontent-%COMP%]{padding:.75rem 1rem}.cart-actions[_ngcontent-%COMP%]{padding:1rem;flex-direction:column}.cart-actions[_ngcontent-%COMP%]   .clear-cart-btn[_ngcontent-%COMP%], .cart-actions[_ngcontent-%COMP%]   .proceed-checkout-btn[_ngcontent-%COMP%]{flex:1}.empty-cart[_ngcontent-%COMP%]{padding:1.5rem 1rem}.empty-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.empty-cart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}}.menu-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:2rem}.menu-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 4px 20px #00000014;max-width:300px}.menu-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-bottom:1.5rem}.menu-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f1f5f9;border-top:4px solid #3b82f6;border-radius:50%;margin:0 auto;animation:_ngcontent-%COMP%_spin 1s linear infinite}.menu-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1e293b;margin:0 0 .5rem;font-weight:700}.menu-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:.9rem}.menu-error[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:2rem}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;text-align:center;box-shadow:0 4px 20px #00000014;border-left:4px solid #ef4444;max-width:400px}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1e293b;margin:0 0 .5rem;font-weight:700}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem;line-height:1.5}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;text-decoration:none}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#f8fafc;color:#64748b;border:1px solid #e2e8f0}.menu-error[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#475569}.restaurant-loading[_ngcontent-%COMP%]   .loading-placeholder[_ngcontent-%COMP%]{height:1.2rem;background:#e2e8f0;border-radius:4px;margin-bottom:.5rem;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.restaurant-loading[_ngcontent-%COMP%]   .loading-meta[_ngcontent-%COMP%]{height:.8rem;background:#f1f5f9;border-radius:4px;width:60%;animation:_ngcontent-%COMP%_pulse 1.5s infinite .5s}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.cart-summary.loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.mini-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.proceed-checkout-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.cart-loading[_ngcontent-%COMP%]{background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;padding:16px;text-align:center;margin-bottom:16px}.cart-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-bottom:12px}.cart-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid #e5e7eb;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}.cart-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#374151;margin:8px 0;font-size:16px;font-weight:600}.cart-loading[_ngcontent-%COMP%]   .loading-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:8px 0;font-size:14px}"]})};var mc=["otpInput"];function pc(r,t){r&1&&(i(0,"div",18)(1,"div",19),d(2,"div",20),o(),i(3,"h4"),s(4,"Loading booking details..."),o(),i(5,"p"),s(6,"Please wait"),o()())}function gc(r,t){if(r&1){let e=v();i(0,"div",21)(1,"div",22),d(2,"i",23),o(),i(3,"h4"),s(4,"Unable to load booking"),o(),i(5,"p"),s(6),o(),i(7,"button",24),g("click",function(){u(e);let c=p();return f(c.loadBookingDetails())}),d(8,"i",25),s(9," Try Again "),o()()}if(r&2){let e=p();a(6),h(e.bookingError)}}function uc(r,t){r&1&&(i(0,"span"),d(1,"i",43),s(2," Send OTP "),o())}function fc(r,t){r&1&&(i(0,"span"),d(1,"i",44),s(2," Sending OTP... "),o())}function _c(r,t){if(r&1){let e=v();i(0,"div",28)(1,"div",29)(2,"div",30),d(3,"i",31),o(),i(4,"div",32)(5,"h2"),s(6,"Enter Mobile Number"),o(),i(7,"p"),s(8,"We'll send you an OTP to verify your identity"),o()()(),i(9,"div",33)(10,"div",34)(11,"label"),s(12,"Mobile Number "),i(13,"span",35),s(14,"*"),o()(),i(15,"div",36)(16,"div",37),s(17,"+91"),o(),i(18,"input",38),T("ngModelChange",function(c){u(e);let m=p(2);return E(m.mobileNumber,c)||(m.mobileNumber=c),f(c)}),g("keypress",function(c){return u(e),f(c.charCode>=48&&c.charCode<=57||c.preventDefault())}),o()()(),i(19,"button",39),g("click",function(){u(e);let c=p(2);return f(c.sendOTP())}),_(20,uc,3,0,"span",40)(21,fc,3,0,"span",40),o(),i(22,"div",41),d(23,"i",42),i(24,"p"),s(25,"You'll receive a 4-digit verification code on this number"),o()()()()}if(r&2){let e=p(2);a(18),I("ngModel",e.mobileNumber),a(),l("disabled",!e.isValidMobile()||e.isLoading),a(),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading)}}function bc(r,t){r&1&&(i(0,"span"),d(1,"i",25),s(2," Resend Code "),o())}function Cc(r,t){if(r&1&&(i(0,"span"),s(1),o()),r&2){let e=p(3);a(),C("Resend in ",e.resendTimer,"s")}}function hc(r,t){r&1&&(i(0,"small",61),s(1," Name must be at least 2 characters "),o())}function vc(r,t){r&1&&(i(0,"small",76),s(1," Please enter a valid email address "),o())}function Mc(r,t){r&1&&(i(0,"div",77)(1,"div",78),d(2,"i",44),o(),i(3,"span"),s(4,"Detecting your location..."),o()())}function Oc(r,t){if(r&1&&(i(0,"small",85),s(1),o()),r&2){let e=p(4);a(),C(" ",e.passengerDetails.address," ")}}function Pc(r,t){if(r&1&&(i(0,"small",86),s(1),o()),r&2){let e=p(4);a(),q(" ",e.passengerDetails.latitude,", ",e.passengerDetails.longitude," ")}}function xc(r,t){if(r&1&&(i(0,"div",79),d(1,"i",80),i(2,"div",81)(3,"span",82),s(4,"Location captured"),o(),_(5,Oc,2,1,"small",83)(6,Pc,2,2,"small",84),o()()),r&2){let e=p(3);a(5),l("ngIf",e.passengerDetails.address),a(),l("ngIf",!e.passengerDetails.address)}}function yc(r,t){if(r&1){let e=v();i(0,"div",87),d(1,"i",23),i(2,"div",88)(3,"span"),s(4),o(),i(5,"button",89),g("click",function(){u(e);let c=p(3);return f(c.getCurrentLocation())}),d(6,"i",25),s(7," Retry "),o()()()}if(r&2){let e=p(3);a(4),h(e.locationError)}}function Sc(r,t){r&1&&(i(0,"span"),d(1,"i",80),s(2," Confirm Booking "),o())}function wc(r,t){r&1&&(i(0,"span"),d(1,"i",44),s(2," Verifying & Confirming... "),o())}function kc(r,t){if(r&1){let e=v();i(0,"div",28)(1,"div",29)(2,"div",30),d(3,"i",45),o(),i(4,"div",32)(5,"h2"),s(6,"Verify & Complete Details"),o(),i(7,"p"),s(8),o()()(),i(9,"div",33)(10,"div",46)(11,"label"),s(12,"Enter 4-Digit OTP "),i(13,"span",35),s(14,"*"),o()(),i(15,"div",47)(16,"input",48,0),g("keyup",function(c){u(e);let m=p(2);return f(m.onOtpKeyUp(c,1))})("keydown",function(c){u(e);let m=p(2);return f(m.onOtpKeyDown(c,1))})("paste",function(c){u(e);let m=p(2);return f(m.onOtpPaste(c,1))}),o(),i(18,"input",48,0),g("keyup",function(c){u(e);let m=p(2);return f(m.onOtpKeyUp(c,2))})("keydown",function(c){u(e);let m=p(2);return f(m.onOtpKeyDown(c,2))})("paste",function(c){u(e);let m=p(2);return f(m.onOtpPaste(c,2))}),o(),i(20,"input",48,0),g("keyup",function(c){u(e);let m=p(2);return f(m.onOtpKeyUp(c,3))})("keydown",function(c){u(e);let m=p(2);return f(m.onOtpKeyDown(c,3))})("paste",function(c){u(e);let m=p(2);return f(m.onOtpPaste(c,3))}),o(),i(22,"input",48,0),g("keyup",function(c){u(e);let m=p(2);return f(m.onOtpKeyUp(c,4))})("keydown",function(c){u(e);let m=p(2);return f(m.onOtpKeyDown(c,4))})("paste",function(c){u(e);let m=p(2);return f(m.onOtpPaste(c,4))}),o()(),i(24,"div",49)(25,"button",50),g("click",function(){u(e);let c=p(2);return f(c.changeMobile())}),d(26,"i",51),s(27," Change Number "),o(),i(28,"button",52),g("click",function(){u(e);let c=p(2);return f(c.resendOTP())}),_(29,bc,3,0,"span",40)(30,Cc,2,1,"span",40),o()()(),i(31,"div",53)(32,"span"),s(33,"Passenger Information"),o()(),i(34,"div",34)(35,"label"),s(36," Full Name "),i(37,"span",35),s(38,"*"),o()(),i(39,"div",54),d(40,"i",55),i(41,"input",56),T("ngModelChange",function(c){u(e);let m=p(2);return E(m.passengerDetails.name,c)||(m.passengerDetails.name=c),f(c)}),o()(),_(42,hc,2,0,"small",57),o(),i(43,"div",34)(44,"label"),s(45," Email Address "),i(46,"span",58),s(47,"(Optional)"),o()(),i(48,"div",54),d(49,"i",59),i(50,"input",60),T("ngModelChange",function(c){u(e);let m=p(2);return E(m.passengerDetails.email,c)||(m.passengerDetails.email=c),f(c)}),o()(),i(51,"small",61),s(52,"Booking confirmation will be sent here"),o(),_(53,vc,2,0,"small",62),o(),i(54,"div",34)(55,"label"),s(56," Additional Remarks "),i(57,"span",58),s(58,"(Optional)"),o()(),i(59,"div",63),d(60,"i",64),i(61,"textarea",65),T("ngModelChange",function(c){u(e);let m=p(2);return E(m.passengerDetails.remarks,c)||(m.passengerDetails.remarks=c),f(c)}),s(62,"                "),o()(),i(63,"small",61),s(64),o()(),i(65,"div",66)(66,"div",67),d(67,"i",68),i(68,"span"),s(69,"Pickup Location"),o()(),_(70,Mc,5,0,"div",69)(71,xc,7,2,"div",70)(72,yc,8,1,"div",71),o(),i(73,"div",72)(74,"button",73),g("click",function(){u(e);let c=p(2);return f(c.changeMobile())}),d(75,"i",4),s(76," Back "),o(),i(77,"button",74),g("click",function(){u(e);let c=p(2);return f(c.confirmBooking())}),_(78,Sc,3,0,"span",40)(79,wc,3,0,"span",40),o()(),i(80,"div",75),d(81,"i",45),i(82,"p"),s(83,"Your information is secure and will only be used for this booking"),o()()()()}if(r&2){let e=p(2);a(8),C("Code sent to +91 ",e.mobileNumber,""),a(8),l("value",e.otp1),a(2),l("value",e.otp2),a(2),l("value",e.otp3),a(2),l("value",e.otp4),a(6),l("disabled",e.resendTimer>0),a(),l("ngIf",e.resendTimer===0),a(),l("ngIf",e.resendTimer>0),a(11),I("ngModel",e.passengerDetails.name),a(),l("ngIf",e.passengerDetails.name.length<2&&e.passengerDetails.name.length>0),a(8),I("ngModel",e.passengerDetails.email),a(3),l("ngIf",e.passengerDetails.email&&!e.isValidEmail(e.passengerDetails.email)),a(8),I("ngModel",e.passengerDetails.remarks),a(3),C("",e.passengerDetails.remarks.length,"/500 characters"),a(6),l("ngIf",e.isGettingLocation),a(),l("ngIf",!e.isGettingLocation&&e.passengerDetails.latitude&&e.passengerDetails.longitude),a(),l("ngIf",!e.isGettingLocation&&e.locationError),a(5),l("disabled",!e.isOTPComplete()||!e.isDetailsValid()||e.isLoading),a(),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading)}}function Ic(r,t){if(r&1&&(i(0,"div",26),_(1,_c,26,4,"div",27)(2,kc,84,20,"div",27),o()),r&2){let e=p();a(),l("ngIf",e.currentStep==="mobile"),a(),l("ngIf",e.currentStep==="otp")}}function Ec(r,t){if(r&1&&(i(0,"div",124)(1,"div",125)(2,"span",126),s(3),o(),i(4,"span",127),s(5),o()(),i(6,"div",128)(7,"span",129),s(8),o(),i(9,"span",130),s(10),o()()()),r&2){let e=t.$implicit,n=p(3);a(3),h(e.ItemName),a(2),h(e.CategoryName),a(3),C("\xD7",e.Quantity,""),a(2),C(" \u20B9",n.formatCurrency((e.DiscountedPrice||e.Price)*e.Quantity)," ")}}function Tc(r,t){if(r&1&&(i(0,"div",122),_(1,Ec,11,4,"div",123),o()),r&2){let e=p(2);a(),l("ngForOf",e.bookingItems)}}function Lc(r,t){if(r&1){let e=v();i(0,"button",131),g("click",function(){u(e);let c=p(2);return f(c.togglePromoCodeInput())}),d(1,"i"),o()}if(r&2){let e=p(2);a(),R(e.showPromoCodeInput?"bi bi-dash":"bi bi-plus")}}function Ac(r,t){if(r&1){let e=v();i(0,"div",132)(1,"div",133),d(2,"i",80),i(3,"div",134)(4,"span",135),s(5),o(),i(6,"span",136),s(7),o()()(),i(8,"div",137)(9,"span",138),s(10,"You saved"),o(),i(11,"span",139),s(12),o()(),i(13,"button",140),g("click",function(){u(e);let c=p(2);return f(c.removePromoCode())}),d(14,"i",141),o()()}if(r&2){let e=p(2);a(5),h(e.promoCodeState.code),a(2),h(e.promoCodeState.promoTitle),a(5),C("\u20B9",e.formatCurrency(e.promoCodeState.discountAmount),"")}}function Rc(r,t){r&1&&(i(0,"span"),s(1,"Apply"),o())}function Nc(r,t){r&1&&d(0,"i",44)}function Dc(r,t){if(r&1&&(i(0,"div",149)(1,"small"),d(2,"i"),s(3),o()()),r&2){let e=p(3);a(),M("success",!e.promoCodeState.validationMessage.toLowerCase().includes("invalid"))("error",e.promoCodeState.validationMessage.toLowerCase().includes("invalid")),a(),R(e.promoCodeState.validationMessage.toLowerCase().includes("invalid")?"bi bi-x-circle":"bi bi-check-circle"),a(),C(" ",e.promoCodeState.validationMessage," ")}}function Fc(r,t){if(r&1){let e=v();i(0,"div",155),g("click",function(){let c=u(e).$implicit,m=p(5);return f(m.selectPromoCode(c))}),i(1,"div",156)(2,"span",157),s(3),o(),i(4,"span",158),s(5),o()(),i(6,"div",159)(7,"p",136),s(8),o(),i(9,"p",160),s(10),o(),i(11,"small",161),s(12),ne(13,"date"),o()()()}if(r&2){let e=t.$implicit;a(3),h(e.code),a(2),C(" ",e.discountType==="Percentage"?e.discountValue+"%":"\u20B9"+e.discountValue," OFF "),a(3),h(e.title),a(2),h(e.description),a(2),C("Valid until ",ae(13,5,e.validUntil,"dd MMM yyyy"),"")}}function Vc(r,t){if(r&1&&(i(0,"div",153),_(1,Fc,14,8,"div",154),o()),r&2){let e=p(4);a(),l("ngForOf",e.availablePromoCodes)}}function zc(r,t){if(r&1){let e=v();i(0,"div",150)(1,"button",151),g("click",function(){u(e);let c=p(3);return f(c.toggleAvailablePromoCodes())}),d(2,"i"),s(3),o(),_(4,Vc,2,1,"div",152),o()}if(r&2){let e=p(3);a(2),R(e.showAvailablePromoCodes?"bi bi-chevron-up":"bi bi-chevron-down"),a(),q(" ",e.showAvailablePromoCodes?"Hide":"View"," Available Codes (",e.availablePromoCodes.length,") "),a(),l("ngIf",e.showAvailablePromoCodes)}}function Bc(r,t){if(r&1){let e=v();i(0,"div",142)(1,"div",143)(2,"input",144),T("ngModelChange",function(c){u(e);let m=p(2);return E(m.promoCodeState.code,c)||(m.promoCodeState.code=c),f(c)}),g("input",function(){u(e);let c=p(2);return f(c.validatePromoCode())}),o(),i(3,"button",145),g("click",function(){u(e);let c=p(2);return f(c.applyPromoCode())}),_(4,Rc,2,0,"span",40)(5,Nc,1,0,"i",146),o()(),_(6,Dc,4,7,"div",147)(7,zc,5,5,"div",148),o()}if(r&2){let e=p(2);a(2),I("ngModel",e.promoCodeState.code),l("disabled",e.promoCodeState.isValidating),a(),l("disabled",e.promoCodeState.isValidating||!e.promoCodeState.code.trim()),a(),l("ngIf",!e.promoCodeState.isValidating),a(),l("ngIf",e.promoCodeState.isValidating),a(),l("ngIf",e.promoCodeState.validationMessage),a(),l("ngIf",e.availablePromoCodes.length>0)}}function jc(r,t){if(r&1&&(i(0,"div",115)(1,"span"),d(2,"i",162),s(3),o(),i(4,"span"),s(5),o()()),r&2){let e=p(2);a(3),C(" CGST (",e.taxSettings.cgstRate,"%) "),a(2),C("\u20B9",e.formatCurrency(e.cgstAmount),"")}}function $c(r,t){if(r&1&&(i(0,"div",115)(1,"span"),d(2,"i",163),s(3),o(),i(4,"span"),s(5),o()()),r&2){let e=p(2);a(3),C(" SGST (",e.taxSettings.sgstRate,"%) "),a(2),C("\u20B9",e.formatCurrency(e.sgstAmount),"")}}function Uc(r,t){r&1&&(i(0,"small",165),s(1,"FREE"),o())}function qc(r,t){if(r&1&&(i(0,"div",115)(1,"span"),s(2," Delivery Fee "),_(3,Uc,2,0,"small",164),o(),i(4,"span"),s(5),o()()),r&2){let e=p(2);a(3),l("ngIf",e.isFreeDelivery()),a(),M("strikethrough",e.isFreeDelivery()),a(),C(" \u20B9",e.formatCurrency(e.deliveryFee)," ")}}function Gc(r,t){if(r&1&&(i(0,"div",166)(1,"span"),d(2,"i",167),s(3),o(),i(4,"span",168),s(5),o()()),r&2){let e=p(2);a(3),C(" Promo Discount (",e.promoCodeState.code,") "),a(2),C("-\u20B9",e.formatCurrency(e.promoCodeState.discountAmount),"")}}function Hc(r,t){if(r&1&&(i(0,"div",169),d(1,"i",170),i(2,"span"),s(3),o()()),r&2){let e=p(2);a(3),C("You're saving \u20B9",e.formatCurrency(e.promoCodeState.discountAmount)," on this order!")}}function Wc(r,t){if(r&1&&(i(0,"div",90)(1,"div",91)(2,"h3"),s(3,"Order Summary"),o(),i(4,"div",5)(5,"span",92),d(6,"i",93),s(7),o()()(),i(8,"div",94)(9,"div",95),d(10,"i",96),i(11,"div",97)(12,"span",98),s(13),o(),d(14,"i",99),i(15,"span",98),s(16),o()()(),i(17,"div",100),d(18,"i",101),i(19,"span"),s(20),o()(),i(21,"div",102),d(22,"i",103),i(23,"span"),s(24),o()()(),i(25,"div",104)(26,"h4",105),d(27,"i",106),s(28," Items Ordered "),o(),_(29,Tc,2,1,"div",107),o(),i(30,"div",108)(31,"div",109)(32,"h4"),d(33,"i",110),s(34," Apply Promo Code "),o(),_(35,Lc,2,2,"button",111),o(),_(36,Ac,15,3,"div",112)(37,Bc,8,7,"div",113),o(),i(38,"div",114)(39,"h4",105),s(40,"Bill Details"),o(),i(41,"div",115)(42,"span"),s(43,"Item Total"),o(),i(44,"span"),s(45),o()(),_(46,jc,6,2,"div",116)(47,$c,6,2,"div",116)(48,qc,6,4,"div",116),d(49,"div",117),i(50,"div",118)(51,"span"),s(52,"Subtotal"),o(),i(53,"span"),s(54),o()(),_(55,Gc,6,2,"div",119),d(56,"div",117),i(57,"div",120)(58,"span")(59,"strong"),s(60,"Total to Pay"),o()(),i(61,"span")(62,"strong"),s(63),o()()(),_(64,Hc,4,1,"div",121),o()()),r&2){let e=p();a(7),C(" ",e.getSafeCount()," items "),a(6),h(e.bookingDetails.startLocation.name),a(3),h(e.bookingDetails.endLocation.name),a(4),q("",e.bookingDetails.departureDate," at ",e.bookingDetails.departureTime,""),a(4),q("",e.bookingDetails.busName," (",e.bookingDetails.busNumber,")"),a(5),l("ngIf",e.bookingItems&&e.bookingItems.length>0),a(6),l("ngIf",!e.promoCodeState.isApplied),a(),l("ngIf",e.promoCodeState.isApplied),a(),l("ngIf",e.showPromoCodeInput&&!e.promoCodeState.isApplied),a(8),C("\u20B9",e.formatCurrency(e.subtotal),""),a(),l("ngIf",e.taxSettings.taxEnabled&&e.cgstAmount>0),a(),l("ngIf",e.taxSettings.taxEnabled&&e.sgstAmount>0),a(),l("ngIf",e.deliveryFeeSettings.enabled),a(6),C("\u20B9",e.formatCurrency(e.originalTotalAmount),""),a(),l("ngIf",e.promoCodeState.isApplied&&e.promoCodeState.discountAmount>0),a(8),C("\u20B9",e.formatCurrency(e.getFinalTotal()),""),a(),l("ngIf",e.promoCodeState.isApplied&&e.promoCodeState.discountAmount>0)}}var Vt=class r{constructor(t,e,n){this.router=t;this.route=e;this.http=n}otpInputs;destroy$=new B;API_BASE_URL=D.apiBaseUrl;BOOKING_ENDPOINT="/search/booking";OTP_ENDPOINT="/auth";PROMOCODE_ENDPOINT="/promocode";currentStep="mobile";mobileNumber="";otp1="";otp2="";otp3="";otp4="";resendTimer=0;resendInterval;otpId="";passengerDetails={name:"",email:"",remarks:"",latitude:0,longitude:0,address:""};isGettingLocation=!1;locationError="";bookingId="";restaurantId=0;bookingDetails=null;bookingItems=[];cartItemsCount=0;itemsTotal=0;subtotal=0;cgstAmount=0;sgstAmount=0;totalTaxAmount=0;deliveryFee=0;totalAmount=0;originalTotalAmount=0;isLoading=!1;isLoadingBooking=!0;bookingError="";taxSettings={taxEnabled:!0,cgstRate:9,sgstRate:9};deliveryFeeSettings={enabled:!1,amount:0,freeDeliveryThreshold:500};promoCodeState={code:"",isApplied:!1,isValidating:!1,validationMessage:"",discountAmount:0,finalAmount:0,promoTitle:"",usageId:void 0};availablePromoCodes=[];showPromoCodeInput=!1;showAvailablePromoCodes=!1;isLoadingPromoCodes=!1;ngOnInit(){this.route.queryParams.pipe(w(this.destroy$)).subscribe(t=>{this.bookingId=t.bookingId||"",this.restaurantId=parseInt(t.restaurantId)||0,console.log("Mobile Verification - Booking ID:",this.bookingId,"Restaurant ID:",this.restaurantId),this.bookingId?this.loadBookingDetails():(this.bookingError="Booking ID not provided",this.isLoadingBooking=!1)}),this.getCurrentLocation()}ngAfterViewInit(){this.currentStep==="otp"&&setTimeout(()=>this.focusFirstInput(),100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resendInterval&&clearInterval(this.resendInterval)}getCurrentLocation(){if(this.isGettingLocation=!0,this.locationError="",!navigator.geolocation){this.locationError="Geolocation is not supported by your browser",this.isGettingLocation=!1;return}navigator.geolocation.getCurrentPosition(t=>{this.passengerDetails.latitude=t.coords.latitude,this.passengerDetails.longitude=t.coords.longitude,this.getAddressFromCoordinates(t.coords.latitude,t.coords.longitude),this.isGettingLocation=!1,console.log("Location captured:",t.coords)},t=>{this.locationError=this.getLocationErrorMessage(t),this.isGettingLocation=!1,console.warn("Location error:",t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}getAddressFromCoordinates(t,e){return V(this,null,function*(){try{let c=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&zoom=18&addressdetails=1`)).json();c&&c.display_name?(this.passengerDetails.address=c.display_name,console.log("Address resolved:",this.passengerDetails.address)):this.passengerDetails.address=`${t.toFixed(6)}, ${e.toFixed(6)}`}catch(n){console.error("Error fetching address:",n),this.passengerDetails.address=`${t.toFixed(6)}, ${e.toFixed(6)}`}})}getLocationErrorMessage(t){switch(t.code){case t.PERMISSION_DENIED:return"Location permission denied. Please enable location access.";case t.POSITION_UNAVAILABLE:return"Location information unavailable.";case t.TIMEOUT:return"Location request timed out.";default:return"An unknown error occurred while getting location."}}loadBookingDetails(){this.bookingId&&(this.isLoadingBooking=!0,this.bookingError="",this.http.get(`${this.API_BASE_URL}${this.BOOKING_ENDPOINT}/${this.bookingId}/details`).pipe(G(t=>(this.bookingError=this.getErrorMessage(t),ge({success:!1,message:"Failed to load booking details"}))),oe(()=>this.isLoadingBooking=!1)).subscribe(t=>{if(t.success&&t.data){if(this.bookingDetails=t.data,this.shouldRedirectToOrderStatus(t.data.bookingStatus)){this.redirectToOrderStatus();return}if(t.data.bookimgItems)try{this.bookingItems=JSON.parse(t.data.bookimgItems),Array.isArray(this.bookingItems)&&this.bookingItems.length>0?(this.calculateOrderSummary(),this.loadAvailablePromoCodes()):this.setDefaultValues()}catch(e){console.error("Error parsing booking items:",e),this.setDefaultValues()}else this.setDefaultValues()}else this.bookingError=t.message||"Failed to load booking details",this.setDefaultValues()}))}shouldRedirectToOrderStatus(t){return["confirmed","preparing","ready","completed","delivered","canceled","cancelled","rejected"].includes(t.toLowerCase())}redirectToOrderStatus(){this.bookingError="This order has already been confirmed. Redirecting...",setTimeout(()=>{this.router.navigate(["/order-status"],{queryParams:{bookingId:this.bookingId}})},1500)}setDefaultValues(){this.cartItemsCount=0,this.itemsTotal=0,this.subtotal=0,this.cgstAmount=0,this.sgstAmount=0,this.totalTaxAmount=0,this.deliveryFee=0,this.totalAmount=0,this.originalTotalAmount=0}calculateOrderSummary(){if(!this.bookingItems||!Array.isArray(this.bookingItems)){this.setDefaultValues();return}this.cartItemsCount=this.bookingItems.reduce((t,e)=>t+Number(e.Quantity),0),this.itemsTotal=this.bookingItems.reduce((t,e)=>{let n=Number(e.DiscountedPrice)||Number(e.Price)||0,c=Number(e.Quantity)||0;return t+n*c},0),this.subtotal=this.itemsTotal,this.calculateTaxes(),this.calculateDeliveryFee(),this.calculateTotal(),this.originalTotalAmount=this.totalAmount,console.log("Order Summary Calculated:",{subtotal:this.subtotal,cgst:this.cgstAmount,sgst:this.sgstAmount,tax:this.totalTaxAmount,delivery:this.deliveryFee,total:this.totalAmount})}calculateTaxes(){this.taxSettings.taxEnabled&&this.subtotal>0?(this.cgstAmount=Number((this.subtotal*this.taxSettings.cgstRate/100).toFixed(2)),this.sgstAmount=Number((this.subtotal*this.taxSettings.sgstRate/100).toFixed(2)),this.totalTaxAmount=this.cgstAmount+this.sgstAmount):(this.cgstAmount=0,this.sgstAmount=0,this.totalTaxAmount=0)}calculateDeliveryFee(){this.deliveryFeeSettings.enabled?this.deliveryFee=this.subtotal>=this.deliveryFeeSettings.freeDeliveryThreshold?0:this.deliveryFeeSettings.amount:this.deliveryFee=0}calculateTotal(){this.totalAmount=this.subtotal+this.totalTaxAmount+this.deliveryFee}isFreeDelivery(){return this.deliveryFeeSettings.enabled&&this.subtotal>=this.deliveryFeeSettings.freeDeliveryThreshold}loadAvailablePromoCodes(){if(!this.bookingDetails||!this.totalAmount)return;this.isLoadingPromoCodes=!0;let t=new pe().set("mobileNumber",this.mobileNumber||"TEMP_USER").set("orderAmount",this.originalTotalAmount.toString()).set("tenantId",this.restaurantId.toString()).set("routeId",this.bookingDetails.route?.routeId?.toString()||"0");this.http.get(`${this.API_BASE_URL}${this.PROMOCODE_ENDPOINT}/available`,{params:t}).pipe(G(()=>ge({success:!1,data:{promoCodes:[]}})),oe(()=>this.isLoadingPromoCodes=!1)).subscribe(e=>{e.success&&e.data&&(this.availablePromoCodes=e.data.promoCodes||[],console.log("Available promo codes:",this.availablePromoCodes.length))})}togglePromoCodeInput(){this.showPromoCodeInput=!this.showPromoCodeInput,this.showAvailablePromoCodes=!1}toggleAvailablePromoCodes(){this.showAvailablePromoCodes=!this.showAvailablePromoCodes}selectPromoCode(t){this.promoCodeState.code=t.code,this.showAvailablePromoCodes=!1,this.showPromoCodeInput=!0,this.validatePromoCode()}validatePromoCode(){if(!this.promoCodeState.code.trim()||!this.bookingDetails)return;this.promoCodeState.isValidating=!0,this.promoCodeState.validationMessage="";let t={promoCode:this.promoCodeState.code,bookingId:this.bookingId,mobileNumber:this.mobileNumber||"TEMP_USER",orderAmount:this.originalTotalAmount,tenantId:this.restaurantId,routeId:this.bookingDetails.route?.routeId};this.http.post(`${this.API_BASE_URL}${this.PROMOCODE_ENDPOINT}/validate`,t).pipe(G(e=>ge({success:!1,data:null,message:e?.error?.message||"Failed to validate promo code"})),oe(()=>this.promoCodeState.isValidating=!1)).subscribe(e=>{e.success&&e.data?(this.promoCodeState.validationMessage=e.message||"Promo code is valid!",this.promoCodeState.discountAmount=Number(e.data.discountAmount)||0,this.promoCodeState.finalAmount=Number(e.data.finalAmount)||this.originalTotalAmount,this.promoCodeState.promoTitle=e.data.promoCodeTitle||""):(this.promoCodeState.validationMessage=e.message||"Invalid promo code",this.promoCodeState.discountAmount=0,this.promoCodeState.finalAmount=this.originalTotalAmount,this.promoCodeState.promoTitle="")})}applyPromoCode(){if(!this.promoCodeState.code.trim()||!this.bookingDetails)return;this.isLoading=!0;let t={promoCode:this.promoCodeState.code,bookingId:this.bookingId,mobileNumber:this.mobileNumber||"TEMP_USER",orderAmount:this.originalTotalAmount,tenantId:this.restaurantId,routeId:this.bookingDetails.route?.routeId};this.http.post(`${this.API_BASE_URL}${this.PROMOCODE_ENDPOINT}/apply`,t).pipe(G(e=>ge({success:!1,message:e?.error?.message||"Failed to apply promo code",data:null})),oe(()=>this.isLoading=!1)).subscribe(e=>{e.success&&e.data?(this.promoCodeState.isApplied=!0,this.promoCodeState.discountAmount=Number(e.data.discountAmount)||0,this.promoCodeState.finalAmount=Number(e.data.finalAmount)||this.originalTotalAmount,this.promoCodeState.promoTitle=e.data.promoCodeTitle||"Discount Applied",this.promoCodeState.validationMessage=e.message||"Promo code applied successfully!",this.promoCodeState.usageId=e.data.usageId||e.data.id,this.totalAmount=this.promoCodeState.finalAmount,alert(`\u{1F389} Promo code applied! You saved \u20B9${this.formatCurrency(this.promoCodeState.discountAmount)}`),this.showPromoCodeInput=!1):alert(e.message||"Failed to apply promo code")})}removePromoCode(){this.promoCodeState={code:"",isApplied:!1,isValidating:!1,validationMessage:"",discountAmount:0,finalAmount:0,promoTitle:"",usageId:void 0},this.totalAmount=this.originalTotalAmount,this.showPromoCodeInput=!1}getFinalTotal(){return this.promoCodeState.isApplied?this.promoCodeState.finalAmount:this.totalAmount}isValidMobile(){return this.mobileNumber.length===10&&/^\d{10}$/.test(this.mobileNumber)}sendOTP(){return V(this,null,function*(){if(!(!this.isValidMobile()||this.isLoading)){this.isLoading=!0;try{console.log("Sending OTP to:",this.mobileNumber);let t=yield this.http.post(`${this.API_BASE_URL}${this.OTP_ENDPOINT}/send-otp`,{mobileNumber:this.mobileNumber,bookingId:this.bookingId}).toPromise();if(console.log("Send OTP response:",t),t?.success)this.otpId=t.otpId||"",t.passengerName&&(this.passengerDetails.name=t.passengerName,console.log("Pre-filled name:",t.passengerName)),t.passengerEmail&&(this.passengerDetails.email=t.passengerEmail,console.log("Pre-filled email:",t.passengerEmail)),this.currentStep="otp",this.clearOTP(),this.startResendTimer(),setTimeout(()=>this.focusFirstInput(),100),alert("OTP sent successfully! Check your messages.");else throw new Error(t?.message||"Failed to send OTP")}catch(t){console.error("Send OTP error:",t),alert(t?.error?.message||t?.message||"Error sending OTP. Please try again.")}finally{this.isLoading=!1}}})}confirmBooking(){return V(this,null,function*(){if(!this.isOTPComplete()){alert("Please enter the complete OTP");return}if(!this.isDetailsValid()){alert("Please fill in all required fields correctly");return}if(!this.isLoading){this.isLoading=!0;try{let t={mobileNumber:this.mobileNumber,otp:this.getFullOTP(),bookingId:this.bookingId,passengerName:this.passengerDetails.name.trim(),passengerEmail:this.passengerDetails.email.trim()||void 0,additionalRemarks:this.passengerDetails.remarks.trim()||void 0,pickupLatitude:this.passengerDetails.latitude||void 0,pickupLongitude:this.passengerDetails.longitude||void 0,pickupAddress:this.passengerDetails.address||void 0,subtotal:this.subtotal,cgst:this.cgstAmount,sgst:this.sgstAmount,taxAmount:this.totalTaxAmount,deliveryFee:this.deliveryFee,finalAmount:this.getFinalTotal(),tenantID:this.restaurantId};this.promoCodeState.isApplied&&this.promoCodeState.usageId&&(t.promoCodeUsageId=this.promoCodeState.usageId),console.log("Calling verify-otp API with:",t);let e=`${this.API_BASE_URL}${this.OTP_ENDPOINT}/verify-otp`,n=yield this.http.post(e,t).toPromise();if(console.log("Verify OTP response:",n),n?.success&&n.data)console.log("Booking confirmed successfully!"),this.router.navigate(["/order-confirmation"],{queryParams:{bookingId:this.bookingId,totalAmount:n.data.totalAmount||this.getFinalTotal(),originalAmount:n.data.originalAmount||this.originalTotalAmount,discountAmount:n.data.discountAmount||this.promoCodeState.discountAmount,promoCode:n.data.promoCodeApplied||this.promoCodeState.code,mobileNumber:this.mobileNumber}});else throw new Error(n?.message||"OTP verification failed")}catch(t){console.error("Error confirming booking:",t);let e=t?.error?.message||t?.message||"Error confirming booking. Please try again.";alert(e),e.toLowerCase().includes("otp")&&(this.clearOTP(),setTimeout(()=>this.focusFirstInput(),100))}finally{this.isLoading=!1}}})}isDetailsValid(){let t=this.passengerDetails.name.trim().length>=2&&this.passengerDetails.name.trim().length<=100,e=!this.passengerDetails.email.trim()||this.isValidEmail(this.passengerDetails.email);return t&&e}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}onOtpKeyUp(t,e){let n=t.target,c=n.value;if(!/^\d*$/.test(c)){n.value="",this.setOtpValue(e,"");return}if(c.length===1)this.setOtpValue(e,c),this.moveToNext(e);else if(c.length===0)this.setOtpValue(e,"");else{let m=c.slice(-1);n.value=m,this.setOtpValue(e,m),this.moveToNext(e)}}onOtpKeyDown(t,e){let n=t.target;t.key==="Backspace"?n.value===""?this.moveToPrevious(e):(n.value="",this.setOtpValue(e,"")):t.key==="ArrowLeft"?(t.preventDefault(),this.moveToPrevious(e)):t.key==="ArrowRight"?(t.preventDefault(),this.moveToNext(e)):!/\d/.test(t.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(t.key)&&t.preventDefault()}onOtpPaste(t,e){t.preventDefault();let c=(t.clipboardData?.getData("text")||"").replace(/\D/g,"").split("").slice(0,4);if(c.length>0){this.clearOTP(),c.forEach((b,x)=>{if(x<4){this.setOtpValue(x+1,b);let y=this.getInputElement(x+1);y&&(y.value=b)}});let m=Math.min(c.length+1,4);this.focusInput(m)}}setOtpValue(t,e){switch(t){case 1:this.otp1=e;break;case 2:this.otp2=e;break;case 3:this.otp3=e;break;case 4:this.otp4=e;break}}moveToNext(t){t<4&&this.focusInput(t+1)}moveToPrevious(t){t>1&&this.focusInput(t-1)}focusInput(t){let e=this.getInputElement(t);e&&(e.focus(),e.select())}focusFirstInput(){this.focusInput(1)}getInputElement(t){let e=this.otpInputs?.toArray();return e&&e[t-1]?.nativeElement||null}clearOTP(){this.otp1="",this.otp2="",this.otp3="",this.otp4="",this.otpInputs?.toArray().forEach(t=>{t.nativeElement.value=""})}getFullOTP(){return this.otp1+this.otp2+this.otp3+this.otp4}isOTPComplete(){return!!(this.otp1&&this.otp2&&this.otp3&&this.otp4&&this.otp1.length===1&&this.otp2.length===1&&this.otp3.length===1&&this.otp4.length===1)}changeMobile(){this.currentStep="mobile",this.clearOTP(),this.stopResendTimer(),this.passengerDetails={name:"",email:"",remarks:"",latitude:this.passengerDetails.latitude,longitude:this.passengerDetails.longitude,address:this.passengerDetails.address}}resendOTP(){return V(this,null,function*(){this.resendTimer===0&&!this.isLoading&&(yield this.sendOTP())})}startResendTimer(){this.resendTimer=30,this.resendInterval=setInterval(()=>{this.resendTimer--,this.resendTimer<=0&&this.stopResendTimer()},1e3)}stopResendTimer(){this.resendInterval&&(clearInterval(this.resendInterval),this.resendInterval=null),this.resendTimer=0}getErrorMessage(t){return t.status===404?"Booking not found":t.status===0?"Unable to connect to server. Please check your internet connection.":t.status>=500?"Server error occurred. Please try again later.":t.error?.message||t.message||"An error occurred"}formatCurrency(t){return isNaN(t)?"0.00":t.toFixed(2)}getSafeCount(){return isNaN(this.cartItemsCount)?0:this.cartItemsCount}goBack(){this.router.navigate(["/menu"],{queryParams:{restaurantId:this.restaurantId,bookingId:this.bookingId}})}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(j))};static \u0275cmp=S({type:r,selectors:[["app-mobile-verification"]],viewQuery:function(e,n){if(e&1&&Ne(mc,5),e&2){let c;De(c=Fe())&&(n.otpInputs=c)}},decls:30,vars:12,consts:[["otpInput",""],[1,"verification-container"],[1,"header","fixed-header"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"header-info"],[1,"page-title"],[1,"security-badge"],[1,"bi","bi-shield-fill-check"],[1,"progress-indicator"],[1,"step"],[1,"step-line"],[1,"content-wrapper"],[1,"main-section"],["class","booking-loading",4,"ngIf"],["class","booking-error",4,"ngIf"],["class","main-content",4,"ngIf"],["class","order-summary",4,"ngIf"],[1,"booking-loading"],[1,"loading-spinner"],[1,"spinner"],[1,"booking-error"],[1,"error-icon"],[1,"bi","bi-exclamation-triangle"],[1,"btn-retry",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"main-content"],["class","step-wrapper",4,"ngIf"],[1,"step-wrapper"],[1,"step-header"],[1,"step-icon"],[1,"bi","bi-phone"],[1,"step-text"],[1,"input-section"],[1,"form-field"],[1,"required"],[1,"mobile-input"],[1,"country-code"],["type","tel","placeholder","Enter 10-digit mobile number","maxlength","10",1,"mobile-field",3,"ngModelChange","keypress","ngModel"],[1,"action-btn",3,"click","disabled"],[4,"ngIf"],[1,"info-notice"],[1,"bi","bi-info-circle"],[1,"bi","bi-arrow-right-circle"],[1,"bi","bi-arrow-clockwise","spin"],[1,"bi","bi-shield-check"],[1,"form-field","otp-field"],[1,"otp-inputs"],["type","text","maxlength","1","autocomplete","off","inputmode","numeric",1,"otp-digit",3,"keyup","keydown","paste","value"],[1,"otp-actions"],[1,"link-btn",3,"click"],[1,"bi","bi-pencil"],[1,"link-btn",3,"click","disabled"],[1,"form-divider"],[1,"input-with-icon"],[1,"bi","bi-person"],["type","text","placeholder","Enter your full name","maxlength","100","required","",1,"text-input",3,"ngModelChange","ngModel"],["class","help-text",4,"ngIf"],[1,"optional"],[1,"bi","bi-envelope"],["type","email","placeholder","your@email.com","maxlength","100",1,"text-input",3,"ngModelChange","ngModel"],[1,"help-text"],["class","help-text error",4,"ngIf"],[1,"input-with-icon","textarea-wrapper"],[1,"bi","bi-chat-dots"],["placeholder","Any special requests, dietary requirements, or delivery instructions?","rows","3","maxlength","500",1,"text-input","textarea",3,"ngModelChange","ngModel"],[1,"location-section"],[1,"location-header"],[1,"bi","bi-geo-alt-fill"],["class","location-status",4,"ngIf"],["class","location-success",4,"ngIf"],["class","location-error",4,"ngIf"],[1,"button-group"],[1,"secondary-btn",3,"click"],[1,"action-btn","primary",3,"click","disabled"],[1,"security-notice"],[1,"help-text","error"],[1,"location-status"],[1,"location-spinner"],[1,"location-success"],[1,"bi","bi-check-circle-fill"],[1,"location-details"],[1,"location-label"],["class","location-address",4,"ngIf"],["class","location-coords",4,"ngIf"],[1,"location-address"],[1,"location-coords"],[1,"location-error"],[1,"error-details"],[1,"retry-location-btn",3,"click"],[1,"order-summary"],[1,"summary-header"],[1,"item-count"],[1,"bi","bi-bag"],[1,"booking-info"],[1,"route-info"],[1,"bi","bi-geo-alt"],[1,"route-details"],[1,"route-text"],[1,"bi","bi-arrow-right"],[1,"date-info"],[1,"bi","bi-calendar3"],[1,"bus-info"],[1,"bi","bi-bus-front"],[1,"order-items-wrapper"],[1,"section-title"],[1,"bi","bi-list-ul"],["class","order-items",4,"ngIf"],[1,"promo-code-section"],[1,"promo-code-header"],[1,"bi","bi-percent"],["class","promo-toggle-btn",3,"click",4,"ngIf"],["class","applied-promo",4,"ngIf"],["class","promo-input-section",4,"ngIf"],[1,"summary-breakdown"],[1,"breakdown-row"],["class","breakdown-row",4,"ngIf"],[1,"breakdown-divider"],[1,"breakdown-row","subtotal"],["class","breakdown-row discount",4,"ngIf"],[1,"breakdown-row","total"],["class","savings-badge",4,"ngIf"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"item-info"],[1,"item-name"],[1,"item-category"],[1,"item-pricing"],[1,"item-qty"],[1,"item-price"],[1,"promo-toggle-btn",3,"click"],[1,"applied-promo"],[1,"promo-badge"],[1,"promo-info"],[1,"promo-code"],[1,"promo-title"],[1,"promo-savings"],[1,"savings-label"],[1,"discount-amount"],["title","Remove promo code",1,"remove-promo-btn",3,"click"],[1,"bi","bi-x-circle"],[1,"promo-input-section"],[1,"promo-input-group"],["type","text","placeholder","Enter promo code",1,"promo-input",3,"ngModelChange","input","ngModel","disabled"],[1,"apply-promo-btn",3,"click","disabled"],["class","bi bi-arrow-clockwise spin",4,"ngIf"],["class","promo-validation",4,"ngIf"],["class","available-promos",4,"ngIf"],[1,"promo-validation"],[1,"available-promos"],[1,"show-available-btn",3,"click"],["class","promo-list",4,"ngIf"],[1,"promo-list"],["class","promo-card",3,"click",4,"ngFor","ngForOf"],[1,"promo-card",3,"click"],[1,"promo-card-header"],[1,"promo-code-badge"],[1,"promo-discount"],[1,"promo-card-body"],[1,"promo-description"],[1,"promo-validity"],["title","Central Goods and Services Tax",1,"bi","bi-info-circle"],["title","State Goods and Services Tax",1,"bi","bi-info-circle"],["class","free-tag",4,"ngIf"],[1,"free-tag"],[1,"breakdown-row","discount"],[1,"bi","bi-tag-fill"],[1,"discount-value"],[1,"savings-badge"],[1,"bi","bi-piggy-bank"]],template:function(e,n){e&1&&(i(0,"div",1)(1,"div",2)(2,"button",3),g("click",function(){return n.goBack()}),d(3,"i",4),o(),i(4,"div",5)(5,"div",6)(6,"h1"),s(7,"Mobile Verification"),o(),i(8,"div",7),d(9,"i",8),i(10,"span"),s(11,"Secure Checkout"),o()()()(),i(12,"div",9)(13,"div",10)(14,"span"),s(15,"1"),o(),i(16,"small"),s(17,"Mobile"),o()(),d(18,"div",11),i(19,"div",10)(20,"span"),s(21,"2"),o(),i(22,"small"),s(23,"Verify & Details"),o()()()(),i(24,"div",12)(25,"div",13),_(26,pc,7,0,"div",14)(27,gc,10,1,"div",15)(28,Ic,3,2,"div",16),o(),_(29,Wc,65,19,"div",17),o()()),e&2&&(a(13),M("active",n.currentStep==="mobile")("completed",n.currentStep==="otp"),a(5),M("completed",n.currentStep==="otp"),a(),M("active",n.currentStep==="otp"),a(7),l("ngIf",n.isLoadingBooking),a(),l("ngIf",n.bookingError&&!n.isLoadingBooking),a(),l("ngIf",!n.isLoadingBooking&&!n.bookingError),a(),l("ngIf",n.bookingDetails&&!n.isLoadingBooking))},dependencies:[k,N,L,fe,z,$,U,He,ze,K],styles:['.verification-container[_ngcontent-%COMP%]{min-height:100vh;background:#fff;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.verification-container[_ngcontent-%COMP%]   .fixed-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;background:#fff;border-bottom:1px solid #e5e7eb;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 1px 3px #0000000d}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;min-height:64px;max-width:1200px;margin:0 auto}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:16px 32px;min-height:72px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:8px;color:#475569;font-size:18px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:40px;height:40px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:44px;height:44px;font-size:20px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translate(-1px)}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;margin-left:16px}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1e293b;line-height:1.2}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .security-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#059669;font-size:12px;margin-top:2px;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .security-badge[_ngcontent-%COMP%]{font-size:13px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .security-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .security-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 767px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]{display:none}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;transition:all .2s ease}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;background:#f1f5f9;color:#64748b;transition:all .2s ease}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:36px;height:36px;font-size:16px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#94a3b8;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 2px 8px #3b82f64d}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#3b82f6}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step.completed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#10b981;color:#fff}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step.completed[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#10b981}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{width:40px;height:2px;background:#e2e8f0;transition:all .2s ease}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{width:50px}}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .progress-indicator[_ngcontent-%COMP%]   .step-line.completed[_ngcontent-%COMP%]{background:#10b981}.verification-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding:76px 20px 20px;max-width:1200px;margin:0 auto;display:grid;gap:20px;grid-template-columns:1fr}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-top:100px;grid-template-columns:1.5fr 1fr;gap:32px;padding-left:32px;padding-right:32px}}@media (min-width: 1024px){.verification-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-top:120px;grid-template-columns:2fr 1fr;gap:48px;padding-left:40px;padding-right:40px}}@media (min-width: 1200px){.verification-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-top:140px;gap:56px;padding-left:48px;padding-right:48px}}.verification-container[_ngcontent-%COMP%]   .main-section[_ngcontent-%COMP%]{grid-column:1}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{grid-column:2;background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:16px;box-shadow:0 1px 3px #0000000d}@media (max-width: 767px){.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{grid-column:1;grid-row:2}}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{position:sticky;top:116px;height:fit-content;max-height:calc(100vh - 136px);overflow-y:auto;padding:20px;border-radius:16px;box-shadow:0 4px 6px #0000000d}}@media (min-width: 1024px){.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{top:136px;max-height:calc(100vh - 156px)}}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:24px 16px;text-align:center;margin-bottom:16px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]{padding:32px 24px;margin-bottom:24px;border-radius:16px}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid #e2e8f0;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 12px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:28px;height:28px;border-width:3px}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#ef4444;font-size:24px;margin-bottom:8px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:28px;margin-bottom:12px}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#374151;margin:8px 0;font-size:16px;font-weight:600}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:12px 0}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:8px 0;font-size:14px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:8px 16px;border-radius:8px;font-size:14px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;transition:background .2s ease}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{padding:10px 18px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .booking-loading[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .verification-container[_ngcontent-%COMP%]   .booking-error[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:#2563eb}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 1px 3px #0000000d}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{padding:32px;margin-bottom:0;border-radius:16px;box-shadow:0 4px 6px #0000000d}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{gap:16px;margin-bottom:28px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;color:#1e293b;font-size:18px;font-weight:600}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:6px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b;font-size:14px;line-height:1.5}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:20px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:24px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field.otp-field[_ngcontent-%COMP%]{margin-bottom:24px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field.otp-field[_ngcontent-%COMP%]{margin-bottom:28px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#374151}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:15px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;margin-left:2px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .optional[_ngcontent-%COMP%]{color:#94a3b8;font-weight:400;font-size:13px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;color:#94a3b8;font-size:16px;pointer-events:none}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:14px;font-size:17px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{padding-left:40px!important}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{padding-left:44px!important}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon.textarea-wrapper[_ngcontent-%COMP%]{align-items:flex-start}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-with-icon.textarea-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:14px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:8px;padding:12px;font-size:14px;color:#1e293b;background:#fff;transition:all .2s ease;outline:none;font-family:inherit}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{padding:14px;font-size:15px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .text-input.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;line-height:1.5}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:block;margin-top:6px;font-size:12px;color:#64748b}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:13px;margin-top:7px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .help-text.error[_ngcontent-%COMP%]{color:#ef4444}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-divider[_ngcontent-%COMP%]{position:relative;text-align:center;margin:24px 0}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-divider[_ngcontent-%COMP%]{margin:28px 0}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-divider[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;width:100%;height:1px;background:#e2e8f0}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:0 12px;background:#fff;color:#64748b;font-size:13px;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;padding:0 16px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .info-notice[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:12px;margin-top:16px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .info-notice[_ngcontent-%COMP%]{padding:14px;margin-top:20px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .info-notice[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:16px;flex-shrink:0;margin-top:2px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .info-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#1e40af;line-height:1.5}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .info-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]{display:flex;border:1px solid #d1d5db;border-radius:8px;overflow:hidden;margin-bottom:16px;transition:all .2s ease}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:10px;max-width:400px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]:focus-within{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]{background:#f8fafc;padding:12px;font-weight:500;color:#475569;border-right:1px solid #d1d5db;font-size:14px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]{padding:14px;font-size:15px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]   .mobile-field[_ngcontent-%COMP%]{flex:1;border:none;padding:12px;font-size:16px;background:transparent;outline:none;color:#1e293b}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]   .mobile-field[_ngcontent-%COMP%]{padding:14px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .mobile-input[_ngcontent-%COMP%]   .mobile-field[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-start;margin-bottom:16px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]{gap:10px;margin-bottom:20px}}@media (max-width: 480px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]{justify-content:center}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]   .otp-digit[_ngcontent-%COMP%]{width:48px;height:48px;border:2px solid #d1d5db;border-radius:8px;text-align:center;font-size:18px;font-weight:600;background:#f8fafc;transition:all .2s ease;outline:none;color:#1e293b}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]   .otp-digit[_ngcontent-%COMP%]{width:52px;height:52px;font-size:20px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]   .otp-digit[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:8px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]{margin-bottom:24px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#3b82f6;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:4px;padding:6px 8px;border-radius:6px;transition:all .2s ease;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]{padding:7px 10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#eff6ff}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]:disabled{color:#94a3b8;cursor:not-allowed}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .otp-actions[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:14px;margin-bottom:20px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:24px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px;color:#475569;font-size:14px;font-weight:600}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]{font-size:15px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:16px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#64748b;font-size:13px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-status[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-status[_ngcontent-%COMP%]   .location-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:16px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981;font-size:18px;flex-shrink:0;margin-top:2px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#059669}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-label[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-address[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-coords[_ngcontent-%COMP%]{font-size:12px;color:#64748b;line-height:1.4}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-address[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-success[_ngcontent-%COMP%]   .location-details[_ngcontent-%COMP%]   .location-coords[_ngcontent-%COMP%]{font-size:13px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444;font-size:18px;flex-shrink:0;margin-top:2px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#dc2626;line-height:1.4}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]   .retry-location-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:13px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;transition:background .2s ease;align-self:flex-start;font-weight:500}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]   .retry-location-btn[_ngcontent-%COMP%]:hover{background:#dc2626}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .location-error[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]   .retry-location-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#fff}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{margin-top:28px}}@media (max-width: 480px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:12px 20px;border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]{padding:14px 24px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#cbd5e1}@media (max-width: 480px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]{width:100%}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;background:#3b82f6;color:#fff;border:none;padding:12px 20px;border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:14px 24px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 480px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;background:#3b82f6;color:#fff;border:none;padding:12px;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{max-width:400px;padding:14px;font-size:15px;border-radius:10px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;box-shadow:0 4px 12px #3b82f64d}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .security-notice[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:16px;padding:12px;background:#f0fdf4;border:1px solid #bbf7d0;border-radius:8px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .security-notice[_ngcontent-%COMP%]{margin-top:20px}}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .security-notice[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#059669;font-size:16px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .security-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#166534;line-height:1.4}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .step-wrapper[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .security-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #f1f5f9}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:16px}}.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1e293b;font-size:16px;font-weight:600}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px}}.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{text-align:right}.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#64748b;font-size:12px;background:#f1f5f9;padding:4px 8px;border-radius:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:13px;padding:5px 10px}}.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #f8fafc}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:12px;margin-bottom:8px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;width:14px;font-size:12px;flex-shrink:0}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:15px;font-size:13px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .route-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .route-details[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{font-weight:500;color:#1e293b}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .route-details[_ngcontent-%COMP%]   i.bi-arrow-right[_ngcontent-%COMP%]{color:#3b82f6;font-size:10px}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .bus-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:12px;margin-bottom:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .bus-info[_ngcontent-%COMP%]{font-size:13px;margin-bottom:8px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .bus-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;width:14px;font-size:11px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .bus-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:15px;font-size:12px}}.verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]:last-child, .verification-container[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]   .bus-info[_ngcontent-%COMP%]:last-child{margin-bottom:0}.verification-container[_ngcontent-%COMP%]   .order-items-wrapper[_ngcontent-%COMP%]{margin-bottom:16px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items-wrapper[_ngcontent-%COMP%]{margin-bottom:20px}}.verification-container[_ngcontent-%COMP%]   .order-items-wrapper[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;color:#1e293b;display:flex;align-items:center;gap:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items-wrapper[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:14px}}.verification-container[_ngcontent-%COMP%]   .order-items-wrapper[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:13px}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;padding-right:4px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]{max-height:250px}}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:10px 0;border-bottom:1px solid #f8fafc}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]{padding:12px 0}}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;font-weight:500;line-height:1.3}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-category[_ngcontent-%COMP%]{font-size:11px;color:#94a3b8}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-category[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-shrink:0}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{font-size:11px;color:#64748b;background:#f1f5f9;padding:3px 7px;border-radius:4px;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#059669}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]{margin-bottom:16px;padding:14px 0;border-top:1px solid #f1f5f9;border-bottom:1px solid #f1f5f9}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px 0}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#1e293b;display:flex;align-items:center;gap:6px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:13px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   .promo-toggle-btn[_ngcontent-%COMP%]{background:none;border:1px solid #3b82f6;color:#3b82f6;padding:4px 8px;border-radius:6px;font-size:16px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:28px;height:28px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   .promo-toggle-btn[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-code-header[_ngcontent-%COMP%]   .promo-toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#f0fdf4;border:1px solid #86efac;border-radius:8px;padding:12px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]{padding:14px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981;font-size:18px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   .promo-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   .promo-info[_ngcontent-%COMP%]   .promo-code[_ngcontent-%COMP%]{font-weight:700;color:#15803d;font-size:14px;text-transform:uppercase}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   .promo-info[_ngcontent-%COMP%]   .promo-code[_ngcontent-%COMP%]{font-size:15px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   .promo-info[_ngcontent-%COMP%]   .promo-title[_ngcontent-%COMP%]{font-size:11px;color:#166534}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-badge[_ngcontent-%COMP%]   .promo-info[_ngcontent-%COMP%]   .promo-title[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-savings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:2px;margin-right:8px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-savings[_ngcontent-%COMP%]   .savings-label[_ngcontent-%COMP%]{font-size:10px;color:#166534;text-transform:uppercase}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-savings[_ngcontent-%COMP%]   .savings-label[_ngcontent-%COMP%]{font-size:11px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-savings[_ngcontent-%COMP%]   .discount-amount[_ngcontent-%COMP%]{font-weight:700;color:#15803d;font-size:14px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .promo-savings[_ngcontent-%COMP%]   .discount-amount[_ngcontent-%COMP%]{font-size:15px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .remove-promo-btn[_ngcontent-%COMP%]{background:none;border:none;color:#dc2626;cursor:pointer;padding:4px;border-radius:4px;transition:background .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .remove-promo-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .applied-promo[_ngcontent-%COMP%]   .remove-promo-btn[_ngcontent-%COMP%]:hover{background:#fee2e2}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]{margin-top:12px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .promo-input[_ngcontent-%COMP%]{flex:1;border:1px solid #d1d5db;border-radius:6px;padding:8px 10px;font-size:13px;outline:none;transition:border-color .2s ease;text-transform:uppercase}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .promo-input[_ngcontent-%COMP%]{font-size:14px;padding:9px 12px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .promo-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .promo-input[_ngcontent-%COMP%]:disabled{background:#f9fafb;cursor:not-allowed}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .promo-input[_ngcontent-%COMP%]::placeholder{text-transform:none}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .apply-promo-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:8px 14px;border-radius:6px;font-size:13px;cursor:pointer;transition:background .2s ease;min-width:70px;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .apply-promo-btn[_ngcontent-%COMP%]{font-size:14px;padding:9px 16px;min-width:75px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .apply-promo-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .apply-promo-btn[_ngcontent-%COMP%]:disabled{background:#94a3b8;cursor:not-allowed}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-input-group[_ngcontent-%COMP%]   .apply-promo-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]{padding:6px 0}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center;gap:4px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small.success[_ngcontent-%COMP%]{color:#059669}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .promo-validation[_ngcontent-%COMP%]   small.error[_ngcontent-%COMP%]{color:#dc2626}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]{margin-top:12px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .show-available-btn[_ngcontent-%COMP%]{width:100%;background:#f8fafc;border:1px solid #e2e8f0;color:#475569;padding:8px 12px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .show-available-btn[_ngcontent-%COMP%]{font-size:13px;padding:9px 14px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .show-available-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .show-available-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]{margin-top:12px;max-height:300px;overflow-y:auto;padding-right:4px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:12px;margin-bottom:10px;cursor:pointer;transition:all .2s ease;background:#fff}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#f8fafc;box-shadow:0 2px 8px #3b82f61a}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-header[_ngcontent-%COMP%]   .promo-code-badge[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:700;text-transform:uppercase}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-header[_ngcontent-%COMP%]   .promo-code-badge[_ngcontent-%COMP%]{font-size:12px;padding:5px 10px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-header[_ngcontent-%COMP%]   .promo-discount[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:700}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-header[_ngcontent-%COMP%]   .promo-discount[_ngcontent-%COMP%]{font-size:12px;padding:5px 10px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;font-weight:600;color:#1e293b;line-height:1.3}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-title[_ngcontent-%COMP%]{font-size:14px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-description[_ngcontent-%COMP%]{margin:0 0 6px;font-size:11px;color:#64748b;line-height:1.4}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-description[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-validity[_ngcontent-%COMP%]{font-size:10px;color:#94a3b8}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .promo-code-section[_ngcontent-%COMP%]   .promo-input-section[_ngcontent-%COMP%]   .available-promos[_ngcontent-%COMP%]   .promo-list[_ngcontent-%COMP%]   .promo-card[_ngcontent-%COMP%]   .promo-card-body[_ngcontent-%COMP%]   .promo-validity[_ngcontent-%COMP%]{font-size:11px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]{border-top:1px solid #f1f5f9;padding-top:12px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]{padding-top:16px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;color:#1e293b}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:14px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 0;font-size:13px;color:#64748b}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]{padding:7px 0;font-size:14px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px;font-size:11px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   .free-tag[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:600;margin-left:6px;text-transform:uppercase}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   .free-tag[_ngcontent-%COMP%]{font-size:11px;padding:3px 7px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   .strikethrough[_ngcontent-%COMP%]{text-decoration:line-through;color:#9ca3af}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.subtotal[_ngcontent-%COMP%]{border-top:1px solid #f1f5f9;padding-top:10px;margin-top:6px;font-weight:500;color:#475569}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.subtotal[_ngcontent-%COMP%]{padding-top:12px;margin-top:8px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]{background:#f0fdf4;padding:8px 10px;border-radius:6px;margin:6px 0;color:#059669;font-weight:500}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]{padding:10px 12px;margin:8px 0}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]   .discount-value[_ngcontent-%COMP%]{font-weight:700}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]{border-top:2px solid #e2e8f0;padding-top:10px;margin-top:8px;font-weight:700;color:#1e293b;font-size:15px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]{padding-top:12px;margin-top:10px;font-size:16px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#059669;font-size:16px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:17px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-divider[_ngcontent-%COMP%]{height:1px;background:#f1f5f9;margin:8px 0}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .breakdown-divider[_ngcontent-%COMP%]{margin:10px 0}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .savings-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#fef3c7;border:1px solid #fde047;border-radius:8px;padding:10px 12px;margin-top:12px}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .savings-badge[_ngcontent-%COMP%]{padding:12px 14px}}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .savings-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ca8a04;font-size:16px}.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .savings-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#854d0e;font-weight:500;line-height:1.4}@media (min-width: 768px){.verification-container[_ngcontent-%COMP%]   .summary-breakdown[_ngcontent-%COMP%]   .savings-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 480px){.verification-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding:76px 12px 16px}.verification-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:10px 12px;min-height:60px}.verification-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{padding:16px;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{padding:14px;border-radius:10px}.verification-container[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:14px}.verification-container[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}}']})};function Yc(r,t){r&1&&(i(0,"div",3)(1,"div",4),d(2,"div",5),i(3,"p"),s(4,"Loading order details..."),o()()())}function Qc(r,t){if(r&1){let e=v();i(0,"div",3)(1,"div",6),d(2,"i",7),i(3,"h3"),s(4,"Unable to load order"),o(),i(5,"p"),s(6),o(),i(7,"button",8),g("click",function(){u(e);let c=p();return f(c.retryLoad())}),d(8,"i",9),s(9," Retry "),o()()()}if(r&2){let e=p();a(6),h(e.loadError)}}function Kc(r,t){if(r&1&&(i(0,"div",48)(1,"span",49),s(2),o(),i(3,"span",50),s(4),o()()),r&2){let e=t.$implicit,n=p(2);a(2),h(e.ItemName),a(2),q("\xD7",e.Quantity," \u2022 \u20B9",n.formatCurrency(n.getItemTotal(e)),"")}}function Jc(r,t){if(r&1&&(i(0,"div",35)(1,"span"),s(2,"CGST (9%)"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.cgst),"")}}function Zc(r,t){if(r&1&&(i(0,"div",35)(1,"span"),s(2,"SGST (9%)"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.sgst),"")}}function Xc(r,t){if(r&1&&(i(0,"div",35)(1,"span"),s(2,"Delivery Fee"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.deliveryFee),"")}}function el(r,t){if(r&1&&(i(0,"div",51)(1,"span"),d(2,"i",52),s(3),o(),i(4,"span"),s(5),o()()),r&2){let e=p(2);a(3),C(" ",e.promoCode,""),a(2),C("-\u20B9",e.formatCurrency(e.discountAmount),"")}}function tl(r,t){if(r&1&&(i(0,"div",3)(1,"div",10)(2,"div",11)(3,"div",12),d(4,"i",13),o()(),i(5,"div",14)(6,"h1"),s(7,"Order Confirmed!"),o(),i(8,"p"),s(9,"Your delicious meal is being prepared"),o()()(),i(10,"div",15)(11,"div",16)(12,"div",17)(13,"div",18),d(14,"i",19),i(15,"div")(16,"span",20),s(17,"Order ID"),o(),i(18,"span",21),s(19),o()()(),i(20,"div",22),d(21,"i",23),i(22,"span"),s(23),o()()()(),i(24,"div",24)(25,"div",25),d(26,"img",26),i(27,"div",27)(28,"h3"),s(29),o(),i(30,"p"),s(31),o()()()(),i(32,"div",28)(33,"div",29)(34,"h4"),d(35,"i",30),s(36," Your Order"),o(),i(37,"span",31),s(38),o()(),i(39,"div",32),_(40,Kc,5,3,"div",33),o(),i(41,"div",34)(42,"div",35)(43,"span"),s(44,"Subtotal"),o(),i(45,"span"),s(46),o()(),_(47,Jc,5,1,"div",36)(48,Zc,5,1,"div",36)(49,Xc,5,1,"div",36)(50,el,6,2,"div",37),i(51,"div",38)(52,"span"),s(53,"Total Amount"),o(),i(54,"span",39),s(55),o()()()(),i(56,"div",40)(57,"h4"),d(58,"i",41),s(59," Pickup Info"),o(),i(60,"div",42)(61,"div",43),d(62,"i",44),i(63,"span"),s(64,"Ready by "),i(65,"strong"),s(66),o()()(),i(67,"div",43),d(68,"i",45),i(69,"span"),s(70,"Contact: "),i(71,"strong"),s(72),o()()(),i(73,"div",43),d(74,"i",46),i(75,"span"),s(76,"Pickup at bus counter"),o()(),i(77,"div",43),d(78,"i",47),i(79,"span")(80,"strong"),s(81),o()()()()()()()),r&2){let e=p();a(19),C("#",e.orderId,""),a(4),h(e.arrivalTime),a(6),q("",e.busName," (",e.busNumber,")"),a(2),q("",e.startLocation," \u2192 ",e.endLocation,""),a(7),C("",e.orderItems.length," items"),a(2),l("ngForOf",e.orderItems),a(6),C("\u20B9",e.formatCurrency(e.subtotal),""),a(),l("ngIf",e.hasTax()),a(),l("ngIf",e.hasTax()),a(),l("ngIf",e.hasDeliveryFee()),a(),l("ngIf",e.hasDiscount()),a(5),C("\u20B9",e.formatCurrency(e.totalAmount),""),a(11),h(e.readyTime),a(6),h(e.mobileNumber),a(9),h(e.formatDate(e.departureDate))}}function nl(r,t){if(r&1){let e=v();i(0,"div",53)(1,"button",54),g("click",function(){u(e);let c=p();return f(c.trackOrder())}),d(2,"i",55),i(3,"span"),s(4,"Track Order"),o()()()}}var zt=class r{constructor(t,e,n){this.router=t;this.route=e;this.http=n}API_BASE_URL=D.apiBaseUrl;bookingId="";orderId="";busNumber="";busName="";startLocation="";endLocation="";departureDate="";departureTime="";arrivalTime="";readyTime="";mobileNumber="";bookingStatus="";orderItems=[];subtotal=0;cgst=0;sgst=0;taxAmount=0;deliveryFee=0;itemsTotal=0;originalAmount=0;discountAmount=0;totalAmount=0;promoCode="";isLoading=!0;loadError="";routeName="";estimatedTime="";ngOnInit(){this.route.queryParams.subscribe(t=>{this.bookingId=t.bookingId||"",this.totalAmount=parseFloat(t.totalAmount)||0,this.originalAmount=parseFloat(t.originalAmount)||0,this.discountAmount=parseFloat(t.discountAmount)||0,this.promoCode=t.promoCode||"",this.mobileNumber=t.mobileNumber||"",console.log("Order Confirmation - Booking ID:",this.bookingId),this.bookingId?this.loadBookingDetails():(this.loadError="Booking ID not provided",this.isLoading=!1)})}loadBookingDetails(){if(!this.bookingId){this.loadError="Invalid booking ID",this.isLoading=!1;return}this.isLoading=!0,this.loadError="";let t=`${this.API_BASE_URL}/search/booking/${this.bookingId}/details`;console.log("Fetching booking details from:",t),this.http.get(t).pipe(G(e=>(console.error("Error loading booking details:",e),this.loadError=this.getErrorMessage(e),ge({success:!1,message:"Failed to load booking details"}))),oe(()=>{this.isLoading=!1})).subscribe(e=>{console.log("Booking details API response:",e),e.success&&e.data?this.populateBookingData(e.data):this.loadError=e.message||"Failed to load booking details"})}populateBookingData(t){if(console.log("Populating booking data:",t),this.orderId=t.bookNumber||t.bookingId.substring(0,8).toUpperCase(),this.bookingId=t.bookingId,this.busNumber=t.busNumber,this.busName=t.busName,this.startLocation=t.startLocation.name,this.endLocation=t.endLocation.name,this.departureDate=t.departureDate,this.departureTime=t.departureTime,this.bookingStatus=t.bookingStatus,this.subtotal=t.subtotal||0,this.cgst=t.cgst||0,this.sgst=t.sgst||0,this.taxAmount=t.taxAmount||0,this.deliveryFee=t.deliveryFee||0,this.originalAmount=t.originalAmount||0,this.discountAmount=t.discountAmount||0,this.totalAmount=t.totalAmount||0,this.promoCode=t.promoCode||"",t.passengerPhone?this.mobileNumber=this.formatMobileNumber(t.passengerPhone):this.mobileNumber&&(this.mobileNumber=this.formatMobileNumber(this.mobileNumber)),t.route&&(this.routeName=t.route.routeName,this.estimatedTime=t.route.estimatedTime),t.bookimgItems)try{console.log("Raw booking items JSON:",t.bookimgItems);let e=JSON.parse(t.bookimgItems);Array.isArray(e)&&e.length>0?(this.orderItems=e,console.log("Parsed order items:",this.orderItems),this.calculateItemsTotal()):(console.warn("Parsed items is not a valid array"),this.orderItems=[])}catch(e){console.error("Error parsing booking items JSON:",e),this.orderItems=[]}else console.warn("No booking items in response"),this.orderItems=[];this.calculateEstimatedTimes(),console.log("Order confirmation data loaded:",{orderId:this.orderId,items:this.orderItems.length,subtotal:this.subtotal,cgst:this.cgst,sgst:this.sgst,tax:this.taxAmount,deliveryFee:this.deliveryFee,discount:this.discountAmount,total:this.totalAmount})}calculateItemsTotal(){if(!this.orderItems||this.orderItems.length===0){this.itemsTotal=0;return}this.itemsTotal=this.orderItems.reduce((t,e)=>{let c=(e.DiscountedPrice||e.Price)*e.Quantity;return t+c},0),console.log("Calculated items total:",this.itemsTotal)}calculateEstimatedTimes(){if(!this.departureTime){console.warn("No departure time available");return}try{let[t,e]=this.departureTime.split(":"),n=new Date;n.setHours(parseInt(t),parseInt(e),0,0);let c=new Date(n);c.setMinutes(c.getMinutes()-15),this.readyTime=this.formatTime(c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0")),this.arrivalTime=this.formatTime(this.departureTime),console.log("Calculated times:",{departureTime:this.departureTime,readyTime:this.readyTime,arrivalTime:this.arrivalTime})}catch(t){console.error("Error calculating times:",t),this.readyTime="",this.arrivalTime=""}}formatMobileNumber(t){if(!t)return"";let e=t.replace(/\D/g,"");if(e.length===10)return`+91 ${e.substring(0,5)}****${e.substring(8)}`;if(e.length>10){let n=e.slice(-10);return`+91 ${n.substring(0,5)}****${n.substring(8)}`}return t}getErrorMessage(t){return t.status===404?"Booking not found":t.status===0?"Unable to connect to server":t.status>=500?"Server error. Please try again later":t.error?.message?t.error.message:"An unexpected error occurred"}formatTime(t){if(!t)return"";try{let[e,n]=t.split(":"),c=parseInt(e),m=c%12||12,b=c>=12?"PM":"AM";return`${m}:${n} ${b}`}catch(e){return console.error("Error formatting time:",e),t}}formatDate(t){if(!t)return"";try{return new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch(e){return console.error("Error formatting date:",e),t}}formatCurrency(t){return isNaN(t)?"0.00":t.toFixed(2)}getItemTotal(t){return(t.DiscountedPrice||t.Price)*t.Quantity}hasTax(){return this.taxAmount>0}hasDeliveryFee(){return this.deliveryFee>0}hasDiscount(){return this.discountAmount>0&&!!this.promoCode}trackOrder(){this.router.navigate(["/order-status"],{queryParams:{bookingId:this.bookingId,orderId:this.orderId}})}retryLoad(){this.loadBookingDetails()}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(j))};static \u0275cmp=S({type:r,selectors:[["app-order-confirmation"]],decls:5,vars:4,consts:[[1,"confirmation-container"],["class","content-area",4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"content-area"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"bi","bi-exclamation-circle"],[3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"header"],[1,"success-animation"],[1,"checkmark-circle"],[1,"bi","bi-check"],[1,"success-message"],[1,"order-card"],[1,"order-id-section"],[1,"order-id-content"],[1,"order-id-info"],[1,"bi","bi-receipt"],[1,"label"],[1,"value"],[1,"timing"],[1,"bi","bi-clock"],[1,"restaurant-section"],[1,"restaurant-info"],["src","assets/logo_compact2.png","alt","BusFood","height","60px"],[1,"location-text"],[1,"order-items-section"],[1,"section-header"],[1,"bi","bi-bag"],[1,"items-count"],[1,"items-compact"],["class","item-row",4,"ngFor","ngForOf"],[1,"total-section"],[1,"amount-row"],["class","amount-row",4,"ngIf"],["class","discount-row",4,"ngIf"],[1,"total-row"],[1,"total-amount"],[1,"instructions-section"],[1,"bi","bi-info-circle"],[1,"instructions-compact"],[1,"instruction-row"],[1,"bi","bi-clock-fill"],[1,"bi","bi-telephone-fill"],[1,"bi","bi-geo-alt-fill"],[1,"bi","bi-calendar3"],[1,"item-row"],[1,"item-name"],[1,"item-details"],[1,"discount-row"],[1,"bi","bi-tag-fill"],[1,"action-buttons"],[1,"action-btn","primary",3,"click"],[1,"bi","bi-geo"]],template:function(e,n){e&1&&(i(0,"div",0),_(1,Yc,5,0,"div",1)(2,Qc,10,1,"div",1)(3,tl,82,17,"div",1)(4,nl,5,0,"div",2),o()),e&2&&(a(),l("ngIf",n.isLoading),a(),l("ngIf",n.loadError&&!n.isLoading),a(),l("ngIf",!n.isLoading&&!n.loadError),a(),l("ngIf",!n.isLoading&&!n.loadError))},dependencies:[k,N,L],styles:[".confirmation-container[_ngcontent-%COMP%]{height:100vh;background:#fff;display:flex;flex-direction:column;overflow:hidden}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.error-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;color:#1e293b;margin:0 0 .5rem;font-weight:600}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0 0 1.5rem}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem 1rem 0}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:2px}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.25rem}.success-animation[_ngcontent-%COMP%]{margin-bottom:1rem}.checkmark-circle[_ngcontent-%COMP%]{width:70px;height:70px;background:linear-gradient(135deg,#10b981,#059669);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto;box-shadow:0 4px 20px #10b98140;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}.checkmark-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.success-message[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#1e293b;margin:0 0 .25rem}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 2px 12px #00000014;border:1px solid #f1f5f9;margin-bottom:6rem;overflow:hidden}.order-id-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);padding:1rem;color:#fff}.order-id-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.order-id-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.order-id-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.9}.order-id-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.8rem;opacity:.8}.order-id-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.timing[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#ffffff26;padding:.4rem .75rem;border-radius:20px;font-size:.85rem;font-weight:600}.timing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.restaurant-section[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9}.restaurant-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.restaurant-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:#3b82f6;flex-shrink:0}.restaurant-info[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#1e293b;margin:0 0 .25rem}.restaurant-info[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin:0}.order-items-section[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center;gap:.5rem}.section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.9rem}.section-header[_ngcontent-%COMP%]   .items-count[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;background:#f1f5f9;padding:.25rem .5rem;border-radius:12px}.items-compact[_ngcontent-%COMP%]{margin-bottom:.75rem}.item-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid #f8fafc}.item-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-row[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#1e293b;flex:1}.item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;font-weight:500}.total-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;font-size:.85rem;color:#64748b}.total-section[_ngcontent-%COMP%]   .discount-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem .75rem;font-size:.85rem;color:#059669;background:#f0fdf4;border-radius:6px;margin:.5rem 0}.total-section[_ngcontent-%COMP%]   .discount-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem;font-size:.8rem}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#1e293b;color:#fff;padding:.75rem 1rem;border-radius:8px;font-weight:700;margin-top:.5rem}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.1rem}.instructions-section[_ngcontent-%COMP%]{padding:1rem}.instructions-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1e293b;margin:0 0 .75rem;display:flex;align-items:center;gap:.5rem}.instructions-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981;font-size:.9rem}.instructions-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.instruction-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.8rem;color:#475569}.instruction-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;color:#3b82f6;font-size:.75rem;flex-shrink:0}.instruction-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1e293b}.action-buttons[_ngcontent-%COMP%]{position:fixed;bottom:0;left:50%;transform:translate(-50%);width:100%;max-width:500px;background:#fff;border-top:1px solid #e5e7eb;padding:1rem;box-shadow:0 -4px 12px #0000001a;z-index:1000}@media (max-width: 500px){.action-buttons[_ngcontent-%COMP%]{left:0;transform:none;max-width:100%;padding:.875rem}}.action-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:10px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.action-btn.primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3) translateY(-30px)}50%{opacity:1;transform:scale(1.05) translateY(0)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width: 768px){.content-area[_ngcontent-%COMP%]{padding:.75rem .75rem 0}.checkmark-circle[_ngcontent-%COMP%]{width:60px;height:60px}.checkmark-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.success-message[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.order-id-section[_ngcontent-%COMP%], .restaurant-section[_ngcontent-%COMP%], .order-items-section[_ngcontent-%COMP%], .instructions-section[_ngcontent-%COMP%]{padding:.875rem}.order-id-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.order-id-content[_ngcontent-%COMP%]   .timing[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.content-area[_ngcontent-%COMP%]{padding:.5rem .5rem 0}.action-buttons[_ngcontent-%COMP%]{padding:.75rem}.action-btn[_ngcontent-%COMP%]{padding:.6rem .75rem;font-size:.85rem}}"]})};var Bt=class r{constructor(t){this.http=t;console.log("\u{1F4E6} OrderTrackingService initialized")}API_URL=`${D.apiBaseUrl}/ordertracking`;HUB_URL=`${D.hubUrl}/orderTrackingHub`;hubConnection=null;destroy$=new B;orderStatusUpdate$=new ke(null);connectionState$=new ke(!1);currentBookingId="";ngOnDestroy(){this.stopConnection(),this.destroy$.next(),this.destroy$.complete()}initializeSignalR(){console.log("\u{1F527} Initializing SignalR..."),this.hubConnection=new ft().withUrl(this.HUB_URL).withAutomaticReconnect([0,2e3,5e3,1e4]).configureLogging(ut.Information).build(),this.setupSignalRListeners()}setupSignalRListeners(){this.hubConnection&&(this.hubConnection.on("ReceiveOrderStatusUpdate",t=>{console.log("\u{1F4E6} Order status update received:",t),this.orderStatusUpdate$.next(t)}),this.hubConnection.on("GroupJoined",t=>{console.log("\u2705 "+t)}),this.hubConnection.onreconnecting(()=>{console.log("\u{1F504} SignalR reconnecting..."),this.connectionState$.next(!1)}),this.hubConnection.onreconnected(()=>{console.log("\u2705 SignalR reconnected"),this.connectionState$.next(!0),this.currentBookingId&&this.joinBookingGroup(this.currentBookingId).catch(t=>console.error("Error rejoining group:",t))}),this.hubConnection.onclose(()=>{console.log("\u274C SignalR disconnected"),this.connectionState$.next(!1)}))}startConnection(){return V(this,null,function*(){if(this.hubConnection||this.initializeSignalR(),!this.hubConnection)throw new Error("Failed to initialize SignalR connection");try{this.hubConnection.state===ye.Disconnected&&(console.log("\u{1F517} Starting SignalR connection to:",this.HUB_URL),yield this.hubConnection.start(),console.log("\u2705 SignalR connected successfully"),this.connectionState$.next(!0))}catch(t){throw console.error("\u274C SignalR connection error:",t),this.connectionState$.next(!1),t}})}stopConnection(){return V(this,null,function*(){if(this.hubConnection&&this.hubConnection.state!==ye.Disconnected)try{yield this.hubConnection.stop(),console.log("\u{1F6D1} SignalR stopped"),this.connectionState$.next(!1)}catch(t){console.error("Error stopping SignalR:",t)}})}joinBookingGroup(t){return V(this,null,function*(){if((!this.hubConnection||this.hubConnection.state!==ye.Connected)&&(console.log("\u26A0\uFE0F SignalR not connected, starting connection..."),yield this.startConnection()),!this.hubConnection||this.hubConnection.state!==ye.Connected)throw new Error("Cannot join group - SignalR not connected");try{this.currentBookingId=t,yield this.hubConnection.invoke("JoinBookingGroup",t),console.log(`\u2705 Joined booking group: ${t}`)}catch(e){throw console.error("\u274C Error joining booking group:",e),e}})}leaveBookingGroup(t){return V(this,null,function*(){if(!(!this.hubConnection||this.hubConnection.state!==ye.Connected))try{yield this.hubConnection.invoke("LeaveBookingGroup",t),console.log(`\u{1F44B} Left booking group: ${t}`),this.currentBookingId=""}catch(e){console.error("Error leaving booking group:",e)}})}getOrderTracking(t){return console.log("\u{1F4E5} Fetching order tracking for:",t),this.http.get(`${this.API_URL}/${t}`).pipe(rt(2),G(this.handleError))}getOrderStatusUpdates(){return this.orderStatusUpdate$.asObservable()}getConnectionState(){return this.connectionState$.asObservable()}handleError(t){let e="An error occurred";return t.status===404?e="Order not found":t.status===0?e="Unable to connect to server":t.status>=500?e="Server error. Please try again":t.error?.message&&(e=t.error.message),console.error("\u{1F534} HTTP Error:",e,t),Se(()=>new Error(e))}static \u0275fac=function(e){return new(e||r)(re(j))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var jt=class r{HUB_URL=`${D.hubUrl}/hubs/location-tracking`;hubConnection=null;destroy$=new B;watchId=null;locationInterval=null;connectionState$=new ke(!1);locationSharing$=new ke(!1);currentLocation$=new ke(null);constructor(){console.log("\u{1F4CD} LocationTrackingService initialized")}ngOnDestroy(){this.stopLocationSharing(),this.stopConnection(),this.destroy$.next(),this.destroy$.complete()}initializeSignalR(){console.log("\u{1F527} Initializing Location Tracking SignalR..."),this.hubConnection=new ft().withUrl(this.HUB_URL).withAutomaticReconnect([0,2e3,5e3,1e4]).configureLogging(ut.Information).build(),this.setupSignalRListeners()}setupSignalRListeners(){this.hubConnection&&(this.hubConnection.on("LocationSharingStarted",t=>{console.log("\u2705 Location sharing started:",t),this.locationSharing$.next(!0)}),this.hubConnection.on("LocationSharingStopped",t=>{console.log("\u{1F6D1} Location sharing stopped:",t),this.locationSharing$.next(!1)}),this.hubConnection.on("LocationSharingError",t=>{console.error("\u274C Location sharing error:",t)}),this.hubConnection.onreconnecting(()=>{console.log("\u{1F504} Location SignalR reconnecting..."),this.connectionState$.next(!1)}),this.hubConnection.onreconnected(()=>{console.log("\u2705 Location SignalR reconnected"),this.connectionState$.next(!0)}),this.hubConnection.onclose(()=>{console.log("\u274C Location SignalR disconnected"),this.connectionState$.next(!1)}))}startConnection(){return V(this,null,function*(){if(this.hubConnection||this.initializeSignalR(),!this.hubConnection)throw new Error("Failed to initialize SignalR connection");try{this.hubConnection.state===ye.Disconnected&&(console.log("\u{1F517} Starting Location SignalR connection to:",this.HUB_URL),yield this.hubConnection.start(),console.log("\u2705 Location SignalR connected successfully"),this.connectionState$.next(!0))}catch(t){throw console.error("\u274C Location SignalR connection error:",t),this.connectionState$.next(!1),t}})}stopConnection(){return V(this,null,function*(){if(this.hubConnection&&this.hubConnection.state!==ye.Disconnected)try{yield this.hubConnection.stop(),console.log("\u{1F6D1} Location SignalR stopped"),this.connectionState$.next(!1)}catch(t){console.error("Error stopping Location SignalR:",t)}})}startLocationSharing(t,e){return V(this,null,function*(){try{if(!navigator.geolocation)throw new Error("Geolocation is not supported by this browser");if(yield this.startConnection(),!this.hubConnection||this.hubConnection.state!==ye.Connected)throw new Error("SignalR connection not established");yield this.hubConnection.invoke("StartLocationSharing",t,e),console.log("\u2705 Location sharing initiated for booking:",t),yield this.shareCurrentLocation(t,e),this.locationInterval=setInterval(()=>V(this,null,function*(){yield this.shareCurrentLocation(t,e)}),6e4),console.log("\u{1F4CD} Location sharing started - updates every 1 minute")}catch(n){throw console.error("\u274C Error starting location sharing:",n),n}})}shareCurrentLocation(t,e){return V(this,null,function*(){return new Promise((n,c)=>{navigator.geolocation.getCurrentPosition(m=>V(this,null,function*(){try{let b={bookingId:t,tenantId:e,latitude:m.coords.latitude,longitude:m.coords.longitude,accuracy:m.coords.accuracy,timestamp:new Date};this.currentLocation$.next(b),this.hubConnection&&this.hubConnection.state===ye.Connected&&(yield this.hubConnection.invoke("ShareLocation",t,e,b.latitude,b.longitude,b.accuracy),console.log("\u{1F4CD} Location shared:",{lat:b.latitude.toFixed(6),lng:b.longitude.toFixed(6),accuracy:b.accuracy?.toFixed(2)})),n()}catch(b){console.error("\u274C Error sending location:",b),c(b)}}),m=>{console.error("\u274C Geolocation error:",m);let b="Unable to get location";switch(m.code){case m.PERMISSION_DENIED:b="Location permission denied";break;case m.POSITION_UNAVAILABLE:b="Location information unavailable";break;case m.TIMEOUT:b="Location request timed out";break}c(new Error(b))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4})})})}stopLocationSharing(t,e){return V(this,null,function*(){try{this.locationInterval&&(clearInterval(this.locationInterval),this.locationInterval=null,console.log("\u{1F6D1} Location interval cleared")),this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.hubConnection&&this.hubConnection.state===ye.Connected&&t&&e&&(yield this.hubConnection.invoke("StopLocationSharing",t,e),console.log("\u2705 Location sharing stopped on server")),this.locationSharing$.next(!1),this.currentLocation$.next(null)}catch(n){console.error("Error stopping location sharing:",n)}})}getConnectionState(){return this.connectionState$.asObservable()}getLocationSharingState(){return this.locationSharing$.asObservable()}getCurrentLocation(){return this.currentLocation$.asObservable()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var al=(r,t,e)=>({completed:r,active:t,pending:e}),hn=()=>[1,2,3,4,5];function sl(r,t){r&1&&(i(0,"div",3)(1,"div",4),d(2,"div",5),i(3,"p"),s(4,"Loading order status..."),o()()())}function cl(r,t){if(r&1){let e=v();i(0,"div",3)(1,"div",6),d(2,"i",7),i(3,"h3"),s(4,"Unable to load order"),o(),i(5,"p"),s(6),o(),i(7,"button",8),g("click",function(){u(e);let c=p();return f(c.retryLoad())}),d(8,"i",9),s(9," Retry "),o()()()}if(r&2){let e=p();a(6),h(e.loadError)}}function ll(r,t){r&1&&d(0,"i",50)}function dl(r,t){r&1&&d(0,"i",51)}function ml(r,t){if(r&1&&(i(0,"p"),s(1),o()),r&2){let e=p(3);a(),C("Reason: ",e.cancelReason,"")}}function pl(r,t){r&1&&(i(0,"p"),s(1,"This order has been canceled."),o())}function gl(r,t){if(r&1&&(i(0,"div",52)(1,"div",53)(2,"div",54),d(3,"i",51),o(),i(4,"div",55)(5,"h4"),s(6,"Order Canceled"),o(),_(7,ml,2,1,"p",2)(8,pl,2,0,"p",2),o()()()),r&2){let e=p(2);a(7),l("ngIf",e.cancelReason),a(),l("ngIf",!e.cancelReason)}}function ul(r,t){if(r&1&&(i(0,"p"),s(1),o()),r&2){let e=p(3);a(),C("Reason: ",e.rejectReason,"")}}function fl(r,t){r&1&&(i(0,"p"),s(1,"Unfortunately, this order was rejected."),o())}function _l(r,t){if(r&1&&(i(0,"div",56)(1,"div",57)(2,"div",58),d(3,"i",59),o(),i(4,"div",60)(5,"h4"),s(6,"Order Rejected"),o(),_(7,ul,2,1,"p",2)(8,fl,2,0,"p",2),o()()()),r&2){let e=p(2);a(7),l("ngIf",e.rejectReason),a(),l("ngIf",!e.rejectReason)}}function bl(r,t){if(r&1&&d(0,"i"),r&2){let e=p().$implicit;R(e.icon)}}function Cl(r,t){r&1&&d(0,"i",74)}function hl(r,t){r&1&&d(0,"div",75)}function vl(r,t){if(r&1&&(i(0,"span",76),s(1),o()),r&2){let e=p().$implicit;a(),h(e.time)}}function Ml(r,t){if(r&1&&(i(0,"div",65)(1,"div",66)(2,"div",67),_(3,bl,1,2,"i",68)(4,Cl,1,0,"i",69),o(),_(5,hl,1,0,"div",70),o(),i(6,"div",71)(7,"div",72)(8,"h5"),s(9),o(),_(10,vl,2,1,"span",73),o(),i(11,"p"),s(12),o()()()),r&2){let e=t.$implicit,n=t.index,c=p(3);l("ngClass",Jt(7,al,e.status==="completed",e.status==="active",e.status==="pending")),a(3),l("ngIf",e.status!=="completed"),a(),l("ngIf",e.status==="completed"),a(),l("ngIf",n<c.orderSteps.length-1),a(4),h(e.title),a(),l("ngIf",e.time),a(2),h(e.description)}}function Ol(r,t){if(r&1&&(i(0,"div",61)(1,"h4"),d(2,"i",62),s(3," Order Progress"),o(),i(4,"div",63),_(5,Ml,13,11,"div",64),o()()),r&2){let e=p(2);a(5),l("ngForOf",e.orderSteps)}}function Pl(r,t){r&1&&(i(0,"div",89),d(1,"i",90),i(2,"span"),s(3,"Your order is ready and will be delivered soon"),o()())}function xl(r,t){if(r&1){let e=v();i(0,"div",77)(1,"div",78)(2,"h4"),d(3,"i",79),s(4," Delivery Person"),o()(),i(5,"div",80)(6,"div",81)(7,"div",82),d(8,"i",83),o(),i(9,"div",84)(10,"h5"),s(11),o(),i(12,"p",85),d(13,"i",86),s(14),o()()(),i(15,"button",87),g("click",function(){u(e);let c=p(2);return f(c.callDeliveryPerson())}),d(16,"i",86),s(17," Call "),o()(),_(18,Pl,4,0,"div",88),o()}if(r&2){let e=p(2);a(11),h(e.deliveryPersonName),a(3),C(" ",e.deliveryPersonPhone," "),a(4),l("ngIf",e.currentStatus==="ready")}}function yl(r,t){if(r&1&&(i(0,"span",100),s(1),o()),r&2){let e=p(3);a(),C("",e.distanceToStop," away")}}function Sl(r,t){if(r&1&&(i(0,"div",101),d(1,"i",26),i(2,"span"),s(3),i(4,"strong"),s(5),o()()()),r&2){let e=p(3);a(3),C("ETA at ",e.stopName,": "),a(2),h(e.estimatedArrival)}}function wl(r,t){if(r&1){let e=v();i(0,"div",91)(1,"div",92)(2,"h4"),d(3,"i",93),s(4," Your Location"),o(),i(5,"button",94),g("click",function(){u(e);let c=p(2);return f(c.updateLocation())}),d(6,"i",9),o()(),i(7,"div",95)(8,"div",96)(9,"span",97),s(10),o(),_(11,yl,2,1,"span",98),o(),_(12,Sl,6,2,"div",99),o()()}if(r&2){let e=p(2);a(10),h(e.userCurrentLocation),a(),l("ngIf",e.distanceToStop),a(),l("ngIf",e.estimatedArrival)}}function kl(r,t){if(r&1&&(i(0,"p",108),d(1,"i",79),s(2," Delivered by "),i(3,"strong"),s(4),o()()),r&2){let e=p(3);a(4),h(e.deliveryPersonName)}}function Il(r,t){if(r&1&&(i(0,"div",102)(1,"div",103)(2,"div",104),d(3,"i",105),o(),i(4,"div",106)(5,"h4"),s(6,"Order Completed Successfully!"),o(),i(7,"p"),s(8,"Thank you for using our service. We hope you enjoyed your meal!"),o(),_(9,kl,5,1,"p",107),o()()()),r&2){let e=p(2);a(9),l("ngIf",e.hasDeliveryPerson())}}function El(r,t){r&1&&(i(0,"div",113),d(1,"i",105),s(2," Thank you for your feedback! "),o())}function Tl(r,t){if(r&1){let e=v();i(0,"i",123),g("click",function(){let c=u(e).$implicit,m=p(4);return f(m.setFoodRating(c))}),o()}if(r&2){let e=t.$implicit,n=p(4);M("selected",n.foodRating>=e)}}function Ll(r,t){if(r&1){let e=v();i(0,"i",123),g("click",function(){let c=u(e).$implicit,m=p(4);return f(m.setDeliveryRating(c))}),o()}if(r&2){let e=t.$implicit,n=p(4);M("selected",n.deliveryRating>=e)}}function Al(r,t){r&1&&(i(0,"span"),d(1,"i",124),s(2," Submit Feedback "),o())}function Rl(r,t){r&1&&(i(0,"span"),d(1,"span",125),s(2," Submitting... "),o())}function Nl(r,t){if(r&1){let e=v();qe(0),i(1,"div",114)(2,"div",115)(3,"label"),s(4,"Food Quality"),o(),i(5,"div",116),_(6,Tl,1,2,"i",117),o()(),i(7,"div",115)(8,"label"),s(9,"Delivery Service"),o(),i(10,"div",116),_(11,Ll,1,2,"i",117),o()()(),i(12,"div",118)(13,"label",119),s(14,"Additional Comments (Optional)"),o(),i(15,"textarea",120),T("ngModelChange",function(c){u(e);let m=p(3);return E(m.feedbackText,c)||(m.feedbackText=c),f(c)}),o(),i(16,"span",121),s(17),o()(),i(18,"button",122),g("click",function(){u(e);let c=p(3);return f(c.submitFeedback())}),_(19,Al,3,0,"span",2)(20,Rl,3,0,"span",2),o(),Ge()}if(r&2){let e=p(3);a(6),l("ngForOf",$e(7,hn)),a(5),l("ngForOf",$e(8,hn)),a(4),I("ngModel",e.feedbackText),a(2),C("",e.feedbackText.length,"/500"),a(),l("disabled",e.isSubmittingFeedback||e.foodRating===0&&e.deliveryRating===0),a(),l("ngIf",!e.isSubmittingFeedback),a(),l("ngIf",e.isSubmittingFeedback)}}function Dl(r,t){if(r&1&&(i(0,"div",109)(1,"div",110)(2,"h4"),d(3,"i",111),s(4," Rate Your Experience"),o(),i(5,"p"),s(6,"Help us improve our service"),o()(),_(7,El,3,0,"div",112)(8,Nl,21,9,"ng-container",2),o()),r&2){let e=p(2);a(7),l("ngIf",e.feedbackSubmitted),a(),l("ngIf",!e.feedbackSubmitted)}}function Fl(r,t){if(r&1&&(i(0,"div",126)(1,"span",127),s(2),o(),i(3,"span",128),s(4),o()()),r&2){let e=t.$implicit,n=p(2);a(2),h(e.name),a(2),q("\xD7",e.quantity," \u2022 \u20B9",n.formatCurrency(e.price),"")}}function Vl(r,t){if(r&1&&(i(0,"div",39)(1,"span"),s(2,"CGST (9%)"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.cgst),"")}}function zl(r,t){if(r&1&&(i(0,"div",39)(1,"span"),s(2,"SGST (9%)"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.sgst),"")}}function Bl(r,t){if(r&1&&(i(0,"div",39)(1,"span"),s(2,"Delivery Fee"),o(),i(3,"span"),s(4),o()()),r&2){let e=p(2);a(4),C("\u20B9",e.formatCurrency(e.deliveryFee),"")}}function jl(r,t){if(r&1&&(i(0,"div",129)(1,"span"),d(2,"i",130),s(3),o(),i(4,"span",131),s(5),o()()),r&2){let e=p(2);a(3),C(" Discount (",e.promoCode,") "),a(2),C("-\u20B9",e.formatCurrency(e.discountAmount),"")}}function $l(r,t){if(r&1){let e=v();qe(0),i(1,"div",10)(2,"button",11),g("click",function(){u(e);let c=p();return f(c.goBack())}),d(3,"i",12),o(),i(4,"div",13)(5,"h1"),s(6,"Track Order"),o(),i(7,"div",14)(8,"div",15),_(9,ll,1,0,"i",16)(10,dl,1,0,"i",17),i(11,"span"),s(12),o()(),i(13,"button",18),g("click",function(){u(e);let c=p();return f(c.refreshStatus())}),d(14,"i",9),o()()()(),i(15,"div",3)(16,"div",19)(17,"div",20)(18,"div",21),d(19,"i",22),i(20,"div")(21,"span",23),s(22,"Order ID"),o(),i(23,"span",24),s(24),o()()(),i(25,"div",25),d(26,"i",26),i(27,"div")(28,"h3"),s(29),o(),i(30,"p"),s(31),o()()()()(),_(32,gl,9,2,"div",27)(33,_l,9,2,"div",28)(34,Ol,6,1,"div",29)(35,xl,19,3,"div",30)(36,wl,13,3,"div",31)(37,Il,10,1,"div",32)(38,Dl,9,2,"div",33),i(39,"div",34)(40,"h4"),d(41,"i",35),s(42," Order Summary"),o(),i(43,"div",36),_(44,Fl,5,3,"div",37),o(),i(45,"div",38)(46,"div",39)(47,"span"),s(48,"Subtotal"),o(),i(49,"span"),s(50),o()(),_(51,Vl,5,1,"div",40)(52,zl,5,1,"div",40)(53,Bl,5,1,"div",40)(54,jl,6,2,"div",41),i(55,"div",42)(56,"span"),s(57,"Total Amount"),o(),i(58,"span",43),s(59),o()()()(),i(60,"div",44)(61,"h4"),d(62,"i",45),s(63," Need Help?"),o(),i(64,"div",46)(65,"button",47),g("click",function(){u(e);let c=p();return f(c.callRestaurant())}),d(66,"i",48),i(67,"span"),s(68,"Call Support"),o()(),i(69,"button",47),g("click",function(){u(e);let c=p();return f(c.reportIssue())}),d(70,"i",49),i(71,"span"),s(72,"Report Issue"),o()()()()(),Ge()}if(r&2){let e=p();a(8),l("ngClass",e.getStatusColor(e.currentStatus)),a(),l("ngIf",e.isStatusCompleted()),a(),l("ngIf",e.isStatusCanceled()||e.isStatusRejected()),a(2),h(e.getStatusText(e.currentStatus)),a(),M("refreshing",e.isRefreshing),l("disabled",e.isRefreshing),a(11),C("#",e.orderId,""),a(5),h(e.busName),a(2),q("",e.startLocation," \u2192 ",e.endLocation,""),a(),l("ngIf",e.isStatusCanceled()),a(),l("ngIf",e.isStatusRejected()),a(),l("ngIf",!e.isStatusCanceled()&&!e.isStatusRejected()&&!e.isStatusCompleted()),a(),l("ngIf",e.hasDeliveryPerson()&&e.currentStatus==="ready"&&!e.isStatusCanceled()&&!e.isStatusRejected()),a(),l("ngIf",(e.currentStatus==="ready"||e.currentStatus==="preparing")&&!e.isStatusCanceled()&&!e.isStatusRejected()),a(),l("ngIf",e.isStatusCompleted()),a(),l("ngIf",e.isStatusCompleted()),a(6),l("ngForOf",e.orderItems),a(6),C("\u20B9",e.formatCurrency(e.subtotal),""),a(),l("ngIf",e.hasTax()),a(),l("ngIf",e.hasTax()),a(),l("ngIf",e.hasDeliveryFee()),a(),l("ngIf",e.hasDiscount()),a(5),C("\u20B9",e.formatCurrency(e.totalAmount),"")}}var $t=class r{constructor(t,e,n,c,m){this.router=t;this.route=e;this.orderTrackingService=n;this.locationTrackingService=c;this.http=m}destroy$=new B;bookingId="";tenantId=0;orderId="";busNumber="";busName="";startLocation="";endLocation="";currentStatus="confirmed";passengerPhone="";orderItems=[];subtotal=0;cgst=0;sgst=0;taxAmount=0;deliveryFee=0;originalAmount=0;discountAmount=0;totalAmount=0;promoCode="";cancelReason="";rejectReason="";deliveryPersonName="";deliveryPersonPhone="";assignedAt="";userCurrentLocation="Getting location...";distanceToStop="";estimatedArrival="";stopName="";isLoading=!0;isRefreshing=!1;loadError="";isConnected=!1;isLocationSharing=!1;locationError="";currentLatitude=0;currentLongitude=0;foodRating=0;deliveryRating=0;feedbackText="";isSubmittingFeedback=!1;feedbackSubmitted=!1;orderSteps=[{id:"confirmed",title:"Order Confirmed",description:"Your order has been placed successfully",icon:"bi-check-circle-fill",status:"pending"},{id:"preparing",title:"Preparing Food",description:"Restaurant is preparing your meal",icon:"bi-clock-fill",status:"pending"},{id:"ready",title:"Food Ready",description:"Your order is ready for pickup",icon:"bi-bag-check-fill",status:"pending"},{id:"completed",title:"Order Complete",description:"Enjoy your meal!",icon:"bi-star-fill",status:"pending"}];RATING_API_URL=`${D.apiBaseUrl}/OrderRating`;ngOnInit(){console.log("\u{1F680} OrderStatusComponent initializing..."),this.route.queryParams.pipe(w(this.destroy$)).subscribe(t=>V(this,null,function*(){this.bookingId=t.bookingId||"",this.orderId=t.orderId||"",console.log("\u{1F4CB} Booking ID:",this.bookingId),this.bookingId?yield this.initializeOrderTracking():(this.loadError="Booking ID not provided",this.isLoading=!1)})),this.orderTrackingService.getConnectionState().pipe(w(this.destroy$)).subscribe(t=>{this.isConnected=t,console.log("\u{1F4E1} SignalR Connection:",t?"Connected":"Disconnected")}),this.orderTrackingService.getOrderStatusUpdates().pipe(w(this.destroy$)).subscribe(t=>{t&&t.bookingId===this.bookingId&&(console.log("\u{1F514} Status update:",t),this.handleStatusUpdate(t))}),this.locationTrackingService.getLocationSharingState().pipe(w(this.destroy$)).subscribe(t=>{this.isLocationSharing=t,console.log("\u{1F4CD} Location sharing:",t?"Active":"Inactive")}),this.locationTrackingService.getCurrentLocation().pipe(w(this.destroy$)).subscribe(t=>{t&&(this.currentLatitude=t.latitude,this.currentLongitude=t.longitude,this.userCurrentLocation=`Lat: ${t.latitude.toFixed(6)}, Lng: ${t.longitude.toFixed(6)}`,console.log("\u{1F4CD} Location updated:",this.userCurrentLocation))}),this.getCurrentLocation()}ngOnDestroy(){console.log("\u{1F6D1} Component destroying"),this.bookingId&&(this.orderTrackingService.leaveBookingGroup(this.bookingId),this.isLocationSharing&&this.locationTrackingService.stopLocationSharing(this.bookingId,this.tenantId)),this.destroy$.next(),this.destroy$.complete()}initializeOrderTracking(){return V(this,null,function*(){try{console.log("\u{1F527} Initializing order tracking..."),yield this.orderTrackingService.startConnection(),yield this.orderTrackingService.joinBookingGroup(this.bookingId),this.loadOrderTracking()}catch(t){console.error("\u274C Error initializing:",t),this.loadError="Failed to connect. Click retry to try again.",this.isLoading=!1}})}loadOrderTracking(){this.bookingId&&(this.isLoading=!0,this.loadError="",this.orderTrackingService.getOrderTracking(this.bookingId).pipe(w(this.destroy$),oe(()=>{this.isLoading=!1})).subscribe({next:t=>{console.log("\u2705 Order loaded:",t),t.success&&t.data?this.populateOrderData(t.data):this.loadError=t.message||"Failed to load order"},error:t=>{console.error("\u274C Error loading order:",t),this.loadError=t.message||"Failed to load order. Click retry to try again."}}))}populateOrderData(t){if(this.orderId=t.orderId,this.busNumber=t.busNumber,this.busName=t.busName,this.startLocation=t.startLocation,this.endLocation=t.endLocation,this.passengerPhone=t.passengerPhone,t.tenantId)this.tenantId=t.tenantId;else{let n=localStorage.getItem("tenantId");n&&(this.tenantId=parseInt(n,10))}let e=t.currentStatus.toLowerCase();this.currentStatus=e==="delivered"?"completed":e,this.subtotal=t.subtotal||0,this.cgst=t.cgst||0,this.sgst=t.sgst||0,this.taxAmount=t.taxAmount||0,this.deliveryFee=t.deliveryFee||0,this.originalAmount=t.originalAmount||0,this.discountAmount=t.discountAmount||0,this.totalAmount=t.totalAmount||0,this.promoCode=t.promoCode||"",this.cancelReason=t.cancelReason||"",this.rejectReason=t.rejectReason||"",this.deliveryPersonName=t.deliveryPersonName||"",this.deliveryPersonPhone=t.deliveryPersonPhone||"",this.assignedAt=t.assignedAt||"",this.stopName=t.startLocation,this.orderItems=t.items.map(n=>({name:n.itemName,quantity:n.quantity,price:(n.discountedPrice||n.price)*n.quantity})),this.updateOrderStepsFromStatus(this.currentStatus,t.statusHistory),this.currentStatus==="completed"&&this.checkIfRated(),this.shouldShareLocation()&&!this.isLocationSharing&&this.startLocationSharing(),console.log("\u2705 Order data populated")}shouldShareLocation(){return["confirmed","preparing","ready"].includes(this.currentStatus.toLowerCase())&&this.tenantId>0}startLocationSharing(){return V(this,null,function*(){if(!this.bookingId||!this.tenantId){console.warn("\u26A0\uFE0F Cannot start location sharing: missing bookingId or tenantId");return}try{this.locationError="",yield this.locationTrackingService.startLocationSharing(this.bookingId,this.tenantId),console.log("\u2705 Location sharing started successfully")}catch(t){console.error("\u274C Failed to start location sharing:",t),this.locationError=t.message||"Failed to start location sharing"}})}stopLocationSharing(){return V(this,null,function*(){try{yield this.locationTrackingService.stopLocationSharing(this.bookingId,this.tenantId),console.log("\u2705 Location sharing stopped")}catch(t){console.error("\u274C Failed to stop location sharing:",t)}})}handleStatusUpdate(t){console.log("\u{1F504} Handling status update:",t.status);let e=t.status.toLowerCase();this.currentStatus=e==="delivered"?"completed":e;let n=this.orderSteps.findIndex(c=>c.id===this.currentStatus);if(n!==-1){this.orderSteps[n].status="active",this.orderSteps[n].time=this.formatTime(t.updatedAt);for(let c=0;c<n;c++)this.orderSteps[c].status!=="completed"&&(this.orderSteps[c].status="completed",this.orderSteps[c].time||(this.orderSteps[c].time=this.formatTime(t.updatedAt)))}t.details&&(t.details.cancelReason&&(this.cancelReason=t.details.cancelReason),t.details.rejectReason&&(this.rejectReason=t.details.rejectReason),t.details.deliveryPerson&&(this.deliveryPersonName=t.details.deliveryPerson.name,this.deliveryPersonPhone=t.details.deliveryPerson.phone,console.log("\u2705 Delivery person assigned:",this.deliveryPersonName))),["completed","canceled","rejected"].includes(this.currentStatus.toLowerCase())&&this.isLocationSharing&&this.stopLocationSharing()}updateOrderStepsFromStatus(t,e){let n=t.toLowerCase();if(n==="canceled"||n==="rejected"){this.orderSteps.forEach(b=>{let x=e?.find(y=>y.status.toLowerCase()===b.id);b.status=x?"completed":"pending",b.time=x?this.formatTime(x.timestamp):void 0});return}let m=["confirmed","preparing","ready","completed"].indexOf(n);this.orderSteps.forEach((b,x)=>{let y=e?.find(A=>A.status.toLowerCase()===b.id);!y&&b.id==="completed"&&(y=e?.find(A=>A.status.toLowerCase()==="delivered")),x<m?(b.status="completed",b.time=y?this.formatTime(y.timestamp):void 0):x===m?(b.status="active",b.time=y?this.formatTime(y.timestamp):this.formatTime(new Date().toISOString())):(b.status="pending",b.time=void 0)})}refreshStatus(){return V(this,null,function*(){this.isRefreshing||(this.isRefreshing=!0,setTimeout(()=>{this.loadOrderTracking(),setTimeout(()=>{this.isRefreshing=!1},1e3)},500))})}getCurrentLocation(){try{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.userCurrentLocation="NH-44, Near Milestone 45",this.distanceToStop="8.5 km",this.estimatedArrival="2:45 PM"},t=>{console.error("Geolocation error:",t),this.userCurrentLocation="Location unavailable"})}catch(t){console.error("Error getting location:",t),this.userCurrentLocation="Location access denied"}}updateLocation(){this.userCurrentLocation="Getting location...",this.getCurrentLocation()}getStatusText(t){return{confirmed:"Confirmed",preparing:"Preparing",ready:"Ready",completed:"Completed",canceled:"Canceled",rejected:"Rejected"}[t]||"Processing"}getStatusColor(t){return{confirmed:"success",preparing:"warning",ready:"info",completed:"completed",canceled:"canceled",rejected:"rejected"}[t]||"secondary"}isStatusCompleted(){return this.currentStatus==="completed"}isStatusCanceled(){return this.currentStatus==="canceled"}isStatusRejected(){return this.currentStatus==="rejected"}hasTax(){return this.taxAmount>0}hasDeliveryFee(){return this.deliveryFee>0}hasDiscount(){return this.discountAmount>0&&!!this.promoCode}formatCurrency(t){return isNaN(t)?"0.00":t.toFixed(2)}formatTime(t){try{return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return""}}callRestaurant(){this.busNumber&&(window.location.href=`tel:${this.busNumber}`)}callDeliveryPerson(){this.deliveryPersonPhone&&(window.location.href=`tel:${this.deliveryPersonPhone}`)}hasDeliveryPerson(){return!!this.deliveryPersonName&&!!this.deliveryPersonPhone}getFormattedAssignedTime(){return this.assignedAt?this.formatTime(this.assignedAt):""}reportIssue(){alert("Opening support chat...")}retryLoad(){this.loadOrderTracking()}goBack(){this.router.navigate(["/order-confirmation"],{queryParams:{bookingId:this.bookingId}})}setFoodRating(t){this.foodRating=t}setDeliveryRating(t){this.deliveryRating=t}checkIfRated(){return V(this,null,function*(){if(this.bookingId)try{let t=yield this.http.get(`${this.RATING_API_URL}/${this.bookingId}/check`).toPromise();t?.success&&t?.data?.hasRated&&(this.feedbackSubmitted=!0,console.log("Order has already been rated"))}catch(t){console.error("Error checking rating status:",t)}})}submitFeedback(){if(this.foodRating===0&&this.deliveryRating===0){alert("Please provide at least one rating");return}if(!this.passengerPhone){alert("Passenger phone number is required");return}this.isSubmittingFeedback=!0;let t={bookingId:this.bookingId,orderId:this.orderId,foodQualityRating:this.foodRating,deliveryServiceRating:this.deliveryRating,comments:this.feedbackText.trim()},e=new Te({"Content-Type":"application/json","X-Passenger-Phone":this.passengerPhone});this.http.post(`${this.RATING_API_URL}/submit`,t,{headers:e}).pipe(G(n=>{console.error("Error submitting rating:",n);let c="Failed to submit rating. Please try again.";return n.error?.message&&(c=n.error.message),alert(c),this.isSubmittingFeedback=!1,ge(null)})).subscribe(n=>{n&&n.success?(console.log("\u2705 Rating submitted successfully:",n),this.isSubmittingFeedback=!1,this.feedbackSubmitted=!0,console.log("Thank you for your feedback!")):n&&(alert(n.message||"Failed to submit rating"),this.isSubmittingFeedback=!1)})}static \u0275fac=function(e){return new(e||r)(P(Q),P(xe),P(Bt),P(jt),P(j))};static \u0275cmp=S({type:r,selectors:[["app-order-status"]],decls:4,vars:3,consts:[[1,"status-container"],["class","content-area",4,"ngIf"],[4,"ngIf"],[1,"content-area"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"bi","bi-exclamation-circle"],[3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"header"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"header-content"],[1,"header-actions"],[1,"status-badge",3,"ngClass"],["class","bi bi-check-circle-fill tick-icon",4,"ngIf"],["class","bi bi-x-circle-fill",4,"ngIf"],[1,"refresh-btn",3,"click","disabled"],[1,"order-info-card"],[1,"order-details"],[1,"order-id"],[1,"bi","bi-receipt"],[1,"label"],[1,"value"],[1,"restaurant-details"],[1,"bi","bi-bus-front"],["class","cancel-card",4,"ngIf"],["class","reject-card",4,"ngIf"],["class","progress-card",4,"ngIf"],["class","delivery-person-card",4,"ngIf"],["class","location-card",4,"ngIf"],["class","completion-card",4,"ngIf"],["class","feedback-card",4,"ngIf"],[1,"summary-card"],[1,"bi","bi-bag"],[1,"order-items-mini"],["class","item-mini",4,"ngFor","ngForOf"],[1,"amount-breakdown"],[1,"breakdown-row"],["class","breakdown-row",4,"ngIf"],["class","breakdown-row discount",4,"ngIf"],[1,"breakdown-row","total"],[1,"total-amount"],[1,"help-card"],[1,"bi","bi-question-circle"],[1,"help-buttons"],[1,"help-btn",3,"click"],[1,"bi","bi-telephone"],[1,"bi","bi-chat-dots"],[1,"bi","bi-check-circle-fill","tick-icon"],[1,"bi","bi-x-circle-fill"],[1,"cancel-card"],[1,"cancel-content"],[1,"cancel-icon"],[1,"cancel-text"],[1,"reject-card"],[1,"reject-content"],[1,"reject-icon"],[1,"bi","bi-x-octagon-fill"],[1,"reject-text"],[1,"progress-card"],[1,"bi","bi-list-check"],[1,"progress-steps"],["class","progress-step",3,"ngClass",4,"ngFor","ngForOf"],[1,"progress-step",3,"ngClass"],[1,"step-indicator"],[1,"step-icon"],[3,"class",4,"ngIf"],["class","bi bi-check-lg",4,"ngIf"],["class","step-line",4,"ngIf"],[1,"step-content"],[1,"step-header"],["class","step-time",4,"ngIf"],[1,"bi","bi-check-lg"],[1,"step-line"],[1,"step-time"],[1,"delivery-person-card"],[1,"delivery-header"],[1,"bi","bi-person-check-fill"],[1,"delivery-info"],[1,"delivery-person-details"],[1,"person-avatar"],[1,"bi","bi-person-circle"],[1,"person-info"],[1,"person-phone"],[1,"bi","bi-telephone-fill"],[1,"call-delivery-btn",3,"click"],["class","delivery-status-message",4,"ngIf"],[1,"delivery-status-message"],[1,"bi","bi-info-circle-fill"],[1,"location-card"],[1,"location-header"],[1,"bi","bi-geo-alt"],[1,"location-refresh-btn",3,"click"],[1,"location-info"],[1,"current-location"],[1,"location-text"],["class","distance-badge",4,"ngIf"],["class","eta-info",4,"ngIf"],[1,"distance-badge"],[1,"eta-info"],[1,"completion-card"],[1,"completion-content"],[1,"completion-icon"],[1,"bi","bi-check-circle-fill"],[1,"completion-text"],["class","delivery-person-name",4,"ngIf"],[1,"delivery-person-name"],[1,"feedback-card"],[1,"feedback-header"],[1,"bi","bi-star-fill"],["class","feedback-success",4,"ngIf"],[1,"feedback-success"],[1,"rating-section"],[1,"rating-category"],[1,"star-rating"],["class","bi bi-star-fill",3,"selected","click",4,"ngFor","ngForOf"],[1,"feedback-input"],["for","feedbackText"],["id","feedbackText","placeholder","Share your experience with us...","rows","3","maxlength","500",3,"ngModelChange","ngModel"],[1,"char-count"],[1,"submit-feedback-btn",3,"click","disabled"],[1,"bi","bi-star-fill",3,"click"],[1,"bi","bi-send-fill"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"item-mini"],[1,"item-name"],[1,"item-qty-price"],[1,"breakdown-row","discount"],[1,"bi","bi-percent"],[1,"discount-value"]],template:function(e,n){e&1&&(i(0,"div",0),_(1,sl,5,0,"div",1)(2,cl,10,1,"div",1)(3,$l,73,25,"ng-container",2),o()),e&2&&(a(),l("ngIf",n.isLoading),a(),l("ngIf",n.loadError&&!n.isLoading),a(),l("ngIf",!n.isLoading&&!n.loadError))},dependencies:[k,ue,N,L,z,$,U,ze,K],styles:[".status-container[_ngcontent-%COMP%]{height:100vh;background:#fff;display:flex;flex-direction:column;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#fff;border-bottom:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a;flex-shrink:0}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;width:38px;height:38px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#374151}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.95rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.15rem;font-weight:700;color:#111827}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.status-badge[_ngcontent-%COMP%]{padding:.35rem .75rem;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px;display:flex;align-items:center;gap:.4rem}.status-badge[_ngcontent-%COMP%]   .tick-icon[_ngcontent-%COMP%]{font-size:.8rem;animation:_ngcontent-%COMP%_checkmarkPop .5s ease-out}.status-badge.success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.info[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.status-badge.completed[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-badge.completed[_ngcontent-%COMP%]   .tick-icon[_ngcontent-%COMP%]{color:#059669}.status-badge.secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.refresh-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;color:#6b7280}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3b82f6;color:#fff}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.refresh-btn.refreshing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:2px}.order-info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.order-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:#3b82f6}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#111827}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .2rem;font-size:.95rem;font-weight:600;color:#111827}.order-details[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#6b7280}.progress-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.progress-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.95rem;font-weight:600;color:#111827;display:flex;align-items:center;gap:.5rem}.progress-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.9rem}.progress-steps[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.progress-step[_ngcontent-%COMP%]{display:flex;gap:.75rem;position:relative}.progress-step[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.progress-step[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f3f4f6;color:#9ca3af;font-size:.8rem;position:relative;z-index:2}.progress-step[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{width:2px;height:24px;background:#e5e7eb;margin-top:.25rem}.progress-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{flex:1;padding-bottom:.5rem}.progress-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.25rem}.progress-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:.85rem;font-weight:600;color:#111827}.progress-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-time[_ngcontent-%COMP%]{font-size:.75rem;color:#3b82f6;font-weight:500}.progress-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#6b7280;line-height:1.4}.progress-step.completed[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background:#10b981;color:#fff}.progress-step.completed[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{background:#10b981}.progress-step.active[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}.progress-step.active[_ngcontent-%COMP%]   .step-line[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#3b82f6,#e5e7eb)}.progress-step.pending[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{opacity:.6}.delivery-person-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border-radius:12px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #93c5fd}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:600;color:#1e40af;display:flex;align-items:center;gap:.5rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   .assigned-badge[_ngcontent-%COMP%]{background:#fff;color:#1e40af;padding:.25rem .6rem;border-radius:12px;font-size:.7rem;font-weight:500;display:flex;align-items:center;gap:.3rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   .assigned-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.65rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:.75rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]   .person-avatar[_ngcontent-%COMP%]{width:48px;height:48px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 4px #0000001a}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]   .person-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#3b82f6}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]   .person-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.9rem;font-weight:600;color:#1e3a8a}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]   .person-info[_ngcontent-%COMP%]   .person-phone[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#1e40af;display:flex;align-items:center;gap:.3rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .delivery-person-details[_ngcontent-%COMP%]   .person-info[_ngcontent-%COMP%]   .person-phone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .call-delivery-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.6rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.4rem;cursor:pointer;transition:all .2s ease;font-size:.85rem;font-weight:600;box-shadow:0 2px 4px #3b82f64d}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .call-delivery-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 6px #3b82f666}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .call-delivery-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .call-delivery-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-status-message[_ngcontent-%COMP%]{background:#fff;padding:.6rem .75rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#1e40af}.delivery-person-card[_ngcontent-%COMP%]   .delivery-status-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem;color:#3b82f6}.location-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:600;color:#111827;display:flex;align-items:center;gap:.5rem}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444;font-size:.9rem}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   .location-refresh-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#6b7280}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   .location-refresh-btn[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff;transform:rotate(180deg)}.location-card[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   .location-refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]{font-size:.85rem;color:#374151;font-weight:500}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .distance-badge[_ngcontent-%COMP%]{background:#eff6ff;color:#1d4ed8;padding:.2rem .5rem;border-radius:12px;font-size:.7rem;font-weight:600}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .eta-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#6b7280}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .eta-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.9rem}.location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .eta-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.completion-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-radius:12px;padding:1.25rem;margin-bottom:1rem;border:1px solid #86efac}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-icon[_ngcontent-%COMP%]{width:50px;height:50px;background:#10b981;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]{flex:1}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:700;color:#065f46}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.85rem;color:#047857;line-height:1.4}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]   .delivery-person-name[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.5rem;border-top:1px solid #86efac;display:flex;align-items:center;gap:.4rem;font-size:.85rem;color:#065f46}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]   .delivery-person-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:#10b981}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-text[_ngcontent-%COMP%]   .delivery-person-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.feedback-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.feedback-card[_ngcontent-%COMP%]   .feedback-header[_ngcontent-%COMP%]{margin-bottom:1rem}.feedback-card[_ngcontent-%COMP%]   .feedback-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:600;color:#111827;display:flex;align-items:center;gap:.5rem}.feedback-card[_ngcontent-%COMP%]   .feedback-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b;font-size:.95rem}.feedback-card[_ngcontent-%COMP%]   .feedback-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#6b7280}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]{margin-bottom:1rem}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]{margin-bottom:.75rem}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#374151;margin-bottom:.4rem}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]   .star-rating[_ngcontent-%COMP%]{display:flex;gap:.4rem}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]   .star-rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#e5e7eb;cursor:pointer;transition:all .2s ease}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]   .star-rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#fbbf24;transform:scale(1.1)}.feedback-card[_ngcontent-%COMP%]   .rating-section[_ngcontent-%COMP%]   .rating-category[_ngcontent-%COMP%]   .star-rating[_ngcontent-%COMP%]   i.selected[_ngcontent-%COMP%]{color:#f59e0b}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]{margin-bottom:1rem;position:relative}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:500;color:#374151;margin-bottom:.4rem}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:8px;font-size:.85rem;color:#374151;resize:vertical;font-family:inherit;transition:border-color .2s ease}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.feedback-card[_ngcontent-%COMP%]   .feedback-input[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:.75rem;font-size:.7rem;color:#9ca3af;background:#fff;padding:0 .25rem}.feedback-card[_ngcontent-%COMP%]   .submit-feedback-btn[_ngcontent-%COMP%]{width:100%;background:#3b82f6;color:#fff;border:none;padding:.75rem;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.feedback-card[_ngcontent-%COMP%]   .submit-feedback-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 6px #3b82f64d}.feedback-card[_ngcontent-%COMP%]   .submit-feedback-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;transform:none}.feedback-card[_ngcontent-%COMP%]   .submit-feedback-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.feedback-card[_ngcontent-%COMP%]   .feedback-success[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background:#dcfce7;border:1px solid #86efac;border-radius:8px;display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.85rem;color:#065f46;font-weight:500;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.feedback-card[_ngcontent-%COMP%]   .feedback-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:#10b981}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.order-items-mini[_ngcontent-%COMP%]   .item-mini[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem 0;border-bottom:1px solid #f9fafb}.order-items-mini[_ngcontent-%COMP%]   .item-mini[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.order-items-mini[_ngcontent-%COMP%]   .total-mini[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;margin-top:.5rem;border-top:2px solid #f3f4f6;font-weight:600;font-size:.9rem;color:#111827}.order-items-mini[_ngcontent-%COMP%]   .total-mini[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:#059669}.help-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.help-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;font-weight:600;color:#111827;display:flex;align-items:center;gap:.5rem}.help-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b;font-size:.9rem}.help-card[_ngcontent-%COMP%]   .help-buttons[_ngcontent-%COMP%]{display:flex;gap:.75rem}.help-card[_ngcontent-%COMP%]   .help-buttons[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]{flex:1;background:#f9fafb;border:1px solid #e5e7eb;padding:.75rem;border-radius:8px;display:flex;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .2s ease;font-size:.8rem;font-weight:500;color:#374151}.help-card[_ngcontent-%COMP%]   .help-buttons[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]:hover{background:#fff;border-color:#3b82f6;color:#3b82f6}.help-card[_ngcontent-%COMP%]   .help-buttons[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.08)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_checkmarkPop{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3) translateY(-30px)}50%{opacity:1;transform:scale(1.05) translateY(0)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:.875rem .75rem}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:34px;height:34px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.05rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:.5rem}.header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem}.header[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{width:32px;height:32px}.content-area[_ngcontent-%COMP%]{padding:.75rem}.order-details[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.help-buttons[_ngcontent-%COMP%]{flex-direction:column}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]{gap:.75rem}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-icon[_ngcontent-%COMP%]{width:45px;height:45px}.completion-card[_ngcontent-%COMP%]   .completion-content[_ngcontent-%COMP%]   .completion-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.delivery-person-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]   .call-delivery-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.delivery-person-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}@media (max-width: 480px){.content-area[_ngcontent-%COMP%]{padding:.5rem}.progress-step[_ngcontent-%COMP%]{gap:.5rem}.progress-step[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:28px;height:28px;font-size:.75rem}}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0}.error-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;color:#1e293b;margin:0 0 .5rem;font-weight:600}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0 0 1.5rem}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.status-badge.canceled[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.canceled[_ngcontent-%COMP%]   .tick-icon[_ngcontent-%COMP%]{color:#dc2626}.status-badge.rejected[_ngcontent-%COMP%]{background:#fef2f2;color:#7f1d1d}.status-badge.rejected[_ngcontent-%COMP%]   .tick-icon[_ngcontent-%COMP%]{color:#b91c1c}.cancel-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);border-radius:12px;padding:1.25rem;margin-bottom:1rem;border:1px solid #fca5a5}.cancel-card[_ngcontent-%COMP%]   .cancel-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.cancel-card[_ngcontent-%COMP%]   .cancel-content[_ngcontent-%COMP%]   .cancel-icon[_ngcontent-%COMP%]{width:50px;height:50px;background:#dc2626;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}.cancel-card[_ngcontent-%COMP%]   .cancel-content[_ngcontent-%COMP%]   .cancel-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.cancel-card[_ngcontent-%COMP%]   .cancel-content[_ngcontent-%COMP%]   .cancel-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:700;color:#7f1d1d}.cancel-card[_ngcontent-%COMP%]   .cancel-content[_ngcontent-%COMP%]   .cancel-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#991b1b;line-height:1.4}.reject-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:12px;padding:1.25rem;margin-bottom:1rem;border:1px solid #fca5a5}.reject-card[_ngcontent-%COMP%]   .reject-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.reject-card[_ngcontent-%COMP%]   .reject-content[_ngcontent-%COMP%]   .reject-icon[_ngcontent-%COMP%]{width:50px;height:50px;background:#b91c1c;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}.reject-card[_ngcontent-%COMP%]   .reject-content[_ngcontent-%COMP%]   .reject-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.reject-card[_ngcontent-%COMP%]   .reject-content[_ngcontent-%COMP%]   .reject-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:700;color:#7f1d1d}.reject-card[_ngcontent-%COMP%]   .reject-content[_ngcontent-%COMP%]   .reject-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#991b1b;line-height:1.4}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px #0000001a;border:1px solid #f3f4f6}.summary-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;font-weight:600;color:#111827;display:flex;align-items:center;gap:.5rem}.summary-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:.9rem}.order-items-mini[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:.75rem;margin-bottom:.75rem}.order-items-mini[_ngcontent-%COMP%]   .item-mini[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem 0}.order-items-mini[_ngcontent-%COMP%]   .item-mini[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:.8rem;color:#374151;font-weight:500}.order-items-mini[_ngcontent-%COMP%]   .item-mini[_ngcontent-%COMP%]   .item-qty-price[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem 0;font-size:.85rem;color:#374151}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]{color:#059669;font-weight:500}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]   .discount-value[_ngcontent-%COMP%]{color:#059669}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.discount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem;margin-right:.25rem}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]{border-top:2px solid #f3f4f6;margin-top:.5rem;padding-top:.75rem;font-weight:600;font-size:.95rem;color:#111827}.amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:#059669;font-size:1.1rem}"]})};var vn=[{path:"search",component:Rt},{path:"stop-overs",component:Nt,title:"Food Stops - Travel Food Express"},{path:"restaurants",component:Dt,title:"Restaurants - Travel Food Express"},{path:"menu",component:Ft,title:"Menu - Travel Food Express"},{path:"mobile-verification",component:Vt,title:"Verify Mobile - Travel Food Express"},{path:"order-confirmation",component:zt,title:"Order Confirmed - Travel Food Express"},{path:"order-status",component:$t,title:"Track Order - Travel Food Express"},{path:"login",component:Ct},{path:"admin",component:yt,canActivate:[St],children:[{path:"dashboard",component:Mt,title:"Dashboard - Admin Panel"},{path:"users",loadComponent:()=>import("./chunk-5BZV7IEX.js").then(r=>r.UsersComponent),title:"Users - Admin Panel"},{path:"orders",loadComponent:()=>import("./chunk-MEBQEIPJ.js").then(r=>r.OrdersComponent),title:"All Orders - Admin Panel"},{path:"orders/:status",loadComponent:()=>import("./chunk-MEBQEIPJ.js").then(r=>r.OrdersComponent),title:"Orders - Admin Panel"},{path:"menu/categories",component:et,title:"Menu Categories - Admin Panel"},{path:"menu/subcategories",component:nt,title:"Menu Sub Categories - Admin Panel"},{path:"menu/items",component:it,title:"Menu Items - Admin Panel"},{path:"settings",component:Lt,title:"Settings - Admin Panel"},{path:"settings/change-password",component:Ye,title:"Change Password - Admin Panel"},{path:"settings/restaurant-info",component:Qe,title:"Restaurant Info - Admin Panel"},{path:"settings/location-master",component:Je,title:"Location Master - Admin Panel"},{path:"settings/route-master",component:Xe,title:"Route Master - Admin Panel"},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"",loadComponent:()=>import("./chunk-BMJX7ZYU.js").then(r=>r.LandingComponent),title:"RouteEat - Delicious Food On Your Journey"},{path:"about",loadComponent:()=>import("./chunk-BMSRTGM4.js").then(r=>r.AboutComponent),title:"About Us - RouteEat"},{path:"careers",loadComponent:()=>import("./chunk-UAOAHBTE.js").then(r=>r.CareersComponent),title:"Careers - RouteEat"},{path:"contact",loadComponent:()=>import("./chunk-UZSKLC6W.js").then(r=>r.ContactComponent),title:"Contact Us - RouteEat"},{path:"help",loadComponent:()=>import("./chunk-RHZETZNK.js").then(r=>r.HelpComponent),title:"Help Center - RouteEat"},{path:"faq",loadComponent:()=>import("./chunk-7ZQCSIQK.js").then(r=>r.FaqComponent),title:"FAQs - RouteEat"},{path:"privacy",loadComponent:()=>import("./chunk-FSLYFG72.js").then(r=>r.PrivacyComponent),title:"Privacy Policy - RouteEat"},{path:"terms",loadComponent:()=>import("./chunk-EVEQAF2E.js").then(r=>r.TermsComponent),title:"Terms of Service - RouteEat"},{path:"partner",loadComponent:()=>import("./chunk-TZGTRQXJ.js").then(r=>r.PartnerComponent),title:"Become a Partner - RouteEat"},{path:"track-order",loadComponent:()=>import("./chunk-YDBOLPTL.js").then(r=>r.TrackOrderComponent),title:"Track Your Order - RouteEat"},{path:"refund",redirectTo:"faq",pathMatch:"full"},{path:"cookies",redirectTo:"privacy",pathMatch:"full"},{path:"cancellation",redirectTo:"faq",pathMatch:"full"},{path:"**",redirectTo:""}];var Mn={providers:[Xt({eventCoalescing:!0}),an(vn),nn()]};tn(bt,Mn).catch(r=>console.error(r));
