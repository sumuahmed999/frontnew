import{d as K,e as Z,f as D}from"./chunk-UDMGSDDX.js";import{a as J,b as X,c as ee}from"./chunk-ACYY2LWB.js";import"./chunk-QGSGR6J2.js";import{b as B,d as Q,h as $,o as Y,p as q,q as H,y as G}from"./chunk-HDIV7RPX.js";import{c as U,e as W}from"./chunk-RWYJK2X4.js";import{Ab as y,Bb as S,Cb as E,Db as z,Eb as _,Fb as h,Gb as C,O as x,Pa as c,Ta as O,Ya as F,bb as P,ca as m,d as k,da as f,ec as N,fc as V,ib as d,j as T,jb as R,jc as j,kb as M,lb as w,mb as o,nb as r,ob as u,rb as b,sb as p,tb as g,vb as I,wb as L,xb as A,zb as s}from"./chunk-VGUPXT3C.js";function ne(l,e){if(l&1){let t=b();o(0,"button",48),p("click",function(){let i=m(t).$implicit,a=g();return f(a.changeStatusFilter(i.value))}),o(1,"div",49),u(2,"i",17),r(),o(3,"div",50)(4,"span",35),s(5),r(),o(6,"span",51),s(7),r()()()}if(l&2){let t=e.$implicit,n=g();R("--filter-color",t.color),M("active",n.currentStatus===t.value),c(2),w(t.icon),c(3),y(t.label),c(2),y(t.count)}}function ie(l,e){if(l&1){let t=b();o(0,"div",52)(1,"div",53)(2,"div",54)(3,"h6",55),u(4,"i",56),s(5," Select Custom Date Range "),r(),o(6,"button",57),p("click",function(){m(t);let i=g();return f(i.cancelCustomDateRange())}),u(7,"i",58),r()(),o(8,"div",59)(9,"div",60)(10,"label",61),s(11,"From Date"),r(),o(12,"input",62),C("ngModelChange",function(i){m(t);let a=g();return h(a.customDateFrom,i)||(a.customDateFrom=i),f(i)}),r()(),o(13,"div",63),u(14,"i",64),r(),o(15,"div",60)(16,"label",61),s(17,"To Date"),r(),o(18,"input",65),C("ngModelChange",function(i){m(t);let a=g();return h(a.customDateTo,i)||(a.customDateTo=i),f(i)}),r()()(),o(19,"div",66)(20,"button",67),p("click",function(){m(t);let i=g();return f(i.cancelCustomDateRange())}),s(21," Cancel "),r(),o(22,"button",68),p("click",function(){m(t);let i=g();return f(i.applyCustomDateRange())}),u(23,"i",69),s(24," Apply "),r()()()()}if(l&2){let t=g();c(12),_("ngModel",t.customDateFrom),d("max",t.customDateTo||void 0),c(6),_("ngModel",t.customDateTo),d("min",t.customDateFrom||void 0)}}function oe(l,e){l&1&&(o(0,"div",70)(1,"div",71)(2,"span",72),s(3,"Loading..."),r()(),o(4,"p",73),s(5,"Loading orders..."),r()())}function re(l,e){if(l&1){let t=b();o(0,"div",74)(1,"app-recent-orders",75),p("orderUpdated",function(i){m(t);let a=g();return f(a.onOrderUpdated(i))})("viewLocation",function(i){m(t);let a=g();return f(a.viewLocation(i))}),r()()}if(l&2){let t=g();c(),d("orders",t.filteredOrders)("isLoading",t.isLoading)("pendingCount",t.getPendingCount())("showLocationButton",!0)}}function ae(l,e){if(l&1){let t=b();o(0,"button",87),p("click",function(){m(t);let i=g().$implicit,a=g(2);return f(a.changePage(i))}),s(1),r()}if(l&2){let t=g().$implicit;c(),S(" ",t," ")}}function se(l,e){l&1&&(o(0,"span",88),s(1,"..."),r())}function ce(l,e){if(l&1&&(o(0,"li",80),P(1,ae,2,1,"button",85)(2,se,2,0,"span",86),r()),l&2){let t=e.$implicit,n=g(2);M("active",t===n.currentPage)("disabled",t===-1),c(),d("ngIf",t!==-1),c(),d("ngIf",t===-1)}}function le(l,e){if(l&1){let t=b();o(0,"div",76)(1,"div",77),s(2),r(),o(3,"nav",78)(4,"ul",79)(5,"li",80)(6,"button",81),p("click",function(){m(t);let i=g();return f(i.changePage(i.currentPage-1))}),u(7,"i",82),r()(),P(8,ce,3,6,"li",83),o(9,"li",80)(10,"button",81),p("click",function(){m(t);let i=g();return f(i.changePage(i.currentPage+1))}),u(11,"i",84),r()()()()()}if(l&2){let t=g();c(2),z(" Showing ",(t.currentPage-1)*t.pageSize+1," to ",t.Math.min(t.currentPage*t.pageSize,t.totalCount)," of ",t.totalCount," orders "),c(3),M("disabled",!t.hasPreviousPage),c(),d("disabled",!t.hasPreviousPage),c(2),d("ngForOf",t.getPageNumbers()),c(),M("disabled",!t.hasNextPage),c(),d("disabled",!t.hasNextPage)}}function de(l,e){if(l&1){let t=b();o(0,"div",89)(1,"div",90),u(2,"i",91),r(),o(3,"h5",92),s(4,"No Orders Found"),r(),o(5,"p",93),s(6),r(),o(7,"button",68),p("click",function(){m(t);let i=g();return f(i.clearFilters())}),u(8,"i",43),s(9," Clear Filters "),r()()}if(l&2){let t=g();c(6),E(" There are no ",t.currentStatus==="all"?"":t.currentStatus," orders ",t.dateRange==="all"?"":"in the selected date range",". ")}}var te=class l{constructor(e,t,n,i,a,v){this.route=e;this.router=t;this.dashboardService=n;this.authService=i;this.restaurantNotificationService=a;this.adminLocationService=v}locationModal;destroy$=new T;Math=Math;allOrders=[];filteredOrders=[];isLoading=!1;currentStatus="all";currentPage=1;pageSize=20;totalCount=0;totalPages=0;hasPreviousPage=!1;hasNextPage=!1;statusFilters=[{value:"all",label:"All Orders",icon:"bi-list-ul",color:"#6c757d",count:0},{value:"pending",label:"Pending",icon:"bi-clock",color:"#ffc107",count:0},{value:"confirmed",label:"Confirmed",icon:"bi-check-circle",color:"#28a745",count:0},{value:"preparing",label:"Preparing",icon:"bi-fire",color:"#fd7e14",count:0},{value:"ready",label:"Ready",icon:"bi-box-seam",color:"#17a2b8",count:0},{value:"completed",label:"Completed",icon:"bi-check2-all",color:"#6f42c1",count:0},{value:"canceled",label:"Canceled",icon:"bi-x-circle",color:"#dc3545",count:0},{value:"rejected",label:"Rejected",icon:"bi-x-octagon",color:"#dc3545",count:0}];dateRange="week";customDateFrom="";customDateTo="";showCustomDatePicker=!1;searchQuery="";busNumberFilter="";passengerPhoneFilter="";sortBy="CreatedAt";sortOrder="desc";ngOnInit(){return k(this,null,function*(){console.log("\u{1F4CB} Orders page initializing..."),this.route.params.pipe(x(this.destroy$)).subscribe(t=>{let n=t.status;n&&this.isValidStatus(n)?this.currentStatus=n:this.currentStatus="all",this.currentPage=1,this.loadOrders()}),this.route.queryParams.pipe(x(this.destroy$)).subscribe(t=>{t.dateRange&&(this.dateRange=t.dateRange),t.dateFrom&&(this.customDateFrom=t.dateFrom),t.dateTo&&(this.customDateTo=t.dateTo),t.page&&(this.currentPage=parseInt(t.page,10))}),this.initializeRealTimeUpdates();let e=this.authService.getTenantId();if(e)try{yield this.adminLocationService.joinRestaurantLocationGroup(e),console.log("\u2705 Joined location tracking group")}catch(t){console.error("\u274C Error joining location group:",t)}})}ngOnDestroy(){console.log("\u{1F6D1} Orders page destroying...");let e=this.authService.getTenantId();e&&this.adminLocationService.leaveRestaurantLocationGroup(e),this.destroy$.next(),this.destroy$.complete()}isValidStatus(e){return this.statusFilters.some(t=>t.value===e)}getDateRange(){let e=new Date;e.setHours(0,0,0,0);let t,n;switch(this.dateRange){case"today":t=this.formatDateForAPI(e),n=this.formatDateForAPI(e);break;case"yesterday":let i=new Date(e);i.setDate(i.getDate()-1),t=this.formatDateForAPI(i),n=this.formatDateForAPI(i);break;case"week":let a=new Date(e);a.setDate(a.getDate()-6),t=this.formatDateForAPI(a),n=this.formatDateForAPI(e);break;case"month":let v=new Date(e.getFullYear(),e.getMonth(),1);t=this.formatDateForAPI(v),n=this.formatDateForAPI(e);break;case"custom":this.customDateFrom&&this.customDateTo?(t=this.customDateFrom,n=this.customDateTo):(t=this.formatDateForAPI(e),n=this.formatDateForAPI(e));break;case"all":t=void 0,n=void 0;break}return console.log(`\u{1F4C5} Date Range: ${this.dateRange} | From: ${t} | To: ${n}`),{dateFrom:t,dateTo:n}}formatDateForAPI(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}loadOrders(){let e=this.authService.getTenantId();if(!e){console.error("\u274C No tenantId");return}this.isLoading=!0;let{dateFrom:t,dateTo:n}=this.getDateRange(),i={tenantId:e,status:this.currentStatus,dateFrom:t,dateTo:n,pageNumber:this.currentPage,pageSize:this.pageSize,sortBy:this.sortBy,sortOrder:this.sortOrder,busNumber:this.busNumberFilter||void 0,passengerPhone:this.passengerPhoneFilter||void 0,passengerName:this.searchQuery||void 0};this.dashboardService.getOrders(i).pipe(x(this.destroy$)).subscribe({next:a=>{this.allOrders=a.items.map(v=>this.mapToRecentOrder(v)),this.filteredOrders=[...this.allOrders],this.totalCount=a.totalCount,this.totalPages=a.totalPages,this.hasPreviousPage=a.hasPreviousPage,this.hasNextPage=a.hasNextPage,this.updateStatusCounts(a.statusCounts),this.isLoading=!1,console.log(`\u2705 Loaded ${this.allOrders.length} orders (Page ${this.currentPage}/${this.totalPages})`)},error:a=>{console.error("\u274C Error loading orders:",a),this.isLoading=!1}})}mapToRecentOrder(e){return{id:e.bookNumber,passengerName:e.passengerName,busNumber:e.busNumber,restaurant:"Your Restaurant",items:e.bookingItems.length,amount:e.totalAmount,status:this.normalizeStatus(e.bookingStatus),time:this.formatTime(e.createdAt),bookingId:e.bookingId,isUpdating:!1,showDropdown:!1,fullDetails:{busName:e.busName,startLocationName:e.startLocationName,endLocationName:e.endLocationName,departureDate:e.departureDate,departureTime:e.departureTime,passengerPhone:e.passengerPhone,passengerEmail:e.passengerEmail,bookingStatus:e.bookingStatus,totalAmount:e.totalAmount,originalAmount:e.originalAmount,discountAmount:e.discountAmount,subtotal:e.subtotal,cgst:e.cgst,sgst:e.sgst,taxAmount:e.taxAmount,deliveryFee:e.deliveryFee,paymentStatus:e.paymentStatus,promoCode:e.promoCode,createdAt:e.createdAt,updatedAt:e.updatedAt,orderConfirmedAt:e.orderConfirmedAt,preparingStartedAt:e.preparingStartedAt,readyAt:e.readyAt,completedAt:e.completedAt,canceledAt:e.canceledAt,rejectedAt:e.rejectedAt,cancelReason:e.cancelReason,rejectReason:e.rejectReason,additionalRemarks:e.additionalRemarks,pickupLocationAddress:e.pickupLocationAddress,pickupLocationLatitude:e.pickupLocationLatitude,pickupLocationLongitude:e.pickupLocationLongitude,bookingItems:e.bookingItems,canceledItems:e.canceledItems}}}normalizeStatus(e){let t=e.toLowerCase();return t==="delivered"||t==="completed"?"completed":t==="ready"?"ready":t==="preparing"?"preparing":t==="confirmed"?"confirmed":t==="canceled"?"canceled":t==="rejected"?"rejected":"pending"}updateStatusCounts(e){this.statusFilters.forEach(t=>{t.count=e[t.value]||0})}changeStatusFilter(e){this.currentStatus=e,this.currentPage=1,this.router.navigate(["/admin/orders",e],{queryParams:{dateRange:this.dateRange,page:1},queryParamsHandling:"merge"}),this.loadOrders()}changeDateRange(e){if(this.dateRange=e,this.currentPage=1,e==="custom"){if(this.showCustomDatePicker=!0,!this.customDateFrom||!this.customDateTo){let t=new Date,n=new Date(t);n.setDate(n.getDate()-7),this.customDateFrom=this.formatDateForAPI(n),this.customDateTo=this.formatDateForAPI(t)}return}else this.showCustomDatePicker=!1;this.router.navigate([],{relativeTo:this.route,queryParams:{dateRange:e,page:1},queryParamsHandling:"merge"}),this.loadOrders()}applyCustomDateRange(){if(!this.customDateFrom||!this.customDateTo){alert("Please select both start and end dates");return}let e=new Date(this.customDateFrom),t=new Date(this.customDateTo);if(e>t){alert("Start date must be before or equal to end date");return}this.currentPage=1,this.showCustomDatePicker=!1,this.router.navigate([],{relativeTo:this.route,queryParams:{dateRange:"custom",dateFrom:this.customDateFrom,dateTo:this.customDateTo,page:1},queryParamsHandling:"merge"}),this.loadOrders()}cancelCustomDateRange(){this.showCustomDatePicker=!1,this.dateRange="week",this.changeDateRange("week")}changePage(e){e<1||e>this.totalPages||(this.currentPage=e,this.router.navigate([],{relativeTo:this.route,queryParams:{page:e},queryParamsHandling:"merge"}),this.loadOrders())}changePageSize(e){this.pageSize=e,this.currentPage=1,this.loadOrders()}applySearch(){this.currentPage=1,this.loadOrders()}clearFilters(){this.searchQuery="",this.busNumberFilter="",this.passengerPhoneFilter="",this.dateRange="week",this.customDateFrom="",this.customDateTo="",this.showCustomDatePicker=!1,this.currentPage=1,this.router.navigate([],{relativeTo:this.route,queryParams:{dateRange:"week",page:1},queryParamsHandling:"merge"}),this.loadOrders()}onOrderUpdated(e){console.log("\u2705 Order updated:",e.id),this.loadOrders()}refreshOrders(){console.log("\u{1F504} Refreshing orders..."),this.loadOrders()}exportOrders(){let e={generatedAt:new Date().toISOString(),status:this.currentStatus,dateRange:this.dateRange,totalOrders:this.totalCount,currentPage:this.currentPage,pageSize:this.pageSize,orders:this.filteredOrders},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),i=window.URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`orders-${this.currentStatus}-${new Date().getTime()}.json`,a.click(),window.URL.revokeObjectURL(i)}getCurrentFilter(){return this.statusFilters.find(e=>e.value===this.currentStatus)||this.statusFilters[0]}getPendingCount(){return this.statusFilters.find(e=>e.value==="pending")?.count||0}getPageNumbers(){let e=[];if(this.totalPages<=5)for(let n=1;n<=this.totalPages;n++)e.push(n);else if(this.currentPage<=3){for(let n=1;n<=4;n++)e.push(n);e.push(-1),e.push(this.totalPages)}else if(this.currentPage>=this.totalPages-2){e.push(1),e.push(-1);for(let n=this.totalPages-3;n<=this.totalPages;n++)e.push(n)}else{e.push(1),e.push(-1);for(let n=this.currentPage-1;n<=this.currentPage+1;n++)e.push(n);e.push(-1),e.push(this.totalPages)}return e}initializeRealTimeUpdates(){return k(this,null,function*(){let e=this.authService.getTenantId();if(e)try{yield this.restaurantNotificationService.startConnection(),yield new Promise(t=>setTimeout(t,1e3)),yield this.restaurantNotificationService.joinRestaurantGroup(e),this.restaurantNotificationService.getOrderStatusUpdates().pipe(x(this.destroy$)).subscribe(t=>{t&&this.handleOrderStatusUpdate(t)})}catch(t){console.error("\u274C Error initializing real-time updates:",t)}})}handleOrderStatusUpdate(e){let t=this.allOrders.findIndex(n=>n.id===e.orderId);t!==-1?(this.allOrders[t].status=this.normalizeStatus(e.status),this.allOrders[t].time=this.formatTime(e.updatedAt),this.allOrders[t].isUpdating=!1,this.allOrders[t].showDropdown=!1,this.filteredOrders=[...this.allOrders],console.log("\u2705 Order updated in real-time:",e.orderId)):this.loadOrders()}formatTime(e){try{return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Just now"}}viewLocation(e){let t=this.authService.getTenantId();!t||!e.bookingId||(this.locationModal.bookingId=e.bookingId,this.locationModal.orderId=e.id,this.locationModal.tenantId=t,this.locationModal.show())}canViewLocation(e){return["confirmed","preparing","ready"].includes(e.status.toLowerCase())}static \u0275fac=function(t){return new(t||l)(O(U),O(W),O(ee),O(J),O(K),O(Z))};static \u0275cmp=F({type:l,selectors:[["app-orders"]],viewQuery:function(t,n){if(t&1&&I(D,5),t&2){let i;L(i=A())&&(n.locationModal=i.first)}},decls:83,vars:24,consts:[[1,"orders-page"],[1,"page-header"],[1,"header-left"],[1,"page-title"],[1,"bi","bi-receipt","me-2"],[1,"page-subtitle"],[1,"header-right"],["title","Refresh Orders",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click","disabled"],[1,"bi","bi-arrow-clockwise","me-1"],["title","Export Orders",1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-download","me-1"],[1,"status-filters"],[1,"filters-container"],["class","status-filter-btn",3,"active","--filter-color","click",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"toolbar-left"],[1,"current-filter-info"],[1,"bi"],[1,"filter-text"],[1,"toolbar-right"],[1,"date-range-filter"],[1,"filter-label-small"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","today"],["value","yesterday"],["value","week"],["value","month"],["value","custom"],["value","all"],[1,"page-size-filter"],[3,"value"],["class","custom-date-picker",4,"ngIf"],[1,"advanced-filters"],[1,"filters-row"],[1,"filter-group"],[1,"filter-label"],["type","text","placeholder","Passenger name...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["type","text","placeholder","Bus number...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["type","text","placeholder","Phone number...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],[1,"filter-actions"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-search","me-1"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],["class","loading-overlay",4,"ngIf"],["class","orders-content",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"status-filter-btn",3,"click"],[1,"filter-icon"],[1,"filter-content"],[1,"filter-count"],[1,"custom-date-picker"],[1,"date-picker-content"],[1,"date-picker-header"],[1,"date-picker-title"],[1,"bi","bi-calendar-range","me-2"],[1,"btn-close-picker",3,"click"],[1,"bi","bi-x-lg"],[1,"date-picker-body"],[1,"date-input-group"],[1,"date-label"],["type","date",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"date-separator"],[1,"bi","bi-arrow-right"],["type","date",1,"form-control",3,"ngModelChange","ngModel","min"],[1,"date-picker-footer"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"orders-content"],[3,"orderUpdated","viewLocation","orders","isLoading","pendingCount","showLocationButton"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-nav"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-inbox"],[1,"empty-title"],[1,"empty-text"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),u(4,"i",4),s(5," Order Management "),r(),o(6,"p",5),s(7,"View and manage all orders"),r()(),o(8,"div",6)(9,"button",7),p("click",function(){return n.refreshOrders()}),u(10,"i",8),s(11," Refresh "),r(),o(12,"button",9),p("click",function(){return n.exportOrders()}),u(13,"i",10),s(14," Export "),r()()(),o(15,"div",11)(16,"div",12),P(17,ne,8,8,"button",13),r()(),o(18,"div",14)(19,"div",15)(20,"div",16),u(21,"i",17),o(22,"span",18),s(23," Showing "),o(24,"strong"),s(25),r(),s(26),r()()(),o(27,"div",19)(28,"div",20)(29,"label",21),s(30,"Date Range:"),r(),o(31,"select",22),C("ngModelChange",function(a){return h(n.dateRange,a)||(n.dateRange=a),a}),p("change",function(){return n.changeDateRange(n.dateRange)}),o(32,"option",23),s(33,"Today"),r(),o(34,"option",24),s(35,"Yesterday"),r(),o(36,"option",25),s(37,"Last 7 Days"),r(),o(38,"option",26),s(39,"This Month"),r(),o(40,"option",27),s(41,"Custom Range"),r(),o(42,"option",28),s(43,"All Time"),r()()(),o(44,"div",29)(45,"label",21),s(46,"Show:"),r(),o(47,"select",22),C("ngModelChange",function(a){return h(n.pageSize,a)||(n.pageSize=a),a}),p("change",function(){return n.changePageSize(n.pageSize)}),o(48,"option",30),s(49,"10"),r(),o(50,"option",30),s(51,"20"),r(),o(52,"option",30),s(53,"50"),r(),o(54,"option",30),s(55,"100"),r()()()()(),P(56,ie,25,4,"div",31),o(57,"div",32)(58,"div",33)(59,"div",34)(60,"label",35),s(61,"Search Passenger"),r(),o(62,"input",36),C("ngModelChange",function(a){return h(n.searchQuery,a)||(n.searchQuery=a),a}),p("keyup.enter",function(){return n.applySearch()}),r()(),o(63,"div",34)(64,"label",35),s(65,"Bus Number"),r(),o(66,"input",37),C("ngModelChange",function(a){return h(n.busNumberFilter,a)||(n.busNumberFilter=a),a}),p("keyup.enter",function(){return n.applySearch()}),r()(),o(67,"div",34)(68,"label",35),s(69,"Passenger Phone"),r(),o(70,"input",38),C("ngModelChange",function(a){return h(n.passengerPhoneFilter,a)||(n.passengerPhoneFilter=a),a}),p("keyup.enter",function(){return n.applySearch()}),r()(),o(71,"div",39)(72,"button",40),p("click",function(){return n.applySearch()}),u(73,"i",41),s(74," Search "),r(),o(75,"button",42),p("click",function(){return n.clearFilters()}),u(76,"i",43),s(77," Clear "),r()()()(),P(78,oe,6,0,"div",44)(79,re,2,4,"div",45),u(80,"app-user-location-modal"),P(81,le,12,10,"div",46)(82,de,10,2,"div",47),r()),t&2&&(c(9),d("disabled",n.isLoading),c(),M("spin",n.isLoading),c(7),d("ngForOf",n.statusFilters),c(4),w(n.getCurrentFilter().icon),c(4),y(n.totalCount),c(),S(" ",n.getCurrentFilter().label," "),c(5),_("ngModel",n.dateRange),c(16),_("ngModel",n.pageSize),c(),d("value",10),c(2),d("value",20),c(2),d("value",50),c(2),d("value",100),c(2),d("ngIf",n.showCustomDatePicker),c(6),_("ngModel",n.searchQuery),c(4),_("ngModel",n.busNumberFilter),c(4),_("ngModel",n.passengerPhoneFilter),c(2),d("disabled",n.isLoading),c(3),d("disabled",n.isLoading),c(3),d("ngIf",n.isLoading&&n.allOrders.length===0),c(),d("ngIf",!n.isLoading||n.allOrders.length>0),c(2),d("ngIf",n.totalPages>1),c(),d("ngIf",!n.isLoading&&n.filteredOrders.length===0))},dependencies:[j,N,V,G,q,H,B,Y,Q,$,X,D],styles:[".orders-page[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;gap:20px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex:1}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:5px 0 0}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px;white-space:nowrap}.status-filters[_ngcontent-%COMP%]{margin-bottom:20px;background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #00000014}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0e0e0;border-radius:10px;padding:15px 12px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:12px;text-align:left}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]:hover{border-color:var(--filter-color);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn.active[_ngcontent-%COMP%]{border-color:var(--filter-color);background-color:color-mix(in srgb,var(--filter-color) 10%,white);box-shadow:0 4px 12px color-mix(in srgb,var(--filter-color) 20%,transparent)}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn.active[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%], .status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn.active[_ngcontent-%COMP%]   .filter-count[_ngcontent-%COMP%]{background-color:var(--filter-color);color:#fff}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px;background-color:#f5f5f5;color:var(--filter-color);flex-shrink:0;transition:all .2s}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .status-filter-btn[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-count[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:10px;font-size:12px;font-weight:600;background-color:#f0f0f0;color:#666;align-self:flex-start;transition:all .2s}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:15px 20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d;gap:20px}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%]   .current-filter-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:14px;color:#666}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%]   .current-filter-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#007bff}.toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%]   .current-filter-info[_ngcontent-%COMP%]   .filter-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-weight:600}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-label-small[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:500;white-space:nowrap;margin:0}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{min-width:150px;font-size:13px;border-color:#ddd;cursor:pointer}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.orders-content[_ngcontent-%COMP%]{margin-bottom:20px}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#666;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;color:#999}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0 0 10px}.empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 20px;max-width:400px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.orders-page[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.status-filters[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]{width:100%}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{flex:1}}.custom-date-picker[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:0;margin-bottom:20px;box-shadow:0 4px 12px #00000026;border:2px solid #007bff;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background-color:#f8f9fa;border-bottom:1px solid #e0e0e0}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]   .date-picker-title[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:#333;display:flex;align-items:center}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]   .date-picker-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#007bff}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]   .btn-close-picker[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;opacity:.6;transition:opacity .2s}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]   .btn-close-picker[_ngcontent-%COMP%]:hover{opacity:1}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-header[_ngcontent-%COMP%]   .btn-close-picker[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]{display:flex;align-items:end;gap:15px;padding:20px}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#666;margin:0}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:14px;padding:8px 12px;border:1px solid #ddd;border-radius:6px}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-separator[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:8px;color:#999;font-size:18px}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:15px 20px;background-color:#f8f9fa;border-top:1px solid #e0e0e0}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-content[_ngcontent-%COMP%]   .date-picker-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.advanced-filters[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000000d}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:end}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#666;margin:0}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:13px;border-color:#ddd}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 16px;font-size:13px;white-space:nowrap}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d;margin-top:20px;gap:20px}.pagination-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{margin:0;display:flex;gap:4px}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{list-style:none}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff;font-weight:600}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px;border:1px solid #ddd;border-radius:4px;background:#fff;color:#333;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;min-width:36px}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f0f0f0;border-color:#007bff}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-size-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.page-size-filter[_ngcontent-%COMP%]   .filter-label-small[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:500;white-space:nowrap;margin:0}.page-size-filter[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{min-width:80px;font-size:13px;border-color:#ddd;cursor:pointer}.page-size-filter[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}@media (max-width: 768px){.custom-date-picker[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]{flex-direction:column}.custom-date-picker[_ngcontent-%COMP%]   .date-picker-body[_ngcontent-%COMP%]   .date-separator[_ngcontent-%COMP%]{transform:rotate(90deg);padding:0}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{width:100%}.advanced-filters[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.pagination-container[_ngcontent-%COMP%]   .pagination-nav[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{justify-content:center}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]   .page-size-filter[_ngcontent-%COMP%]{width:100%}}"]})};export{te as OrdersComponent};
