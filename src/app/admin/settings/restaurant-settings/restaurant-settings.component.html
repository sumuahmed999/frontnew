<!-- restaurant-form.component.html -->
<div class="restaurant-management">
  <!-- Loading Overlay -->
  <div *ngIf="isLoadingData" class="loading-overlay">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <div class="loading-text">Loading restaurant information...</div>
  </div>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="alert alert-success alert-compact mb-3">
    <i class="bi bi-check-circle me-2"></i>{{ successMessage }}
    <button type="button" class="btn-close btn-close-sm" (click)="clearMessages()"></button>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger alert-compact mb-3">
    <i class="bi bi-exclamation-circle me-2"></i>{{ errorMessage }}
    <button type="button" class="btn-close btn-close-sm" (click)="clearMessages()"></button>
  </div>

  <!-- Restaurant Information Form -->
  <div class="restaurant-form card">
    <div class="card-header">
      <h5 class="card-title">
        <i class="bi bi-building me-2"></i>
        Restaurant Information
      </h5>
      <small class="text-muted">Update your restaurant details and preferences</small>
    </div>

    <div class="card-body">
      <form [formGroup]="restaurantForm" (ngSubmit)="onSubmit()">
        
        <!-- Logo Section -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-image me-2"></i>Restaurant Banner
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col-2">
            <label class="form-label-compact">Upload Resturent Banner</label>
            <input type="file" id="logoInput" (change)="onLogoSelected($event)" 
                   accept="image/*" class="form-control form-control-compact" [disabled]="isLoading">
            <small class="form-help-text">Max size: 5MB. Formats: JPG, PNG, GIF</small>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col-1">
            <label class="form-label-compact">Preview</label>
            <div class="logo-preview-container">
              <div *ngIf="logoPreview" class="logo-preview">
                <img [src]="logoPreview" alt="Logo Preview" class="logo-image">
                <button type="button" class="btn-remove-logo" (click)="removeLogo()" [disabled]="isLoading">
                  <i class="bi bi-x"></i>
                </button>
              </div>
              <div *ngIf="!logoPreview" class="logo-placeholder">
                <i class="bi bi-image"></i>
                <span>No logo</span>
              </div>
            </div>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <!-- Basic Information -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-info-circle me-2"></i>Basic Information
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Restaurant Name *</label>
            <input type="text" formControlName="tenantName" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space">
              <div *ngIf="restaurantForm.get('tenantName')?.invalid && restaurantForm.get('tenantName')?.touched; else spacer1" 
                   class="error-text-compact">Restaurant name is required</div>
              <ng-template #spacer1><div class="error-spacer"></div></ng-template>
            </div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Business Type</label>
            <input type="text" formControlName="businessType" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-telephone me-2"></i>Contact Information
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Contact Name</label>
            <input type="text" formControlName="contactName" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Email</label>
            <input type="email" formControlName="contactEmail" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space">
              <div *ngIf="restaurantForm.get('contactEmail')?.invalid && restaurantForm.get('contactEmail')?.touched; else spacer3" 
                   class="error-text-compact">Valid email required</div>
              <ng-template #spacer3><div class="error-spacer"></div></ng-template>
            </div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Website</label>
            <input type="url" formControlName="website" class="form-control form-control-compact" [disabled]="isLoading" placeholder="https://...">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Primary Phone</label>
            <input type="tel" formControlName="contactPhone" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Mobile</label>
            <input type="tel" formControlName="contactMobile" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Alternate Phone</label>
            <input type="tel" formControlName="alternatePhone" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <!-- Address Information -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-geo-alt me-2"></i>Address Information
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col-full">
            <label class="form-label-compact">Address</label>
            <textarea formControlName="address" class="form-control form-control-compact" rows="2" [disabled]="isLoading"></textarea>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">City</label>
            <input type="text" formControlName="city" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">State</label>
            <input type="text" formControlName="state" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Postal Code</label>
            <input type="text" formControlName="postalCode" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Country</label>
            <input type="text" formControlName="country" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Latitude</label>
            <input type="number" step="0.000001" formControlName="latitude" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Longitude</label>
            <input type="number" step="0.000001" formControlName="longitude" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <!-- Empty column for spacing -->
          </div>
          <div class="form-col">
            <!-- Empty column for spacing -->
          </div>
        </div>

        <!-- Business Registration -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-building-check me-2"></i>Business Registration
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Registration Number</label>
            <input type="text" formControlName="registrationNumber" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Tax ID</label>
            <input type="text" formControlName="taxId" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">License Number</label>
            <input type="text" formControlName="licenseNumber" class="form-control form-control-compact" [disabled]="isLoading">
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <!-- Preferences & Localization -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-gear me-2"></i>Preferences & Localization
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Timezone</label>
            <select formControlName="timezone" class="form-control form-control-compact" [disabled]="isLoading">
              <option value="">Select Timezone</option>
              <option value="UTC">UTC</option>
              <option value="Asia/Kolkata">India Standard Time</option>
              <option value="America/New_York">Eastern Time</option>
              <option value="America/Los_Angeles">Pacific Time</option>
              <option value="Europe/London">London Time</option>
            </select>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Currency</label>
            <select formControlName="currency" class="form-control form-control-compact" [disabled]="isLoading">
              <option value="">Select Currency</option>
              <option value="USD">USD ($)</option>
              <option value="INR">INR (₹)</option>
              <option value="EUR">EUR (€)</option>
              <option value="GBP">GBP (£)</option>
            </select>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Language</label>
            <select formControlName="language" class="form-control form-control-compact" [disabled]="isLoading">
              <option value="">Select Language</option>
              <option value="en">English</option>
              <option value="hi">Hindi</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
            </select>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <label class="form-label-compact">Date Format</label>
            <select formControlName="dateFormat" class="form-control form-control-compact" [disabled]="isLoading">
              <option value="">Select Format</option>
              <option value="DD/MM/YYYY">DD/MM/YYYY</option>
              <option value="MM/DD/YYYY">MM/DD/YYYY</option>
              <option value="YYYY-MM-DD">YYYY-MM-DD</option>
            </select>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <label class="form-label-compact">Time Format</label>
            <select formControlName="timeFormat" class="form-control form-control-compact" [disabled]="isLoading">
              <option value="">Select Format</option>
              <option value="12">12 Hour</option>
              <option value="24">24 Hour</option>
            </select>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
          <div class="form-col">
            <!-- Empty for spacing -->
          </div>
        </div>

        <!-- Additional Notes -->
        <div class="section-divider">
          <div class="section-title">
            <i class="bi bi-journal-text me-2"></i>Additional Notes
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col-full">
            <label class="form-label-compact">Notes</label>
            <textarea formControlName="notes" class="form-control form-control-compact" rows="4" [disabled]="isLoading" placeholder="Any additional information..."></textarea>
            <div class="error-space"><div class="error-spacer"></div></div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary btn-compact" [disabled]="restaurantForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            <span *ngIf="isLoading">Updating...</span>
            <span *ngIf="!isLoading">
              <i class="bi bi-check-circle me-1"></i>Update Restaurant Info
            </span>
          </button>
          <!-- <button type="button" class="btn btn-secondary btn-compact ms-2" (click)="resetForm()" [disabled]="isLoading">
            <i class="bi bi-x-circle me-1"></i>Reset Form
          </button> -->
        </div>
      </form>
    </div>
  </div>
</div>
